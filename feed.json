{
    "version": "https://jsonfeed.org/version/1",
    "title": "学无止境",
    "subtitle": "世界上大部分事，都没太大意义。真理与热爱除外",
    "icon": "https://blog.aayu.today/images/favicon.ico",
    "description": "真理和热爱是吾永生的追求",
    "home_page_url": "https://blog.aayu.today",
    "items": [
        {
            "id": "https://blog.aayu.today/skill/tools/20230403/",
            "url": "https://blog.aayu.today/skill/tools/20230403/",
            "title": "Docker + ChatGPT + 微信",
            "date_published": "2023-04-02T18:43:28.000Z",
            "content_html": "<h2 id=\"前言\"><a class=\"anchor\" href=\"#前言\">#</a> 前言</h2>\n<p>终于捣鼓成功啦，项目地址：<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL3lsc2lzbG92ZS93ZWNoYXRib3Q=\">ylsislove/wechatbot</span>，欢迎 star ~</p>\n<h2 id=\"极空间部署\"><a class=\"anchor\" href=\"#极空间部署\">#</a> 极空间部署</h2>\n<h3 id=\"下载镜像\"><a class=\"anchor\" href=\"#下载镜像\">#</a> 下载镜像</h3>\n<p>在仓库中搜索我的用户名 <code>ylsislove</code> ，选择 <code>wechatbot</code> ，下载最新版本即可</p>\n<p class=\"gallery\" data-height=\"240\"><img data-src=\"https://image.aayu.today/uploads/2023/04/03/202304030227517.png\" alt=\"\" /><br />\n<img data-src=\"https://image.aayu.today/uploads/2023/04/03/202304030228047.png\" alt=\"\" /></p>\n<h3 id=\"创建配置文件\"><a class=\"anchor\" href=\"#创建配置文件\">#</a> 创建配置文件</h3>\n<p>找一个位置，新建 <code>config.txt</code> ，内容如下，根据个人信息进行修改</p>\n<p class=\"gallery\" data-height=\"240\"><img data-src=\"https://image.aayu.today/uploads/2023/04/03/202304030230032.png\" alt=\"\" /><br />\n<img data-src=\"https://image.aayu.today/uploads/2023/04/03/202304030231212.png\" alt=\"\" /></p>\n<figure class=\"highlight json\"><figcaption data-lang=\"JSON\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token property\">\"api_key\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"your api key\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token property\">\"auto_pass\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token property\">\"session_timeout\"</span><span class=\"token operator\">:</span> <span class=\"token number\">60</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token property\">\"max_tokens\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1024</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token property\">\"model\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"gpt-3.5-turbo\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token property\">\"temperature\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token property\">\"reply_prefix\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"来自机器人回复：\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token property\">\"session_clear_token\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"清空会话\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token property\">\"base_url\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https://api.openai.com/v1/\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  <span class=\"token property\">\"request_timeout\"</span><span class=\"token operator\">:</span> <span class=\"token number\">60</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>参数含义参见：<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL3lsc2lzbG92ZS93ZWNoYXRib3QjJUU5JTg1JThEJUU3JUJEJUFFJUU2JTk2JTg3JUU0JUJCJUI2JUU4JUFGJUI0JUU2JTk4JThF\">配置文件说明</span></p>\n<h3 id=\"创建容器\"><a class=\"anchor\" href=\"#创建容器\">#</a> 创建容器</h3>\n<p>双击刚才下载的镜像，配置极其简单，像网络、端口、别名、环境都不用管，只需配置好 <code>文件夹路径</code> 和 <code>启动命令</code> 即可，如下</p>\n<p class=\"gallery\" data-height=\"240\"><img data-src=\"https://image.aayu.today/uploads/2023/04/03/202304030234539.png\" alt=\"\" /><br />\n<img data-src=\"https://image.aayu.today/uploads/2023/04/03/202304030234624.png\" alt=\"\" /><br />\n<img data-src=\"https://image.aayu.today/uploads/2023/04/03/202304030236817.png\" alt=\"\" /></p>\n<p>点击应用，bingo~，容器创建成功</p>\n<h3 id=\"扫码登录\"><a class=\"anchor\" href=\"#扫码登录\">#</a> 扫码登录</h3>\n<p>我们可以在容器的日志中看到我们要扫描的二维码，但控制台不好扫描，我们就把日志下载下来即可～</p>\n<p>下载后，用本地的记事本打开，看到二维码清晰的展现在我们面前了，爽～</p>\n<p class=\"gallery\" data-height=\"240\"><img data-src=\"https://image.aayu.today/uploads/2023/04/03/202304030240193.png\" alt=\"\" /><br />\n<img data-src=\"https://image.aayu.today/uploads/2023/04/03/202304030238171.png\" alt=\"\" /><br />\n<img data-src=\"https://image.aayu.today/uploads/2023/04/03/202304030249151.png\" alt=\"\" /><br />\n<img data-src=\"https://image.aayu.today/uploads/2023/04/03/202304030241329.png\" alt=\"\" /></p>\n<p>扫描成功后刷新日志，成功登录，接下来开始愉快的学习吧～</p>\n<h2 id=\"效果展示\"><a class=\"anchor\" href=\"#效果展示\">#</a> 效果展示</h2>\n<p class=\"gallery\" data-height=\"600\"><img data-src=\"https://image.aayu.today/uploads/2023/04/03/202304030216436.jpg\" alt=\"\" /><br />\n<img data-src=\"https://image.aayu.today/uploads/2023/04/03/202304030216410.jpg\" alt=\"\" /><br />\n<img data-src=\"https://image.aayu.today/uploads/2023/04/03/202304030216301.jpg\" alt=\"\" /></p>\n",
            "tags": [
                "不看会后悔的实用技巧分享",
                "工具篇",
                "ChatGPT"
            ]
        },
        {
            "id": "https://blog.aayu.today/skill/code-analysis/siyuan/20230401/",
            "url": "https://blog.aayu.today/skill/code-analysis/siyuan/20230401/",
            "title": "思源笔记源码解析之kernel篇（一）api",
            "date_published": "2023-04-01T14:06:19.000Z",
            "content_html": "<h2 id=\"总结\"><a class=\"anchor\" href=\"#总结\">#</a> 总结</h2>\n<p>根据以上你自己的分析，对程序的整体功能和构架做出概括。然后用一张 markdown 表格整理每个文件的功能</p>\n<p>根据我的分析，该程序是一个基于 API 的笔记管理系统，使用 Go 语言编写，基于 Gin 框架和 Lute 引擎。它包含了多个文件和模块，用于实现不同的功能，例如：笔记本管理、笔记管理、文本编辑、图表管理、导入 / 导出、同步 / 备份、用户管理等。可以通过 API 接口调用这些功能。以下是每个文件的功能：</p>\n<table>\n<thead>\n<tr>\n<th>文件名</th>\n<th>功能</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>account.go</td>\n<td>用于处理用户账户相关的 API 请求</td>\n</tr>\n<tr>\n<td>ai.go</td>\n<td>提供 AI 语音合成的 API 接口</td>\n</tr>\n<tr>\n<td>asset.go</td>\n<td>用于上传、查看和下载笔记中使用的资源文件</td>\n</tr>\n<tr>\n<td>attr.go</td>\n<td>提供来源快捷方式操作的 API 接口</td>\n</tr>\n<tr>\n<td>av.go</td>\n<td>提供了音视频播放相关的 API 接口</td>\n</tr>\n<tr>\n<td>bazaar.go</td>\n<td>提供了安装和管理 bazaar 主题插件的 API 接口</td>\n</tr>\n<tr>\n<td>block.go</td>\n<td>处理块的增删改查请求，提供块层级、索引等信息</td>\n</tr>\n<tr>\n<td>block_op.go</td>\n<td>提供文本处理的 API 接口</td>\n</tr>\n<tr>\n<td>bookmark.go</td>\n<td>提供了书签相关的 API 接口</td>\n</tr>\n<tr>\n<td>clipboard.go</td>\n<td>处理剪贴板相关的 API 请求</td>\n</tr>\n<tr>\n<td>export.go</td>\n<td>导出笔记文档的接口</td>\n</tr>\n<tr>\n<td>extension.go</td>\n<td>添加、删除、获取扩展插件的 API 接口</td>\n</tr>\n<tr>\n<td>file.go</td>\n<td>管理笔记文件的 API 接口</td>\n</tr>\n<tr>\n<td>filetree.go</td>\n<td>管理笔记文件树的 API 接口</td>\n</tr>\n<tr>\n<td>format.go</td>\n<td>提供文本格式化相关的 API 接口</td>\n</tr>\n<tr>\n<td>graph.go</td>\n<td>管理图表的 API 接口</td>\n</tr>\n<tr>\n<td>history.go</td>\n<td>提供操作历史记录的 API 接口</td>\n</tr>\n<tr>\n<td>import.go</td>\n<td>导入笔记文档的 API 接口</td>\n</tr>\n<tr>\n<td>inbox.go</td>\n<td>管理收件箱的 API 接口</td>\n</tr>\n<tr>\n<td>lute.go</td>\n<td>提供 markdown 文档渲染相关的 API 接口</td>\n</tr>\n<tr>\n<td>notebook.go</td>\n<td>管理笔记本的 API 接口</td>\n</tr>\n<tr>\n<td>notification.go</td>\n<td>管理通知的 API 接口</td>\n</tr>\n<tr>\n<td>outline.go</td>\n<td>获取文档纲要的 API 接口</td>\n</tr>\n<tr>\n<td>ref.go</td>\n<td>管理快捷方式的 API 接口</td>\n</tr>\n<tr>\n<td>repo.go</td>\n<td>处理仓库相关的 API 请求</td>\n</tr>\n<tr>\n<td>riff.go</td>\n<td>添加、删除和管理卡片包的 API 接口</td>\n</tr>\n<tr>\n<td>router.go</td>\n<td>路由中间件级统一处理入口</td>\n</tr>\n<tr>\n<td>search.go</td>\n<td>管理全文搜索的 API 接口</td>\n</tr>\n<tr>\n<td>setting.go</td>\n<td>管理系统设置的 API 接口</td>\n</tr>\n<tr>\n<td>snippet.go</td>\n<td>管理代码片段的 API 接口</td>\n</tr>\n<tr>\n<td>sql.go</td>\n<td>处理 SQL 查询请求的 API 接口</td>\n</tr>\n<tr>\n<td>storage.go</td>\n<td>管理笔记存储相关的 API 接口</td>\n</tr>\n<tr>\n<td>sync.go</td>\n<td>处理同步 / 备份相关的 API 请求</td>\n</tr>\n<tr>\n<td>system.go</td>\n<td>管理系统功能的 API 接口</td>\n</tr>\n<tr>\n<td>tag.go</td>\n<td>处理标签相关的 API 请求</td>\n</tr>\n<tr>\n<td>template.go</td>\n<td>处理模板渲染相关的 API 请求</td>\n</tr>\n<tr>\n<td>transaction.go</td>\n<td>处理交易请求的 API 接口</td>\n</tr>\n<tr>\n<td>workspace.go</td>\n<td>管理工作空间的 API 接口</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"038accountgo\"><a class=\"anchor\" href=\"#038accountgo\">#</a> [0/38]account.go</h2>\n<p>此文件是 api 服务的账号相关接口实现的 Go 语言代码文件，主要包含了以下几个接口实现：</p>\n<ol>\n<li>开始免费试用（startFreeTrial）</li>\n<li>使用激活码（useActivationcode）</li>\n<li>检查激活码（checkActivationcode）</li>\n<li>注销账号（deactivateUser）</li>\n<li>用户登录（login）</li>\n</ol>\n<p>每个接口都有相应的处理逻辑，并返回对应的结果。在实现过程中，还引用了一些第三方的 Go 语言库，如 gin, gulu 等。</p>\n<h2 id=\"138aigo\"><a class=\"anchor\" href=\"#138aigo\">#</a> [1/38]ai.go</h2>\n<p>本文件名为  <code>api\\ai.go</code> ，是一个 Go 语言编写的应用程序文件，主要是关于人工智能的部分。程序使用了 Gin 框架和一些其他的依赖项库，如 gulu。</p>\n<p>主要包含两个函数：chatGPT 和 chatGPTWithAction。这两个函数的作用是使用模型进行文本聊天，其中 chatGPT 使用模型回答用户提出的问题，而 chatGPTWithAction 使用模型执行动作并更新模型。函数通过 HTTP 响应的方式返回处理结果。</p>\n<p>该程序遵守 GNU Affero 通用公共许可证，即可以自由地共享、使用和修改，但需要带上相应的协议声明和原始代码的许可证。</p>\n<h2 id=\"238assetgo\"><a class=\"anchor\" href=\"#238assetgo\">#</a> [2/38]asset.go</h2>\n<p>该文件是 Golang 编写的 Siyuan 笔记应用程序的一个 API 模块，提供了一系列操作笔记中资源（如图片、附件等）的 HTTP 接口，具有上传、下载、修改、删除等功能。主要函数包括：</p>\n<ul>\n<li>renameAsset: 重命名资源文件</li>\n<li>getDocImageAssets: 获取笔记中图片资源</li>\n<li>setFileAnnotation/getFileAnnotation: 设置和读取资源注释文本</li>\n<li>resolveAssetPath: 解析资源文件相对路径并获取绝对路径</li>\n<li>removeUnusedAsset/removeUnusedAssets/getUnusedAssets: 删除和查询未使用的资源文件</li>\n<li>uploadCloud: 将本地笔记中的资源上传至云存储</li>\n<li>insertLocalAssets: 将本地资源文件插入到笔记中</li>\n</ul>\n<p>此外，代码中还包含了一些错误处理代码（例如当发生错误时返回错误码和错误信息）和依赖库引用代码。</p>\n<h2 id=\"338-attrgo\"><a class=\"anchor\" href=\"#338-attrgo\">#</a> [3/38] attr.go</h2>\n<p>该文件是 SiYuan 笔记应用的 API 包的一部分，包含了若干个函数，实现了获取书签标签、获取块（block）属性、设置块属性、重置块属性等功能。每个函数都是一个 RESTful API 端点，使用 HTTP 协议提供服务。</p>\n<p>其中， <code>getBookmarkLabels</code>  函数用于获取所有的书签标签， <code>getBlockAttrs</code>  函数用于获取指定块的属性值， <code>setBlockAttrs</code>  函数用于设置指定块的属性值， <code>resetBlockAttrs</code>  函数用于将指定块的属性值重置为默认值。</p>\n<p>代码实现了参数校验和错误处理机制，并使用第三方库 Gulu 和 Gin 简化了代码逻辑和响应操作。</p>\n<h2 id=\"438-avgo\"><a class=\"anchor\" href=\"#438-avgo\">#</a> [4/38] av.go</h2>\n<p>该程序文件是 SiYuan 在构建数字花园时使用的一个 API 文件。</p>\n<p>此文件提供了一个 HTTP 处理程序函数（ <code>renderAttributeView</code> ），该函数允许通过 HTTP 请求从服务器获取一个指定的属性视图。该属性视图的 ID 通过 HTTP 请求的 JSON 主体中的 &quot;id&quot; 字段传递。</p>\n<p>此外，该程序文件还引入了其他依赖包，并使用了这些依赖包提供的工具类和函数。</p>\n<h2 id=\"538-bazaargo\"><a class=\"anchor\" href=\"#538-bazaargo\">#</a> [5/38] bazaar.go</h2>\n<p>该程序文件名是  <code>api\\bazaar.go</code> ，代码主要是实现了一个 API 接口，用于处理集市（Bazaar）的相关操作。</p>\n<p>其中包括：</p>\n<ul>\n<li>获取 Bazaar 包的 README 文件</li>\n<li>获取 Bazaar 小部件、获取已安装的小部件、安装 Bazaar 小部件、卸载 Bazaar 小部件</li>\n<li>获取 Bazaar 图标、获取已安装的图标、安装 Bazaar 图标、卸载 Bazaar 图标</li>\n<li>获取 Bazaar 模板、获取已安装的模板、安装 Bazaar 模板、卸载 Bazaar 模板</li>\n<li>以及获取 Bazaar 主题、获取已安装的主题、安装 Bazaar 主题和卸载 Bazaar 主题等操作。</li>\n</ul>\n<p>该程序主要基于 Golang 语言和 Gin 框架实现，其中还引入了其他第三方库进行支持。</p>\n<h2 id=\"638-blockgo\"><a class=\"anchor\" href=\"#638-blockgo\">#</a> [6/38] block.go</h2>\n<p>该文件是 Siyuan 内核中的一个 API 文件，提供了一系列操作块的 RESTful API。</p>\n<p>文件主要定义了一些函数，包括：</p>\n<ul>\n<li>获取标题子级 ID、获取标题子级 DOM、获取标题删除事务、获取标题层级事务</li>\n<li>获取文档信息</li>\n<li>获取内容单词计数、获取树的统计信息、获取块的单词计数</li>\n<li>转移块引用、交换块引用、设置块提醒、检查块是否折叠、检查块是否存在、获取最近更新的块、获取块引用文本、获取块引用 ID、根据文件注释 ID 获取块引用 ID、根据引用文本获取块定义 ID、获取块层级结构、获取块索引、获取块信息、获取块 DOM 和获取块 Kramdown 等。</li>\n</ul>\n<h2 id=\"738-block_opgo\"><a class=\"anchor\" href=\"#738-block_opgo\">#</a> [7/38] block_op.go</h2>\n<p>该程序文件是一个 Go 语言编写的 api 包中的代码文件，文件名为  <code>block_op.go</code> 。</p>\n<p>这个文件实现了一些操作 block（块）的函数，如插入、删除、更新等。</p>\n<p>这些操作将与文件系统交互，并且利用 gin 框架处理 HTTP 请求和响应。</p>\n<p>其中，最重要的依赖是 siyuan-note 项目的模型、文件系统、Lute 引擎和一些公用库。这个文件的主要作用是提供用于块级操作的 API。</p>\n<h2 id=\"838-bookmarkgo\"><a class=\"anchor\" href=\"#838-bookmarkgo\">#</a> [8/38] bookmark.go</h2>\n<p>该程序文件名为  <code>bookmark.go</code> ，位于  <code>api\\</code>  目录下。</p>\n<p>代码为 Go 语言编写的 API 接口，主要实现了获取、删除和重命名书签的功能。</p>\n<p>具体实现使用了  <code>gin</code>  框架提供的 API 开发接口。</p>\n<p>其中获取书签的方法是  <code>getBookmark</code> ，删除书签的方法是  <code>removeBookmark</code> ，重命名书签的方法是  <code>renameBookmark</code> 。该程序文件依赖于  <code>gulu</code>  和  <code>util</code>  两个引入包和  <code>model</code>  模块。</p>\n<h2 id=\"938-clipboardgo\"><a class=\"anchor\" href=\"#938-clipboardgo\">#</a> [9/38] clipboard.go</h2>\n<p>该程序文件是一个 Go 语言编写的 API 接口，文件名为  <code>clipboard.go</code> ，所在目录为 api，主要实现了读取剪贴板中的文件路径的功能。</p>\n<p>该接口使用了第三方库 clipboard 和 gulu，其中 gulu 是作者自己开发的一个工具包。接口将获取到的文件路径作为 JSON 数据返回给请求方，当没有文件路径时返回一个空数组。</p>\n<p>需要注意的是，在 Linux 平台下，不再支持 “粘贴为纯文本” 的操作，因此该接口在 Linux 平台下不会读取剪贴板中的文件路径。</p>\n<p>该程序文件采用 GNU Affero General Public License 开源协议。</p>\n<h2 id=\"1038-exportgo\"><a class=\"anchor\" href=\"#1038-exportgo\">#</a> [10/38] export.go</h2>\n<p>该程序文件名为  <code>api\\export.go</code> ，主要实现了 SiYuan 的导入和导出功能。</p>\n<p>该文件包含了多个函数来导出不同格式的 SiYuan 笔记，包括 Markdown、HTML、PDF 等。其中，每个函数都接收一个参数 c*gin.Context，从中提取需要导出的笔记的 ID、文件名等信息。</p>\n<p>这些函数都通过 model 包提供的接口来访问笔记本数据，将导出的结果返回给客户端。</p>\n<h2 id=\"1138-extensiongo\"><a class=\"anchor\" href=\"#1138-extensiongo\">#</a> [11/38] extension.go</h2>\n<p>该文件名为  <code>api\\extension.go</code>  的程序文件是一个 Go 语言写的 API 接口实现，主要实现了对 SiYuan 软件中的 “拷贝到笔记” 功能的支持，包含了上传文件、解析 HTML、替换图片等功能。具体包含函数 extensionCopy，其中主要包含了以下功能：</p>\n<ul>\n<li>获取参数信息，包括 dom、notebook 等信息。</li>\n<li>组织保存地址，处理文件名，防止文件名冲突。</li>\n<li>读取上传文件数据并保存到指定地址。</li>\n<li>解析 HTML 中的图片地址，将已上传的图片地址替换到 HTML 中。</li>\n<li>将最终处理后的文本信息以 JSON 的格式返回给前端。</li>\n</ul>\n<h2 id=\"1238-filego\"><a class=\"anchor\" href=\"#1238-filego\">#</a> [12/38] file.go</h2>\n<p>该程序实现了一个简单的用于操作文件的 API 接口，其中包括：</p>\n<ul>\n<li><code>copyFile</code> ：将一个文件从源位置复制到目标位置。</li>\n<li><code>getFile</code> ：获取一个文件，并在 HTTP 响应中返回。</li>\n<li><code>readDir</code> ：读取一个目录，并返回其中的所有文件和子目录。</li>\n<li><code>removeFile</code> ：删除指定位置的文件或目录。</li>\n<li><code>putFile</code> ：将一个文件或目录保存到指定位置。</li>\n</ul>\n<p>这些函数实现了基本的 CRUD （创建、读取、更新、删除）操作，可以用于搭建简单的文件服务。除此之外，该文件还依赖了一些第三方库，如  <code>gin</code> 、 <code>filelock</code>  等。</p>\n<h2 id=\"1338-filetreego\"><a class=\"anchor\" href=\"#1338-filetreego\">#</a> [13/38] filetree.go</h2>\n<p>该程序文件名为  <code>filetree.go</code> ，位于 api 文件夹下。</p>\n<p>该文件中定义了一系列接口函数，用以实现对 siyuan 笔记 app 中的文件树的一系列操作，包括获取、移动、删除、重命名笔记等。</p>\n<p>具体实现中涉及到了 siyuan-note/siyuan 项目中的一些模块和库，如文件系统、模板渲染以及 gin web 框架等。</p>\n<h2 id=\"1438-formatgo\"><a class=\"anchor\" href=\"#1438-formatgo\">#</a> [14/38] format.go</h2>\n<p>这个程序文件包含了名为 “api” 的包，它实现了两个名为 “netImg2LocalAssets” 和 “autoSpace” 的 API 端点，使用 gin 框架和 HTTP 协议。</p>\n<p>这些端点是通过处理 HTTP POST 请求来调用 “model” 包中的 “NetImg2LocalAssets” 和 “AutoSpace” 函数。</p>\n<p>这个程序的目的是在 Siyuan 笔记应用中提供这两个功能的 API 接口。</p>\n<h2 id=\"1538-graphgo\"><a class=\"anchor\" href=\"#1538-graphgo\">#</a> [15/38] graph.go</h2>\n<p>此程序文件是一个 Go 语言编写的 API，使用了 Gin 数据库框架以及一些 SiYuan 笔记应用的应用程序接口。</p>\n<p>它包含四个函数：resetGraph、resetLocalGraph、getGraph 和 getLocalGraph，这些函数的主要作用是重置全局或本地图表，获取全局或本地图表的信息。其中，resetGraph 和 resetLocalGraph 用于重置全局或本地图表，getGraph 和 getLocalGraph 用于获取全局或本地图表的信息。</p>\n<p>每个函数都在不同的 URL 上运行，并返回固定格式的 JSON 数据。</p>\n<h2 id=\"1638-historygo\"><a class=\"anchor\" href=\"#1638-historygo\">#</a> [16/38] history.go</h2>\n<p>该文件名是  <code>api\\history.go</code> ，是一个 Go 语言编写的 API 程序文件，提供了与笔记历史相关的功能函数，包括搜索笔记历史、获取历史记录项目、重建历史索引、清空工作区历史、获取文档历史内容、恢复文档历史、恢复资产历史、恢复笔记本历史。</p>\n<p>该程序文件使用了第三方库 gin，以及 suyuan-note/siyuan/kernel/model、suyuan-note/siyuan/kernel/util 等模块。</p>\n<p>程序代码使用了 GNU Affero 通用公共许可证。</p>\n<h2 id=\"1738-importgo\"><a class=\"anchor\" href=\"#1738-importgo\">#</a> [17/38] import.go</h2>\n<p>这是一个 Go 语言编写的 API 程序，包含三个函数： <code>importSY</code> 、 <code>importData</code>  和  <code>importStdMd</code> 。</p>\n<p>其中  <code>importSY</code>  函数用于导入  <code>.sy.zip</code>  格式的笔记， <code>importData</code>  函数用于导入一般数据文件， <code>importStdMd</code>  函数用于导入标准 Markdown 格式的笔记。这些函数都是通过 HTTP POST 方法接收数据，并返回 JSON 类型的结果。</p>\n<p>函数中使用了许多其它 Go 语言包来完成相关任务，如  <code>os</code> 、 <code>io</code> 、 <code>net/http</code> 、 <code>filepath</code>  等标准库，以及  <code>github.com/88250/gulu</code> 、 <code>github.com/gin-gonic/gin</code> 、 <code>github.com/siyuan-note/logging</code> 、 <code>github.com/siyuan-note/siyuan/kernel/model</code> 、 <code>github.com/siyuan-note/siyuan/kernel/util</code>  等第三方库。</p>\n<h2 id=\"1838-inboxgo\"><a class=\"anchor\" href=\"#1838-inboxgo\">#</a> [18/38] inbox.go</h2>\n<p>该程序文件名为 inbox.go，位于 api 目录下。该程序实现了三个 HTTP API 接口，分别为：</p>\n<ol>\n<li>removeShorthands：用于移除云端快捷方式，参数为 ids（待移除的快捷方式 ID 列表），返回值为成功移除的快捷方式数量。</li>\n<li>getShorthand：用于获取云端快捷方式的具体内容，参数为 id（快捷方式 ID），返回值为快捷方式的具体内容。</li>\n<li>getShorthands：用于获取云端快捷方式列表，参数为 page（页码），返回值为指定页码的快捷方式列表。</li>\n</ol>\n<p>这些 API 接口通过 GIN 框架进行封装，通过 HTTP 返回值进行数据传输，使用了 Gulu 和 Siyuan-Note 库的一些函数和方法。</p>\n<h2 id=\"1938-lutego\"><a class=\"anchor\" href=\"#1938-lutego\">#</a> [19/38] lute.go</h2>\n<p>该程序文件是一个 Go 语言编写的 API，文件名为 lute.go，位于 api 目录下。它实现了以下函数：</p>\n<ul>\n<li>copyStdMarkdown：将指定 ID 的脑图导出为标准 Markdown 格式。</li>\n<li>html2BlockDOM：将指定 HTML 转换为块级 DOM 并处理其中带有超链接的图片为本地引用。</li>\n<li>spinBlockDOM：将指定块级 DOM 中的语法转换为另一种语法。</li>\n</ul>\n<p>该程序文件引用了许多其他的库和函数，包括：</p>\n<ul>\n<li>gin-gonic/gin：实现了 HTTP Web 框架。</li>\n<li>88250/gulu：提供了一些 Go 语言工具库的封装。</li>\n<li>88250/lute：一个 Go 语言实现的 Markdown 渲染器。</li>\n<li>siyuan-note/filelock：提供了一种获取并持有文件锁的方法，以防止多个程序同时修改同一个文件。</li>\n</ul>\n<h2 id=\"2038-notebookgo\"><a class=\"anchor\" href=\"#2038-notebookgo\">#</a> [20/38] notebook.go</h2>\n<p>该文件名为  <code>api\\notebook.go</code> ，是一个 Golang 语言的程序文件。</p>\n<p>该文件定义了一系列函数，用于处理有关于笔记本的 API 请求。其中包括设置笔记本图标、修改笔记本的排序、重命名笔记本、删除笔记本、创建笔记本、打开笔记本、关闭笔记本、获取笔记本的配置信息和列出所有笔记本等操作。</p>\n<p>这些函数将在 API 服务的实现中得到调用，用于处理客户端的 API 请求，并返回相应的响应结果。</p>\n<h2 id=\"2138-notificationgo\"><a class=\"anchor\" href=\"#2138-notificationgo\">#</a> [21/38] notification.go</h2>\n<p>该文件是一个 Go 语言编写的与 API 相关的文件，文件路径为  <code>api\\notification.go</code> 。</p>\n<p>该文件的主要作用是为了实现在 SiYuan 系统中发送通知的功能，其中包括推送消息和推送错误消息。该文件主要使用了  <code>gin</code>  框架来处理请求，同时也引入了  <code>gulu</code>  和  <code>util</code>  工具包来辅助实现功能。具体来说，该文件实现了  <code>pushMsg()</code>  和  <code>pushErrMsg()</code>  两个函数，分别用于推送普通消息和错误消息。</p>\n<p>在函数中会根据传入的参数构造一条推送消息，并调用  <code>util</code>  中的函数来将消息推送给相应的接收者。在消息发送成功后，会返回一个包含消息 ID 的 JSON 格式的响应。</p>\n<h2 id=\"2238-outlinego\"><a class=\"anchor\" href=\"#2238-outlinego\">#</a> [22/38] outline.go</h2>\n<p>该程序文件是一个 Golang 语言编写的 API 文件，文件名为  <code>outline.go</code> ，属于 api 目录下。</p>\n<p>它提供了一个函数 getDocOutline，负责从指定的笔记文档中获取文档纲要（outline），并以 JSON 格式返回。该函数使用了 gin 和 gulu 库对 HTTP 请求和 JSON 数据进行处理，同时也引用了 model 和 util 库中的函数来实现所需的功能。</p>\n<p>函数的实现过程中，通过请求参数指定了需要获取纲要的笔记文档的 ID，若参数错误则返回错误信息，若获取过程中出现异常也会返回错误信息。</p>\n<h2 id=\"2338-refgo\"><a class=\"anchor\" href=\"#2338-refgo\">#</a> [23/38] ref.go</h2>\n<p>这是一个名为  <code>ref.go</code>  的 Go 语言程序文件，位于 api\\ 目录下。它实现了 5 个函数：</p>\n<ol>\n<li>refreshBacklink：刷新某个文档的反向链接。</li>\n<li>getBackmentionDoc：获取某个文档被引用的文档列表。</li>\n<li>getBacklinkDoc：获取某个文档引用的文档列表。</li>\n<li>getBacklink2：获取某个文档的反向链接信息，包括反向链接列表、被反向链接的文档列表等。</li>\n<li>getBacklink：获取某个文档的反向链接信息，与 getBacklink2 类似但参数和返回值有所不同。</li>\n</ol>\n<h2 id=\"2438-repogo\"><a class=\"anchor\" href=\"#2438-repogo\">#</a> [24/38] repo.go</h2>\n<p>文件名为  <code>api\\repo.go</code> ，该文件是一个 Go 语言程序，主要提供了一系列操作仓库的 API 接口，包括如下函数：</p>\n<ol>\n<li>func openRepoSnapshotDoc (c *gin.Context)，获取打开快照文档</li>\n<li>func diffRepoSnapshots (c *gin.Context)，对比快照</li>\n<li>func getCloudSpace (c *gin.Context)，获取云空间</li>\n<li>func checkoutRepo (c *gin.Context)，检出仓库</li>\n<li>func downloadCloudSnapshot (c *gin.Context)，下载云快照</li>\n<li>func uploadCloudSnapshot (c *gin.Context)，上传云快照</li>\n<li>func getRepoSnapshots (c *gin.Context)，获取仓库快照</li>\n<li>func getCloudRepoTagSnapshots (c *gin.Context)，获取云仓库标签快照</li>\n<li>func removeCloudRepoTagSnapshot (c *gin.Context)，删除云仓库标签快照</li>\n<li>func getRepoTagSnapshots (c *gin.Context)，获取仓库标签快照</li>\n<li>func removeRepoTagSnapshot (c *gin.Context)，删除仓库标签快照</li>\n<li>func createSnapshot (c *gin.Context)，创建快照</li>\n<li>func tagSnapshot (c *gin.Context)，标记快照</li>\n<li>func importRepoKey (c *gin.Context)，导入仓库密钥</li>\n<li>func initRepoKeyFromPassphrase (c *gin.Context)，从口令初始化仓库密钥</li>\n<li>func initRepoKey (c *gin.Context)，初始化仓库密钥</li>\n<li>func resetRepo (c *gin.Context)，重置仓库</li>\n</ol>\n<p>这些 API 接口的实现依赖于一些 Go 包，如 gin-gonic 和 gulu。</p>\n<h2 id=\"2538-riffgo\"><a class=\"anchor\" href=\"#2538-riffgo\">#</a> [25/38] riff.go</h2>\n<p>此文件为 SiYuan 笔记应用的 API 实现，包含以下功能：</p>\n<ul>\n<li>获取笔记本中的卡片</li>\n<li>获取树状结构中的卡片</li>\n<li>获取卡包中的卡片</li>\n<li>复习卡片</li>\n<li>跳过卡片的复习</li>\n<li>获取笔记本中的待复习卡片</li>\n<li>获取树状结构中的待复习卡片</li>\n<li>获取卡包中的待复习卡片</li>\n<li>删除卡包中的卡片</li>\n<li>添加卡片到卡包</li>\n<li>重命名卡包</li>\n<li>删除卡包</li>\n<li>创建卡包</li>\n<li>获取所有卡包的数据，包括 ID、名称、大小、创建时间、更新时间。</li>\n</ul>\n<h2 id=\"2638-routergo\"><a class=\"anchor\" href=\"#2638-routergo\">#</a> [26/38] router.go</h2>\n<p>该文件是一个 Go 语言编写的 API 路由文件，用于处理各种 HTTP 请求。</p>\n<p>其中，不需要鉴权的请求包括获取系统启动进度、获取系统版本号等；需要鉴权的请求包括设置工作空间、创建笔记本、搜索笔记等。</p>\n<p>文件中主要使用了 Gin 框架来处理 HTTP 请求，同时还调用了其他模块中的函数来完成相应的业务逻辑。</p>\n<h2 id=\"2738-searchgo\"><a class=\"anchor\" href=\"#2738-searchgo\">#</a> [27/38] search.go</h2>\n<p>这是一个 Go 语言的程序文件，文件名为  <code>search.go</code> ，包含了一些用于搜索的 API 函数。</p>\n<p>其中包括：findReplace、searchAsset、searchTag、searchWidget、removeTemplate、searchTemplate、searchEmbedBlock、searchRefBlock、fullTextSearchBlock 等函数。</p>\n<p>这些函数用于查找、替换、删除、搜索各种不同类型的内容，如标签、模板、嵌入块、引用块等。这些搜索功能可以通过 API 调用，以便在程序中方便地使用。</p>\n<h2 id=\"2838-settinggo\"><a class=\"anchor\" href=\"#2838-settinggo\">#</a> [28/38] setting.go</h2>\n<p>该程序文件实现了对 SiYuan 笔记应用的设置，包括 AI、闪卡、账户、编辑器、导出、文件树、搜索、快捷键、外观、云用户、自定义 CSS、表情等设置的修改和获取。</p>\n<p>其中，每个设置对应了一个 HTTP 请求处理函数，通过接收请求中携带的参数来修改相应的配置项，以此实现对 SiYuan 笔记应用的个性化设置。</p>\n<h2 id=\"2938-snippetgo\"><a class=\"anchor\" href=\"#2938-snippetgo\">#</a> [29/38] snippet.go</h2>\n<p>该程序文件是一个 Go 语言编写的 API 文件，文件名为 snippet.go，主要包含四个函数：serveSnippets、getSnippet、setSnippet 和 removeSnippet。</p>\n<p>serveSnippets 函数用于处理访问 /snippets/ 文件路径下的资源，会先从配置文件中读取该资源的内容，如果加载失败则返回 404 错误，并且如果配置文件中匹配到了该资源的名称和类型则返回其配置文件中的内容，其他情况则在文件系统中查找该资源，并返回其内容。</p>\n<p>getSnippet 函数用于读取配置文件中的所有代码片段，可按照类型和是否已禁用进行过滤，并返回查询到的代码片段数组。</p>\n<p>setSnippet 函数用于修改配置文件中的代码片段，会根据请求参数中的 snippets 数组来更新相应的配置项。</p>\n<p>removeSnippet 函数用于删除某个代码片段，并返回删除的代码片段。</p>\n<h2 id=\"3038-sqlgo\"><a class=\"anchor\" href=\"#3038-sqlgo\">#</a> [30/38] sql.go</h2>\n<p>该程序是一个基于 Gin 框架的 API 服务，文件名为  <code>sql.go</code> 。</p>\n<p>它提供了一个名为 SQL 的函数，该函数接收来自 API 请求中的 SQL 语句语句，然后通过调用 Siyuan 的 SQL 内核组件来执行这些语句。如果 SQL 执行成功，则函数将返回查询结果。如果 SQL 执行时发生错误，则函数将返回一个错误代码和错误信息。</p>\n<h2 id=\"3138-storagego\"><a class=\"anchor\" href=\"#3138-storagego\">#</a> [31/38] storage.go</h2>\n<p>本文件为 api 模块中的一个程序文件，文件名为  <code>storage.go</code> ，主要包含了一组存储相关的函数方法。</p>\n<p>其中包括获取最近文档、删除标准、设置标准、获取标准、删除本地存储值、设置本地存储值、设置本地存储、获取本地存储等方法。这些方法主要是通过调用 model 模块中的相关函数，来实现对存储的操作。</p>\n<p>同时，也使用了一些第三方模块和工具函数，如 gin、gulu 和 util 等。最后，返回给调用者的数据都是通过 JSON 格式的数据结构来实现的。</p>\n<h2 id=\"3238-syncgo\"><a class=\"anchor\" href=\"#3238-syncgo\">#</a> [32/38] sync.go</h2>\n<p>该程序是 Go 语言编写的一个用于支持云同步功能的 API 程序文件，文件名为  <code>sync.go</code> ，属于 api 包，主要实现了以下功能：</p>\n<ul>\n<li>查询是否已经进行启动同步（getBootSync）</li>\n<li>执行同步（performSync）</li>\n<li>执行启动同步（performBootSync）</li>\n<li>列出云同步目录（listCloudSyncDir）</li>\n<li>移除云同步目录（removeCloudSyncDir）</li>\n<li>创建云同步目录（createCloudSyncDir）</li>\n<li>设置同步生成冲突文档（setSyncGenerateConflictDoc）</li>\n<li>设置同步启用（setSyncEnable）</li>\n<li>设置同步模式（setSyncMode）</li>\n<li>设置同步提供者（setSyncProvider）</li>\n<li>设置同步提供者为 S3（setSyncProviderS3）&lt;br /&gt;</li>\n<li>设置同步提供者为 WebDAV（setSyncProviderWebDAV）</li>\n<li>设置云同步目录（setCloudSyncDir）</li>\n</ul>\n<h2 id=\"3338-systemgo\"><a class=\"anchor\" href=\"#3338-systemgo\">#</a> [33/38] system.go</h2>\n<p>该程序文件实现了 SiYuan 笔记系统的 API 功能。程序文件共包含多个函数：</p>\n<ul>\n<li>getEmojiConf 函数：获取表情包配置信息。</li>\n<li>checkUpdate 函数：检查系统更新。</li>\n<li>exportLog 函数：导出系统日志。</li>\n<li>getConf 函数：获取系统配置信息。</li>\n<li>setUILayout 函数：设置 UI 布局。</li>\n<li>setAccessAuthCode 函数：设置访问权限代码。</li>\n<li>getSysFonts 函数：获取系统字体。</li>\n<li>version 函数：获取系统版本。</li>\n<li>currentTime 函数：获取当前时间戳。</li>\n<li>bootProgress 函数：获取系统启动进程。</li>\n<li>setAppearanceMode 函数：设置系统外观模式。</li>\n<li>setNetworkServe 函数：设置网络服务。</li>\n<li>setGoogleAnalytics 函数：设置谷歌分析。</li>\n<li>setUploadErrLog 函数：设置上传错误日志。</li>\n<li>setAutoLaunch 函数：设置自动启动。</li>\n<li>setDownloadInstallPkg 函数：设置是否下载安装包。</li>\n<li>setNetworkProxy 函数：设置网络代理。</li>\n<li>addUIProcess 函数：添加 UI 进程。</li>\n<li>exit 函数：退出系统。</li>\n</ul>\n<p>这些函数实现了系统的一些基本功能，例如获取配置信息、修改系统设置、检查系统更新、导出系统日志、退出系统等。</p>\n<h2 id=\"3438-taggo\"><a class=\"anchor\" href=\"#3438-taggo\">#</a> [34/38] tag.go</h2>\n<p>该程序文件名为  <code>tag.go</code> ，位于 api 目录下。程序使用了 Go 语言编写，实现了一些关于标签的 API 接口。</p>\n<p>其中，getTag 函数用于获取所有标签；renameTag 函数用于重命名标签；removeTag 函数用于删除标签。</p>\n<p>程序引用了其他的库，如 gin、gulu、model、util 等。该程序还使用了 GNU Affero General Public License 开源协议。</p>\n<h2 id=\"3538-templatego\"><a class=\"anchor\" href=\"#3538-templatego\">#</a> [35/38] template.go</h2>\n<p>这是一个 Go 语言编写的 API 函数文件，文件名为  <code>template.go</code> ，位于 api 目录下。该文件中包含 3 个处理 HTTP 请求的函数：renderSprig、docSaveAsTemplate 和 renderTemplate。</p>\n<p>renderSprig 函数通过接受一个请求，用给定的模板参数进行渲染，最终将渲染结果作为返回值传递到请求的响应中。</p>\n<p>docSaveAsTemplate 函数接受一个请求，将给定的文档 ID 的内容保存成模板。</p>\n<p>renderTemplate 函数接受一个请求，渲染给定的模板，最终将渲染结果作为响应发送给请求端。其中，请求会传送两个参数：path 和 id，分别为模板路径和对应文档的 ID。</p>\n<p>这些函数对不同的 HTTP 请求提供了不同的处理方式，可以供不同的客户端或应用程序使用。</p>\n<h2 id=\"3638-transactiongo\"><a class=\"anchor\" href=\"#3638-transactiongo\">#</a> [36/38] transaction.go</h2>\n<p>该文件是一个 Go 语言编写的 API 模块，包含了一系列函数用于处理交易请求。该模块在接收到 HTTP 请求后，解析请求的 JSON 数据，将其转换成事务对象，并将该事务的状态与数据提供给 kernel 中的其他函数进行处理，最后将结果以 JSON 格式返回给客户端。其中函数 performTransactions 处理交易请求，函数 pushTransactions 用于将交易结果推送到客户端。</p>\n<h2 id=\"3738-workspacego\"><a class=\"anchor\" href=\"#3738-workspacego\">#</a> [37/38] workspace.go</h2>\n<p>该文件是 SiYuan 组件的一部分，主要实现工作空间相关的 API 功能。程序通过框架 Gin 来提供 Web 服务，提供以下几个 API：</p>\n<ol>\n<li><code>/api/workspace/createWorkspaceDir</code> ：用于创建工作空间文件夹；</li>\n<li><code>/api/workspace/removeWorkspaceDir</code> ：用于删除已有的工作空间；</li>\n<li><code>/api/workspace/getMobileWorkspaces</code> ：用于获取移动设备上的工作空间列表；</li>\n<li><code>/api/workspace/getWorkspaces</code> ：用于获取所有工作空间列表信息；</li>\n<li><code>/api/workspace/setWorkspaceDir</code> ：用于切换工作空间。</li>\n</ol>\n<p>此外，还定义了一个  <code>Workspace</code>  结构体，主要用于展示工作空间信息。在实现各个 API 功能的过程中，还需要使用到其他模块提供的函数，例如： <code>util.ReadWorkspacePaths()</code>  读取工作空间路径列表等。</p>\n",
            "tags": [
                "不看会后悔的实用技巧分享",
                "源码解析",
                "思源笔记",
                "思源笔记"
            ]
        },
        {
            "id": "https://blog.aayu.today/skill/tools/20230329/",
            "url": "https://blog.aayu.today/skill/tools/20230329/",
            "title": "如何用New Bing进行辅助科研",
            "date_published": "2023-03-29T13:00:51.000Z",
            "content_html": "<h2 id=\"前言\"><a class=\"anchor\" href=\"#前言\">#</a> 前言</h2>\n<p>多说无益，直接上图</p>\n<h2 id=\"技巧\"><a class=\"anchor\" href=\"#技巧\">#</a> 技巧</h2>\n<p><img data-src=\"https://image.aayu.today/uploads/2023/03/29/202303292102800.png\" alt=\"\" /></p>\n<p><img data-src=\"https://image.aayu.today/uploads/2023/03/29/202303292102843.png\" alt=\"\" /></p>\n<p><img data-src=\"https://image.aayu.today/uploads/2023/03/29/202303292102842.png\" alt=\"\" /></p>\n<p><img data-src=\"https://image.aayu.today/uploads/2023/03/29/202303292102850.png\" alt=\"\" /></p>\n<p><img data-src=\"https://image.aayu.today/uploads/2023/03/29/202303292103596.png\" alt=\"\" /></p>\n<p><img data-src=\"https://image.aayu.today/uploads/2023/03/29/202303292103856.png\" alt=\"\" /></p>\n<p><img data-src=\"https://image.aayu.today/uploads/2023/03/29/202303292104293.png\" alt=\"\" /></p>\n<p><img data-src=\"https://image.aayu.today/uploads/2023/03/29/202303292104472.png\" alt=\"\" /></p>\n<p><img data-src=\"https://image.aayu.today/uploads/2023/03/29/202303292104688.png\" alt=\"\" /></p>\n<p>我是真的被震撼到了，这篇论文中我之前一直有一个点没搞懂，就是如何判断敲击事件的发生的，woc 今天让 new bing 去读，能给我详细的解释清论文的原理，还能给我写出示例代码 😱</p>\n<p>就给人一种感觉就是，有一个导师能给你详细的讲解论文。最后还尝试了下 new bing 能不能读公式，依旧牛逼，虽然公式找错了，但它是真能读懂公式啊</p>\n<p><img data-src=\"https://image.aayu.today/uploads/2023/03/29/202303292105534.png\" alt=\"\" /></p>\n<p>最后想感慨就是，限制 new bing 或 chatgpt 的已经不是模型能力问题了，而是我的想象力和提问方式 😑</p>\n",
            "tags": [
                "不看会后悔的实用技巧分享",
                "工具篇",
                "New Bing"
            ]
        },
        {
            "id": "https://blog.aayu.today/nas/zspace/20230311/",
            "url": "https://blog.aayu.today/nas/zspace/20230311/",
            "title": "Docker版思源笔记加ChatGPT的超强搭配使用~",
            "date_published": "2023-03-11T08:16:27.000Z",
            "content_html": "<h2 id=\"前言\"><a class=\"anchor\" href=\"#前言\">#</a> 前言</h2>\n<p>前几天捣鼓了<a href=\"https://blog.aayu.today/nas/zspace/20230224/\">自助编译极空间 Z4 思源笔记（siyuan）Docker 项目</a>，思源笔记的开发者 D 大和 V 姐更新真的是太频繁了，几乎每周都会有新的功能和特性，最让我感动的是我凌晨去 GitHub 的 Issues 上给他们提了些<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL3NpeXVhbi1ub3RlL3NpeXVhbi9pc3N1ZXMvNzYxNQ==\">改进意见</span>，结果当天就把功能完善了，所以真的很想让我吹一波🤣</p>\n<p>最新版本的思源笔记已经更新到<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL3NpeXVhbi1ub3RlL3NpeXVhbi9yZWxlYXNlcy90YWcvdjIuNy45\"> v2.7.9</span> 了，在该版本中完善了 <code>针对内容块的人工智能辅助支持</code> ，对，就是可以在思源笔记里使用 OpenAI 的 Chat API 对笔记内容：</p>\n<ul class=\"task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_0\" checked=\"true\" disabled=\"true\" /><label for=\"cbx_0\"> 续写</label></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_1\" checked=\"true\" disabled=\"true\" /><label for=\"cbx_1\"> 翻译</label>\n<ul class=\"task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_2\" checked=\"true\" disabled=\"true\" /><label for=\"cbx_2\"> 中文</label></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_3\" checked=\"true\" disabled=\"true\" /><label for=\"cbx_3\"> 日文</label></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_4\" checked=\"true\" disabled=\"true\" /><label for=\"cbx_4\"> 韩文</label></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_5\" checked=\"true\" disabled=\"true\" /><label for=\"cbx_5\"> 英文</label></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_6\" checked=\"true\" disabled=\"true\" /><label for=\"cbx_6\"> 西班牙文</label></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_7\" checked=\"true\" disabled=\"true\" /><label for=\"cbx_7\"> 法文</label></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_8\" checked=\"true\" disabled=\"true\" /><label for=\"cbx_8\"> 德文</label></li>\n</ul>\n</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_9\" checked=\"true\" disabled=\"true\" /><label for=\"cbx_9\"> 提取摘要</label></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_10\" checked=\"true\" disabled=\"true\" /><label for=\"cbx_10\"> 头脑风暴</label></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_11\" checked=\"true\" disabled=\"true\" /><label for=\"cbx_11\"> 修正语法和拼写</label></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_12\" checked=\"true\" disabled=\"true\" /><label for=\"cbx_12\"> 自定义操作...</label></li>\n</ul>\n<div class=\"note primary\">\n<p>有了这些功能后，我觉得思源笔记已经很适合进行学术论文的归纳和整理了，真的是未来可期啊～</p>\n</div>\n<h2 id=\"使用\"><a class=\"anchor\" href=\"#使用\">#</a> 使用</h2>\n<p>我也紧跟思源笔记官方的脚步，从 v2.7.6 开始每个发行版本我都会把它编译成适配于极空间 Z4 的<span class=\"exturl\" data-url=\"aHR0cHM6Ly9odWIuZG9ja2VyLmNvbS9yZXBvc2l0b3J5L2RvY2tlci95bHNpc2xvdmUvc2l5dWFu\"> Docker 镜像</span>，所以如果有小伙伴也用的是极空间 Z4，就可以用我编译好的镜像去尝试一下啦～</p>\n<div class=\"note info\">\n<p>其他的部署环境可以直接用思源笔记官方的 Docker 镜像就行：b3log/siyuan:latest<br />\n 本人编译的镜像只适合极空间 Z4 设备哦</p>\n</div>\n<p>拉取最新的 v2.7.9 镜像版本，容器配置如下</p>\n<p class=\"gallery\" data-height=\"240\"><img data-src=\"https://image.aayu.today/uploads/2023/03/11/202303111602935.png\" alt=\"\" /><br />\n<img data-src=\"https://image.aayu.today/uploads/2023/03/11/202303111603901.png\" alt=\"\" /><br />\n<img data-src=\"https://image.aayu.today/uploads/2023/03/11/202303111603755.png\" alt=\"\" /><br />\n<img data-src=\"https://image.aayu.today/uploads/2023/03/11/202303111604932.png\" alt=\"\" /><br />\n<img data-src=\"https://image.aayu.today/uploads/2023/03/11/202303111604137.png\" alt=\"\" /><br />\n<img data-src=\"https://image.aayu.today/uploads/2023/03/11/202303111608817.png\" alt=\"\" /></p>\n<div class=\"note info\">\n<p>国内使用 openai api key 是需要点手段的，可以通过配置 <code>SIYUAN_OPENAI_API_BASE_URL</code>  或 <code>SIYUAN_OPENAI_API_PROXY</code>  环境变量来解决，这两个环境变量使用一个就行，不然多层代理后网络响应时间会变长。</p>\n<ul>\n<li>SIYUAN_OPENAI_API_BASE_URL：默认值为 <code>https://api.openai.com/v1</code> ，可以配置成 <code>https://你的代理域名/v1</code></li>\n<li>SIYUAN_OPENAI_API_PROXY：如果自己会挂代理，就可以配置成诸如 <code>socks5://127.0.0.1:10808</code>  的值</li>\n</ul>\n</div>\n<p>以上配置好后，应用容器即可开始愉快的玩耍啦～</p>\n<h2 id=\"体验\"><a class=\"anchor\" href=\"#体验\">#</a> 体验</h2>\n<h3 id=\"续写\"><a class=\"anchor\" href=\"#续写\">#</a> 续写</h3>\n<p class=\"gallery\" data-height=\"240\"><img data-src=\"https://image.aayu.today/uploads/2023/03/11/202303111623782.png\" alt=\"\" /><br />\n<img data-src=\"https://image.aayu.today/uploads/2023/03/11/202303111624662.png\" alt=\"\" /></p>\n<h3 id=\"翻译和提取摘要\"><a class=\"anchor\" href=\"#翻译和提取摘要\">#</a> 翻译和提取摘要</h3>\n<p class=\"gallery\" data-height=\"240\"><img data-src=\"https://image.aayu.today/uploads/2023/03/11/202303111632566.png\" alt=\"\" /><br />\n<img data-src=\"https://image.aayu.today/uploads/2023/03/11/202303111634737.png\" alt=\"\" /></p>\n<h3 id=\"头脑风暴\"><a class=\"anchor\" href=\"#头脑风暴\">#</a> 头脑风暴</h3>\n<p><img data-src=\"https://image.aayu.today/uploads/2023/03/11/202303111636897.png\" alt=\"\" /></p>\n<h3 id=\"修正语法和拼写\"><a class=\"anchor\" href=\"#修正语法和拼写\">#</a> 修正语法和拼写</h3>\n<p><img data-src=\"https://image.aayu.today/uploads/2023/03/11/202303111643940.png\" alt=\"\" /></p>\n<h3 id=\"自定义操作\"><a class=\"anchor\" href=\"#自定义操作\">#</a> 自定义操作</h3>\n<p class=\"gallery\" data-height=\"240\"><img data-src=\"https://image.aayu.today/uploads/2023/03/11/202303111644804.png\" alt=\"\" /><br />\n<img data-src=\"https://image.aayu.today/uploads/2023/03/11/202303111645273.png\" alt=\"\" /></p>\n<h2 id=\"总结\"><a class=\"anchor\" href=\"#总结\">#</a> 总结</h2>\n<p>未来可期～</p>\n",
            "tags": [
                "我的NAS捣鼓笔记",
                "极空间",
                "NAS",
                "极空间",
                "思源笔记"
            ]
        },
        {
            "id": "https://blog.aayu.today/artificial-intelligence/basic/20230208/",
            "url": "https://blog.aayu.today/artificial-intelligence/basic/20230208/",
            "title": "Win11基于WSL2安装CUDA、cuDNN和TensorRT",
            "date_published": "2023-02-28T13:22:51.000Z",
            "content_html": "<h2 id=\"2023-03-06-更新\"><a class=\"anchor\" href=\"#2023-03-06-更新\">#</a> 2023-03-06 更新</h2>\n<div class=\"note info\">\n<p>如果有小伙伴看了 2023-03-05 更新，发现设置环境变量后运行 cuda 代码在链接过程中仍然会有报错问题啥的，那我这里建议，先别管 2023-03-05 更新的内容了，还是按照我博客里的安装步骤一步一步往下安装，用 <code>sudo apt install nvidia-cuda-toolkit</code>  命令去安装 nvcc，也不需要配置环境变量了。因为博客里的安装步骤是我亲自执行过的，在我的 WSL2 环境里是一点问题都没有。</p>\n<p>如果跟着我的博客步骤走，发现在测试 <code>./mnistCUDNN</code>  时有问题，那就再根据我 2023-03-05 更新的内容尝试一下。不过这里我觉得可以先别卸载 <code>nvidia-cuda-toolkit</code> ，先去配置环境变量，然后跑代码看有没有问题，没有问题的话那就最好啦，如果还有问题，那就卸载 <code>nvidia-cuda-toolkit</code> ，配置好环境变量，再重启下，然后再跑下代码看看～</p>\n<p>目前根据小伙伴的反映，就先记录到这里吧，后面有新情况也会继续更新的～</p>\n</div>\n<h2 id=\"2023-03-05-更新\"><a class=\"anchor\" href=\"#2023-03-05-更新\">#</a> 2023-03-05 更新</h2>\n<div class=\"note info\">\n<p>有小伙伴反映，按照 NVIDIA 官网命令安装完 CUDA 后，nvcc 实际上也是被成功安装啦，且 nvcc 的版本和我们选择 CUDA 的版本是保持一致的。但如果再运行 <code>sudo apt install nvidia-cuda-toolkit</code>  命令，就会导致 nvcc 的版本被覆盖为低版本。</p>\n<p>比如，我们选择 CUDA 的版本是 11.8，那安装完 CUDA 后，我们是可以在 <code>/usr/local/cuda/bin</code>  目录下找到 nvcc 可执行文件的，在那个目录下运行 <code>./nvcc -V</code>  就可以看到版本和 CUDA 保持一致，也是 11.8。所以实际上我们 <code>不需要</code> 再运行 <code>sudo apt install nvidia-cuda-toolkit</code>  命令安装 nvcc 啦，只需要再安装完 CUDA 后，配置下环境变量即可，如下</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">CPATH</span><span class=\"token operator\">=</span>/usr/local/cuda-11.8/include:<span class=\"token variable\">$CPATH</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">LD_LIBRARY_PATH</span><span class=\"token operator\">=</span>/usr/local/cuda-11.8/lib64:<span class=\"token variable\">$LD_LIBRARY_PATH</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\"><span class=\"token environment constant\">PATH</span></span><span class=\"token operator\">=</span>/usr/local/cuda-11.8/bin:<span class=\"token environment constant\">$PATH</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">CUDA_ROOT</span><span class=\"token operator\">=</span>/usr/local/cuda-11.8</pre></td></tr></table></figure><p>当然，如果你运行了 <code>sudo apt install nvidia-cuda-toolkit</code>  命令，从我博客里记录的图片可以看到 nvcc 的版本被覆盖为 10.1 啦，在我的 WSL2 环境里，10.1 的 nvcc 版本并没有什么问题，后面用 <code>./mnistCUDNN</code>  测试也是成功哒～</p>\n<p>但小伙伴测试说会报 <code>CUDA driver version is insufficient for CUDA runtime version</code>  版本不匹配的错误，所以后面的小伙伴可以参考下，先不要运行 <code>sudo apt install nvidia-cuda-toolkit</code>  命令，直接根据 NVIDIA 官网安装完 CUDA，然后配置下环境变量即可～</p>\n<p>如果已经用 <code>sudo apt install nvidia-cuda-toolkit</code>  命令安装完了，测试也真报错了，就卸载掉 nvidia-cuda-toolkit，然后再配置下环境变量，再测试下看看吧～</p>\n</div>\n<h2 id=\"前言\"><a class=\"anchor\" href=\"#前言\">#</a> 前言</h2>\n<p>之前我写了一篇博客：<a href=\"https://blog.aayu.today/artificial-intelligence/basic/20221217/\">Win11 安装 WSL2 和 Nvidia 驱动</a>，记录了在 WSL2 里安装 CUDA，当时我选择了第二种安装方式，即用 WSL2 里的 MiniConda 去安装的 PyTorch 和 CUDA 等相关库，最近在使用中发现了这种方式的不足，即使用 <code>cuda</code>  和 <code>nvcc</code>  等命令时都要切换到 conda 相关环境下才能使用。比如我之前在 <code>py38</code>  环境下安装的，当我进入终端处于 <code>base</code>  环境下，nvcc 命令是不能使用哒</p>\n<p>最近也在跟着恩培老师学 TensorRT，担忧用 MiniConda 安装的 CUDA 等库可能导致 TensorRT 安装失败，所以这次就试试直接在 <code>base</code>  环境下用上一篇博客的第一种方式安装 <code>cuda</code> 、 <code>cudnn</code>  和 <code>tensorrt</code>  吧～</p>\n<p>结果也是很顺利的安装成功啦，便在此记录下来哈哈～</p>\n<h2 id=\"tensorrt介绍\"><a class=\"anchor\" href=\"#tensorrt介绍\">#</a> TensorRT 介绍</h2>\n<ul>\n<li>NVIDIA® TensorRT™是一个用于高性能深度学习的推理框架，能够在 NVIDIA GPU 上实现低延迟、高吞吐量的部署</li>\n<li>TensorRT 包含用于训练好的模型的优化器，以及用于执行推理的 runtime</li>\n<li>它可以与 TensorFlow、PyTorch 和 MXNet 等训练框架相辅相成地工作</li>\n</ul>\n<h2 id=\"环境配置\"><a class=\"anchor\" href=\"#环境配置\">#</a> 环境配置</h2>\n<h3 id=\"cuda-driver\"><a class=\"anchor\" href=\"#cuda-driver\">#</a> CUDA Driver</h3>\n<p>使用 CUDA 前，要求 GPU 驱动与 <code>cuda</code>  的版本要匹配，匹配关系如下：</p>\n<blockquote>\n<p>参考：<span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLm52aWRpYS5jb20vY3VkYS9jdWRhLXRvb2xraXQtcmVsZWFzZS1ub3Rlcy9pbmRleC5odG1sI2N1ZGEtbWFqb3ItY29tcG9uZW50LXZlcnNpb25zX190YWJsZS1jdWRhLXRvb2xraXQtZHJpdmVyLXZlcnNpb25z\">https://docs.nvidia.com/cuda/cuda-toolkit-release-notes/index.html#cuda-major-component-versions__table-cuda-toolkit-driver-versions</span></p>\n</blockquote>\n<p><img data-src=\"https://image.aayu.today/uploads/2023/03/01/202303012238954.png\" alt=\"\" width=\"800px\" /></p>\n<p>安装可以参考我之前的 WSL2 博客吖：<a href=\"https://blog.aayu.today/artificial-intelligence/basic/20221217/\">Win11 安装 WSL2 和 Nvidia 驱动</a></p>\n<h4 id=\"检查安装\"><a class=\"anchor\" href=\"#检查安装\">#</a> 检查安装</h4>\n<p>输入 <code>nvidia-smi</code>  命令，查看 GPU 驱动版本</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">(</span>base<span class=\"token punctuation\">)</span> aayu@AayuComputer-Pro:~$ nvidia-smi</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>Tue Feb <span class=\"token number\">28</span> 00:58:02 <span class=\"token number\">2023</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>+-----------------------------------------------------------------------------+</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token operator\">|</span> NVIDIA-SMI <span class=\"token number\">525.65</span>       Driver Version: <span class=\"token number\">527.56</span>       CUDA Version: <span class=\"token number\">12.0</span>     <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token operator\">|</span>-------------------------------+----------------------+----------------------+</pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token operator\">|</span> GPU  Name        Persistence-M<span class=\"token operator\">|</span> Bus-Id        Disp.A <span class=\"token operator\">|</span> Volatile Uncorr. ECC <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token operator\">|</span> Fan  Temp  Perf  Pwr:Usage/Cap<span class=\"token operator\">|</span>         Memory-Usage <span class=\"token operator\">|</span> GPU-Util  Compute M. <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token operator\">|</span>                               <span class=\"token operator\">|</span>                      <span class=\"token operator\">|</span>               MIG M. <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token operator\">|</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">=</span><span class=\"token operator\">+=</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">=</span><span class=\"token operator\">+=</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">=</span><span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token operator\">|</span>   <span class=\"token number\">0</span>  NVIDIA GeForce <span class=\"token punctuation\">..</span>.  On   <span class=\"token operator\">|</span> 00000000:01:00.0  On <span class=\"token operator\">|</span>                  N/A <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token operator\">|</span> N/A   40C    P8    13W / 139W <span class=\"token operator\">|</span>   1668MiB /  6144MiB <span class=\"token operator\">|</span>      <span class=\"token number\">6</span>%      Default <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token operator\">|</span>                               <span class=\"token operator\">|</span>                      <span class=\"token operator\">|</span>                  N/A <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>+-------------------------------+----------------------+----------------------+</pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>+-----------------------------------------------------------------------------+</pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token operator\">|</span> Processes:                                                                  <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token operator\">|</span>  GPU   GI   CI        PID   Type   Process name                  GPU Memory <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token operator\">|</span>        ID   ID                                                   Usage      <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token operator\">|</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">=</span><span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token operator\">|</span>    <span class=\"token number\">0</span>   N/A  N/A        <span class=\"token number\">23</span>      G   /Xwayland                       N/A      <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>+-----------------------------------------------------------------------------+</pre></td></tr></table></figure><p>可以看到当前安装的驱动版本是 <code>527.56</code> ，后面的 <code>CUDA Version: 12.0</code>  是指当前驱动支持的最高 CUDA 版本～</p>\n<h3 id=\"安装cuda\"><a class=\"anchor\" href=\"#安装cuda\">#</a> 安装 CUDA</h3>\n<p>在 Nvidia 官网选择对应版本：<span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXIubnZpZGlhLmNvbS9jdWRhLXRvb2xraXQtYXJjaGl2ZQ==\">https://developer.nvidia.com/cuda-toolkit-archive</span></p>\n<p><img data-src=\"https://image.aayu.today/uploads/2023/03/01/202303012249965.png\" alt=\"\" width=\"800px\" /></p>\n<p>比如我选择的是 <code>11.8</code>  版本，选择 <code>Linux</code> ， <code>x86_64</code> ， <code>WSL-Ubuntu</code> ， <code>2.0</code> ， <code>deb(local)</code> ，如下图</p>\n<p><img data-src=\"https://image.aayu.today/uploads/2023/03/01/202303012249980.png\" alt=\"\" width=\"800px\" /></p>\n<p>安装命令已经给出啦，如下，直接在 WSL2 终端执行就好～</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">wget</span> https://developer.download.nvidia.com/compute/cuda/repos/wsl-ubuntu/x86_64/cuda-wsl-ubuntu.pin</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">mv</span> cuda-wsl-ubuntu.pin /etc/apt/preferences.d/cuda-repository-pin-600</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token function\">wget</span> https://developer.download.nvidia.com/compute/cuda/11.8.0/local_installers/cuda-repo-wsl-ubuntu-11-8-local_11.8.0-1_amd64.deb</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token function\">sudo</span> dpkg -i cuda-repo-wsl-ubuntu-11-8-local_11.8.0-1_amd64.deb</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">cp</span> /var/cuda-repo-wsl-ubuntu-11-8-local/cuda-*-keyring.gpg /usr/share/keyrings/</pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> update</pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> -y <span class=\"token function\">install</span> cuda</pre></td></tr></table></figure><p>成功安装如下图</p>\n<p><img data-src=\"https://image.aayu.today/uploads/2023/03/01/202303012250963.png\" alt=\"\" width=\"800px\" /></p>\n<h3 id=\"安装nvcc\"><a class=\"anchor\" href=\"#安装nvcc\">#</a> 安装 nvcc</h3>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> nvidia-cuda-toolkit</pre></td></tr></table></figure><p>安装完后重启电脑，检查安装结果，成功如下图～</p>\n<p><img data-src=\"https://image.aayu.today/uploads/2023/03/01/202303012251060.png\" alt=\"\" /></p>\n<h3 id=\"安装cudnn\"><a class=\"anchor\" href=\"#安装cudnn\">#</a> 安装 cuDNN</h3>\n<p>下载安装包：访问：<span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXIubnZpZGlhLmNvbS96aC1jbi9jdWRubiVFRiVCQyU4QyVFOSU4MCU4OSVFNiU4QiVBOSVFNSVBRiVCOSVFNSVCQSU5NCVFNyU5QSU4NCVFNyU4OSU4OCVFNiU5QyVBQyVFRiVCQyU4QyVFNCVCOCU4QiVFOCVCRCVCRCVFNSVBRiVCOSVFNSVCQSU5NCVFNyU5QSU4NCVFNSVBRSU4OSVFOCVBMyU4NSVFNSU4QyU4NSVFRiVCQyU4OCVFNSVCQiVCQSVFOCVBRSVBRSVFNCVCRCVCRiVFNyU5NCVBOERlYmlhbiVFNSU4QyU4NSVFNSVBRSU4OSVFOCVBMyU4NSVFRiVCQyU4OQ==\">https://developer.nvidia.com/zh-cn/cudnn，选择对应的版本，下载对应的安装包（建议使用 Debian 包安装）</span></p>\n<p><img data-src=\"https://image.aayu.today/uploads/2023/03/01/202303012252029.png\" alt=\"\" /></p>\n<p>比如我下载的是：<span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXIubnZpZGlhLmNvbS9kb3dubG9hZHMvYzExOC1jdWRubi1sb2NhbC1yZXBvLXVidW50dTIwMDQtODcwODQxMC0xYW1kNjRkZWI=\">Local Installer for Ubuntu20.04 x86_64 (Deb)</span>，下载后的文件名为 <code>cudnn-local-repo-ubuntu2004-8.7.0.84_1.0-1_amd64.deb</code></p>\n<h4 id=\"安装\"><a class=\"anchor\" href=\"#安装\">#</a> 安装</h4>\n<blockquote>\n<p>参考链接：<span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLm52aWRpYS5jb20vZGVlcGxlYXJuaW5nL2N1ZG5uL2luc3RhbGwtZ3VpZGUvaW5kZXguaHRtbA==\">https://docs.nvidia.com/deeplearning/cudnn/install-guide/index.html</span></p>\n</blockquote>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># 注意，运行下面的命令前，将下面的 X.Y 和 v8.x.x.x 替换成自己具体的 CUDA 和 cuDNN 版本，如我的 CUDA 版本是 11.8，cuDNN 版本是 8.7.0.84</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># Enable the local repository.</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token function\">sudo</span> dpkg -i cudnn-local-repo-<span class=\"token variable\">$&#123;OS&#125;</span>-8.x.x.x_1.0-1_amd64.deb</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\"># 我的：sudo dpkg -i cudnn-local-repo-ubuntu2004-8.7.0.84_1.0-1_amd64.deb</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\"># Import the CUDA GPG key.</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">cp</span> /var/cudnn-local-repo-*/cudnn-local-*-keyring.gpg /usr/share/keyrings/</pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\"># Refresh the repository metadata.</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> update</pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token comment\"># Install the runtime library.</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> <span class=\"token assign-left variable\">libcudnn8</span><span class=\"token operator\">=</span><span class=\"token number\">8</span>.x.x.x-1+cudaX.Y</pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token comment\"># 我的：sudo apt-get install libcudnn8=8.7.0.84-1+cuda11.8</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token comment\"># Install the developer library.</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> libcudnn8-dev<span class=\"token operator\">=</span><span class=\"token number\">8</span>.x.x.x-1+cudaX.Y</pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token comment\"># 我的：sudo apt-get install libcudnn8-dev=8.7.0.84-1+cuda11.8</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token comment\"># Install the code samples and the cuDNN library documentation.</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> libcudnn8-samples<span class=\"token operator\">=</span><span class=\"token number\">8</span>.x.x.x-1+cudaX.Y</pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token comment\"># 我的：sudo apt-get install libcudnn8-samples=8.7.0.84-1+cuda11.8</span></pre></td></tr></table></figure><h4 id=\"验证\"><a class=\"anchor\" href=\"#验证\">#</a> 验证</h4>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># 复制文件</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">cp</span> -r /usr/src/cudnn_samples_v8/ <span class=\"token environment constant\">$HOME</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token builtin class-name\">cd</span>  <span class=\"token environment constant\">$HOME</span>/cudnn_samples_v8/mnistCUDNN</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token function\">make</span> clean <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">make</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>./mnistCUDNN</pre></td></tr></table></figure><blockquote>\n<p>可能报错：test.c:1:10: fatal error: FreeImage.h: No such file or directory</p>\n<p>解决办法：sudo apt-get install libfreeimage3 libfreeimage-dev</p>\n</blockquote>\n<p>成功验证如下图</p>\n<p><img data-src=\"https://image.aayu.today/uploads/2023/03/01/202303012253057.png\" alt=\"\" /></p>\n<h3 id=\"安装tensorrt\"><a class=\"anchor\" href=\"#安装tensorrt\">#</a> 安装 TensorRT</h3>\n<p>访问：<span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXIubnZpZGlhLmNvbS9udmlkaWEtdGVuc29ycnQtOHgtZG93bmxvYWQ=\">https://developer.nvidia.com/nvidia-tensorrt-8x-download</span> 下载对应版本的 TensorRT</p>\n<p><img data-src=\"https://image.aayu.today/uploads/2023/03/01/202303012254209.png\" alt=\"\" /></p>\n<p>比如我选择的是 8.5.3 版本，下载完文件名为： <code>nv-tensorrt-local-repo-ubuntu2004-8.5.3-cuda-11.8_1.0-1_amd64.deb</code></p>\n<h4 id=\"安装-2\"><a class=\"anchor\" href=\"#安装-2\">#</a> 安装</h4>\n<blockquote>\n<p>参考地址：<span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLm52aWRpYS5jb20vZGVlcGxlYXJuaW5nL3RlbnNvcnJ0L2luc3RhbGwtZ3VpZGUvaW5kZXguaHRtbCNpbnN0YWxsaW5nLWRlYmlhbg==\">https://docs.nvidia.com/deeplearning/tensorrt/install-guide/index.html#installing-debian</span></p>\n</blockquote>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># 替换成自己的 OS 和版本信息</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token assign-left variable\">os</span><span class=\"token operator\">=</span><span class=\"token string\">\"ubuntuxx04\"</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token assign-left variable\">tag</span><span class=\"token operator\">=</span><span class=\"token string\">\"8.x.x-cuda-x.x\"</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token function\">sudo</span> dpkg -i nv-tensorrt-local-repo-<span class=\"token variable\">$&#123;os&#125;</span>-<span class=\"token variable\">$&#123;tag&#125;</span>_1.0-1_amd64.deb</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\"># 我的：sudo dpkg -i nv-tensorrt-local-repo-ubuntu2004-8.5.3-cuda-11.8_1.0-1_amd64.deb</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">cp</span> /var/nv-tensorrt-local-repo-<span class=\"token variable\">$&#123;os&#125;</span>-<span class=\"token variable\">$&#123;tag&#125;</span>/*-keyring.gpg /usr/share/keyrings/</pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\"># 我的：sudo cp /var/nv-tensorrt-local-repo-ubuntu2004-8.5.3-cuda-11.8/*-keyring.gpg/usr/share/keyrings/</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> update</pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> tensorrt</pre></td></tr></table></figure><h4 id=\"验证-2\"><a class=\"anchor\" href=\"#验证-2\">#</a> 验证</h4>\n<p>输入 <code>dpkg -l | grep TensorRT</code></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">(</span>base<span class=\"token punctuation\">)</span> aayu@HPSCIL:~/tensorrt_install$ dpkg -l <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> TensorRT</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>ii  libnvinfer-bin                                    <span class=\"token number\">8.5</span>.3-1+cuda11.8                  amd64        TensorRT binaries</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>ii  libnvinfer-dev                                    <span class=\"token number\">8.5</span>.3-1+cuda11.8                  amd64        TensorRT development libraries and headers</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>ii  libnvinfer-plugin-dev                             <span class=\"token number\">8.5</span>.3-1+cuda11.8                  amd64        TensorRT plugin libraries</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>ii  libnvinfer-plugin8                                <span class=\"token number\">8.5</span>.3-1+cuda11.8                  amd64        TensorRT plugin libraries</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>ii  libnvinfer-samples                                <span class=\"token number\">8.5</span>.3-1+cuda11.8                  all          TensorRT samples</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>ii  libnvinfer8                                       <span class=\"token number\">8.5</span>.3-1+cuda11.8                  amd64        TensorRT runtime libraries</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>ii  libnvonnxparsers-dev                              <span class=\"token number\">8.5</span>.3-1+cuda11.8                  amd64        TensorRT ONNX libraries</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>ii  libnvonnxparsers8                                 <span class=\"token number\">8.5</span>.3-1+cuda11.8                  amd64        TensorRT ONNX libraries</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>ii  libnvparsers-dev                                  <span class=\"token number\">8.5</span>.3-1+cuda11.8                  amd64        TensorRT parsers libraries</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>ii  libnvparsers8                                     <span class=\"token number\">8.5</span>.3-1+cuda11.8                  amd64        TensorRT parsers libraries</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>ii  tensorrt                                          <span class=\"token number\">8.5</span>.3.1-1+cuda11.8                amd64        Meta package <span class=\"token keyword\">for</span> TensorRT</pre></td></tr></table></figure><blockquote>\n<p>如果遇到 <code>unmet dependencies</code>  的问题，一般是 cuda cudnn 没有安装好。TensorRT 的 <code>INCLUDE</code>  路径是  <code>/usr/include/x86_64-linux-gnu/</code> ,  <code>LIB</code>  路径是 <code>/usr/lib/x86_64-linux-gnu/</code> ,Sample code 在 <code>/usr/src/tensorrt/samples</code> ,  <code>trtexec</code>  在 <code>/usr/src/tensorrt/bin</code>  下。</p>\n</blockquote>\n<p><img data-src=\"https://image.aayu.today/uploads/2023/03/01/202303012254945.png\" alt=\"\" /></p>\n",
            "tags": [
                "人工智能",
                "基础知识",
                "win11",
                "wsl",
                "nvidia",
                "cuda",
                "cudnn",
                "tensorrt"
            ]
        },
        {
            "id": "https://blog.aayu.today/artificial-intelligence/basic/20230207/",
            "url": "https://blog.aayu.today/artificial-intelligence/basic/20230207/",
            "title": "WSL2通过OpenCV调用并展示本机摄像头的RTSP视频流",
            "date_published": "2023-02-27T13:22:51.000Z",
            "content_html": "<h2 id=\"前言\"><a class=\"anchor\" href=\"#前言\">#</a> 前言</h2>\n<p><img data-src=\"https://image.aayu.today/uploads/2023/03/01/202303012127332.png\" alt=\"\" /></p>\n<p>本篇博客的由来如上图哈哈，WSL2 相关安装教程可以参考我之前的博客：<a href=\"https://blog.aayu.today/artificial-intelligence/basic/20221217/\">Win11 安装 WSL2 和 Nvidia 驱动</a></p>\n<h2 id=\"安装-cmake\"><a class=\"anchor\" href=\"#安装-cmake\">#</a> 安装 CMake</h2>\n<p>ubuntu 上请执行</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> cmake -y</pre></td></tr></table></figure><p>或者编译安装</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># 以 v3.25.1 版本为例</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">git</span> clone -b v3.25.1 https://github.com/Kitware/CMake.git </pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token builtin class-name\">cd</span> CMake</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># 你使用 `--prefix` 来指定安装路径，或者去掉 `--prefix`, 安装在默认路径。</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>./bootstrap --prefix<span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>安装路径<span class=\"token operator\">></span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">make</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">sudo</span> <span class=\"token function\">make</span> <span class=\"token function\">install</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\"># 验证</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>cmake --version</pre></td></tr></table></figure><p>如果报错 <code>Could NOT find OpenSSL</code> ，安装如下依赖即可解决</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> update</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> upgrade</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> libssl-dev</pre></td></tr></table></figure><h2 id=\"安装-opencv-和-ffmpeg\"><a class=\"anchor\" href=\"#安装-opencv-和-ffmpeg\">#</a> 安装 OpenCV 和 FFmpeg</h2>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> libopencv-dev</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> ffmpeg</pre></td></tr></table></figure><h2 id=\"启动-windows-本机的-rtsp-视频流\"><a class=\"anchor\" href=\"#启动-windows-本机的-rtsp-视频流\">#</a> 启动 Windows 本机的 RTSP 视频流</h2>\n<h3 id=\"查看本机摄像头设备\"><a class=\"anchor\" href=\"#查看本机摄像头设备\">#</a> 查看本机摄像头设备</h3>\n<p>Windows 本机安装 ffmpeg 这里不再赘述啦，网上教程很多～</p>\n<p>查看本机摄像头设备命令如下</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>ffmpeg -list_devices <span class=\"token boolean\">true</span> -f dshow -i dummy</pre></td></tr></table></figure><p><img data-src=\"https://image.aayu.today/uploads/2023/03/01/202303012138041.png\" alt=\"\" width=\"800px\" /></p>\n<h3 id=\"开始推流\"><a class=\"anchor\" href=\"#开始推流\">#</a> 开始推流</h3>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>ffmpeg -f dshow -i <span class=\"token assign-left variable\">video</span><span class=\"token operator\">=</span><span class=\"token string\">\"USB2.0 Camera\"</span> -vcodec libx264 -preset:v ultrafast -tune:v zerolatency -rtsp_transport tcp -f rtsp rtsp://172.27.148.34/test</pre></td></tr></table></figure><p>参数解释</p>\n<ul>\n<li><code>-f dshow -i video=&quot;摄像头名称&quot;</code>  指定从本地摄像头中读取视频流。将 “摄像头名称” 替换为您的摄像头名称，例如 “USB2.0 Camera”。</li>\n<li><code>-vcodec libx264</code>  指定使用 x264 编码器进行视频编码。</li>\n<li><code>-preset ultrafast</code>  设置编码速度。这里使用的是最快的编码速度，但可能会导致视频质量下降。</li>\n<li><code>-tune zerolatency</code>  设置编码器以实现零延迟。</li>\n<li><code>-f rtsp</code>  指定输出流的格式为 RTSP。</li>\n<li><code>rtsp://&lt;IP地址&gt;/&lt;路径&gt;</code>  指定 RTSP 流的目标地址。请将  <code>&lt;IP地址&gt;</code>  替换为 Windows 本机 IP 地址，将  <code>&lt;路径&gt;</code>  替换为您想要为流指定的路径。</li>\n</ul>\n<p>成功推流如下，注意保持控制台的运行</p>\n<p><img data-src=\"https://image.aayu.today/uploads/2023/03/01/202303012139056.png\" alt=\"\" width=\"800px\" /></p>\n<h2 id=\"开放本机防火墙\"><a class=\"anchor\" href=\"#开放本机防火墙\">#</a> 开放本机防火墙</h2>\n<p>因为我们要在 WSL2 里访问本机的 RTSP 视频流，所以需要打开本机的防火墙，如下图</p>\n<p><img data-src=\"https://image.aayu.today/uploads/2023/03/01/202303012140033.png\" alt=\"\" width=\"800px\" /></p>\n<p>关闭专用网络和公用网络即可</p>\n<h2 id=\"用-opencv-接收视频流\"><a class=\"anchor\" href=\"#用-opencv-接收视频流\">#</a> 用 OpenCV 接收视频流</h2>\n<p>代码如下</p>\n<figure class=\"highlight cpp\"><figcaption data-lang=\"C++\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;opencv2/opencv.hpp></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;iostream></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;string></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> argc<span class=\"token punctuation\">,</span> <span class=\"token keyword\">char</span> <span class=\"token operator\">*</span><span class=\"token operator\">*</span>argv<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token comment\">// Ubuntu 安装 ffmpeg：sudo apt-get install ffmpeg</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token comment\">//rtsp 地址，模拟四路视频流进行展示</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    std<span class=\"token double-colon punctuation\">::</span>string rtsp1 <span class=\"token operator\">=</span> <span class=\"token string\">\"rtsp://172.27.148.34/test\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    std<span class=\"token double-colon punctuation\">::</span>string rtsp2 <span class=\"token operator\">=</span> rtsp1<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    std<span class=\"token double-colon punctuation\">::</span>string rtsp3 <span class=\"token operator\">=</span> rtsp1<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    std<span class=\"token double-colon punctuation\">::</span>string rtsp4 <span class=\"token operator\">=</span> rtsp1<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token comment\">// CAP_FFMPEG：使用 ffmpeg 解码</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    cv<span class=\"token double-colon punctuation\">::</span>VideoCapture stream1 <span class=\"token operator\">=</span> cv<span class=\"token double-colon punctuation\">::</span><span class=\"token function\">VideoCapture</span><span class=\"token punctuation\">(</span>rtsp1<span class=\"token punctuation\">,</span> cv<span class=\"token double-colon punctuation\">::</span>CAP_FFMPEG<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    cv<span class=\"token double-colon punctuation\">::</span>VideoCapture stream2 <span class=\"token operator\">=</span> cv<span class=\"token double-colon punctuation\">::</span><span class=\"token function\">VideoCapture</span><span class=\"token punctuation\">(</span>rtsp2<span class=\"token punctuation\">,</span> cv<span class=\"token double-colon punctuation\">::</span>CAP_FFMPEG<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    cv<span class=\"token double-colon punctuation\">::</span>VideoCapture stream3 <span class=\"token operator\">=</span> cv<span class=\"token double-colon punctuation\">::</span><span class=\"token function\">VideoCapture</span><span class=\"token punctuation\">(</span>rtsp3<span class=\"token punctuation\">,</span> cv<span class=\"token double-colon punctuation\">::</span>CAP_FFMPEG<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    cv<span class=\"token double-colon punctuation\">::</span>VideoCapture stream4 <span class=\"token operator\">=</span> cv<span class=\"token double-colon punctuation\">::</span><span class=\"token function\">VideoCapture</span><span class=\"token punctuation\">(</span>rtsp4<span class=\"token punctuation\">,</span> cv<span class=\"token double-colon punctuation\">::</span>CAP_FFMPEG<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>stream1<span class=\"token punctuation\">.</span><span class=\"token function\">isOpened</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token operator\">!</span>stream2<span class=\"token punctuation\">.</span><span class=\"token function\">isOpened</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token operator\">!</span>stream3<span class=\"token punctuation\">.</span><span class=\"token function\">isOpened</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token operator\">!</span>stream4<span class=\"token punctuation\">.</span><span class=\"token function\">isOpened</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        std<span class=\"token double-colon punctuation\">::</span>cout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"有视频流未打开\"</span> <span class=\"token operator\">&lt;&lt;</span> std<span class=\"token double-colon punctuation\">::</span>endl<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    cv<span class=\"token double-colon punctuation\">::</span>Mat frame1<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    cv<span class=\"token double-colon punctuation\">::</span>Mat frame2<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    cv<span class=\"token double-colon punctuation\">::</span>Mat frame3<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    cv<span class=\"token double-colon punctuation\">::</span>Mat frame4<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>    cv<span class=\"token double-colon punctuation\">::</span>Mat H1<span class=\"token punctuation\">,</span> H2<span class=\"token punctuation\">,</span> V<span class=\"token punctuation\">,</span> blur<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>    <span class=\"token comment\">// 使用 namedWindow 创建窗口，WINDOW_AUTOSIZE：自动调整窗口大小</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    cv<span class=\"token double-colon punctuation\">::</span><span class=\"token function\">namedWindow</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"rtsp_demo\"</span><span class=\"token punctuation\">,</span> cv<span class=\"token double-colon punctuation\">::</span>WINDOW_AUTOSIZE<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>    <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>stream1<span class=\"token punctuation\">.</span><span class=\"token function\">read</span><span class=\"token punctuation\">(</span>frame1<span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token operator\">!</span>stream2<span class=\"token punctuation\">.</span><span class=\"token function\">read</span><span class=\"token punctuation\">(</span>frame2<span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token operator\">!</span>stream3<span class=\"token punctuation\">.</span><span class=\"token function\">read</span><span class=\"token punctuation\">(</span>frame3<span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token operator\">!</span>stream4<span class=\"token punctuation\">.</span><span class=\"token function\">read</span><span class=\"token punctuation\">(</span>frame4<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>            std<span class=\"token double-colon punctuation\">::</span>cout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"有视频流未读取\"</span> <span class=\"token operator\">&lt;&lt;</span> std<span class=\"token double-colon punctuation\">::</span>endl<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>            <span class=\"token keyword\">continue</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>        <span class=\"token comment\">// 缩放等处理</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>        cv<span class=\"token double-colon punctuation\">::</span><span class=\"token function\">resize</span><span class=\"token punctuation\">(</span>frame1<span class=\"token punctuation\">,</span> frame1<span class=\"token punctuation\">,</span> cv<span class=\"token double-colon punctuation\">::</span><span class=\"token function\">Size</span><span class=\"token punctuation\">(</span><span class=\"token number\">500</span><span class=\"token punctuation\">,</span> <span class=\"token number\">300</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>        cv<span class=\"token double-colon punctuation\">::</span><span class=\"token function\">resize</span><span class=\"token punctuation\">(</span>frame2<span class=\"token punctuation\">,</span> frame2<span class=\"token punctuation\">,</span> cv<span class=\"token double-colon punctuation\">::</span><span class=\"token function\">Size</span><span class=\"token punctuation\">(</span><span class=\"token number\">500</span><span class=\"token punctuation\">,</span> <span class=\"token number\">300</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>        cv<span class=\"token double-colon punctuation\">::</span><span class=\"token function\">flip</span><span class=\"token punctuation\">(</span>frame2<span class=\"token punctuation\">,</span> frame2<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>        cv<span class=\"token double-colon punctuation\">::</span><span class=\"token function\">resize</span><span class=\"token punctuation\">(</span>frame3<span class=\"token punctuation\">,</span> frame3<span class=\"token punctuation\">,</span> cv<span class=\"token double-colon punctuation\">::</span><span class=\"token function\">Size</span><span class=\"token punctuation\">(</span><span class=\"token number\">500</span><span class=\"token punctuation\">,</span> <span class=\"token number\">300</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>        cv<span class=\"token double-colon punctuation\">::</span><span class=\"token function\">cvtColor</span><span class=\"token punctuation\">(</span>frame1<span class=\"token punctuation\">,</span> frame1<span class=\"token punctuation\">,</span> cv<span class=\"token double-colon punctuation\">::</span>COLOR_BGR2GRAY<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>        cv<span class=\"token double-colon punctuation\">::</span><span class=\"token function\">cvtColor</span><span class=\"token punctuation\">(</span>frame1<span class=\"token punctuation\">,</span> frame1<span class=\"token punctuation\">,</span> cv<span class=\"token double-colon punctuation\">::</span>COLOR_GRAY2BGR<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>        cv<span class=\"token double-colon punctuation\">::</span><span class=\"token function\">resize</span><span class=\"token punctuation\">(</span>frame4<span class=\"token punctuation\">,</span> frame4<span class=\"token punctuation\">,</span> cv<span class=\"token double-colon punctuation\">::</span><span class=\"token function\">Size</span><span class=\"token punctuation\">(</span><span class=\"token number\">500</span><span class=\"token punctuation\">,</span> <span class=\"token number\">300</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>        cv<span class=\"token double-colon punctuation\">::</span><span class=\"token function\">putText</span><span class=\"token punctuation\">(</span>frame4<span class=\"token punctuation\">,</span> <span class=\"token string\">\"RTSP demo\"</span><span class=\"token punctuation\">,</span> cv<span class=\"token double-colon punctuation\">::</span><span class=\"token function\">Point</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> cv<span class=\"token double-colon punctuation\">::</span>FONT_ITALIC<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> cv<span class=\"token double-colon punctuation\">::</span><span class=\"token function\">Scalar</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">255</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre>        <span class=\"token comment\">// 拼接</span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>        cv<span class=\"token double-colon punctuation\">::</span><span class=\"token function\">hconcat</span><span class=\"token punctuation\">(</span>frame1<span class=\"token punctuation\">,</span> frame2<span class=\"token punctuation\">,</span> H1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre>        cv<span class=\"token double-colon punctuation\">::</span><span class=\"token function\">hconcat</span><span class=\"token punctuation\">(</span>frame3<span class=\"token punctuation\">,</span> frame4<span class=\"token punctuation\">,</span> H2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre>        cv<span class=\"token double-colon punctuation\">::</span><span class=\"token function\">vconcat</span><span class=\"token punctuation\">(</span>H1<span class=\"token punctuation\">,</span> H2<span class=\"token punctuation\">,</span> V<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre></pre></td></tr><tr><td data-num=\"60\"></td><td><pre>        <span class=\"token comment\">// 高斯模糊一下</span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre>        cv<span class=\"token double-colon punctuation\">::</span><span class=\"token function\">GaussianBlur</span><span class=\"token punctuation\">(</span>V<span class=\"token punctuation\">,</span> blur<span class=\"token punctuation\">,</span> cv<span class=\"token double-colon punctuation\">::</span><span class=\"token function\">Size</span><span class=\"token punctuation\">(</span><span class=\"token number\">25</span><span class=\"token punctuation\">,</span> <span class=\"token number\">25</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre></pre></td></tr><tr><td data-num=\"63\"></td><td><pre>        cv<span class=\"token double-colon punctuation\">::</span><span class=\"token function\">imshow</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"rtsp_demo\"</span><span class=\"token punctuation\">,</span> blur<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"64\"></td><td><pre></pre></td></tr><tr><td data-num=\"65\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>cv<span class=\"token double-colon punctuation\">::</span><span class=\"token function\">waitKey</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token number\">27</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"66\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"67\"></td><td><pre>            <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"68\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"69\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"70\"></td><td><pre></pre></td></tr><tr><td data-num=\"71\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"72\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>CMakeLists.txt 内容如下</p>\n<figure class=\"highlight cmake\"><figcaption data-lang=\"CMake\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># 最低版本要求</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">cmake_minimum_required</span><span class=\"token punctuation\">(</span><span class=\"token property\">VERSION</span> <span class=\"token number\">3.10</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># 项目信息</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">project</span><span class=\"token punctuation\">(</span>rtsp_demo<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\"># 添加 opencv 库</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">find_package</span><span class=\"token punctuation\">(</span>OpenCV REQUIRED<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\"># 添加头文件</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">include_directories</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">$&#123;</span>OpenCV_INCLUDE_DIRS<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token comment\"># 添加库文件</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">link_libraries</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">$&#123;</span>OpenCV_LIBS<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token comment\"># 添加可执行程序</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token keyword\">add_executable</span><span class=\"token punctuation\">(</span>rtsp_demo src/main.cpp<span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>启动 cmake 配置并构建</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>cmake -S <span class=\"token builtin class-name\">.</span> -B build </pre></td></tr><tr><td data-num=\"2\"></td><td><pre>cmake --build build</pre></td></tr></table></figure><p>运行可执行程序</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>./build/rtsp_demo</pre></td></tr></table></figure><h2 id=\"结果展示\"><a class=\"anchor\" href=\"#结果展示\">#</a> 结果展示</h2>\n<p>成功用 WSL2 展示出四路 RTSP 视频流～</p>\n<p><img data-src=\"https://image.aayu.today/uploads/2023/03/01/202303012141053.png\" alt=\"\" width=\"800px\" /></p>\n",
            "tags": [
                "人工智能",
                "基础知识",
                "win11",
                "wsl",
                "nvidia"
            ]
        },
        {
            "id": "https://blog.aayu.today/nas/zspace/20230224/",
            "url": "https://blog.aayu.today/nas/zspace/20230224/",
            "title": "自助编译极空间Z4思源笔记（siyuan）Docker项目",
            "date_published": "2023-02-23T18:55:49.000Z",
            "content_html": "<h2 id=\"前言\"><a class=\"anchor\" href=\"#前言\">#</a> 前言</h2>\n<p>最近入了思源笔记的坑，想好好的捣鼓捣鼓。去年在自己的极空间 NAS 上部署了思源笔记的 Docker 版，但版本已经跟不上了（D 大和 V 姐的更新太频繁了🤣），借助极空间论坛里大佬的帮助，我们自己也可以编译适配极空间 Z4 的最新版思源笔记 Docker 镜像了，于是在此记录下编译的过程～</p>\n<h2 id=\"编译环境\"><a class=\"anchor\" href=\"#编译环境\">#</a> 编译环境</h2>\n<ul>\n<li>Ubuntu：Ubuntu 20.04.4 LTS x86_64</li>\n<li>Docker</li>\n<li>Git</li>\n</ul>\n<h2 id=\"步骤\"><a class=\"anchor\" href=\"#步骤\">#</a> 步骤</h2>\n<h3 id=\"拉取思源笔记最新源码\"><a class=\"anchor\" href=\"#拉取思源笔记最新源码\">#</a> 拉取思源笔记最新源码</h3>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">git</span> clone https://github.com/siyuan-note/siyuan.git</pre></td></tr></table></figure><h3 id=\"拉取大佬的zsource仓库\"><a class=\"anchor\" href=\"#拉取大佬的zsource仓库\">#</a> 拉取大佬的 zsource 仓库</h3>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">git</span> clone https://github.com/zs0urce/zsource.git</pre></td></tr></table></figure><p>浏览了下大佬的 <code>Dockerfile.z4</code>  文件，发现大佬主要是将 <code>addgroup --gid 1000 siyuan &amp;&amp; adduser --uid 1000 --ingroup siyuan --disabled-password siyuan</code>  这个创建普通用户的命令去掉了，然后将 <code>USER siyuan</code>  这个指定用户的命令也去掉了，这样就可以使用 root 用户了，从而解决极空间 Z4 上的权限问题了</p>\n<h3 id=\"拷贝\"><a class=\"anchor\" href=\"#拷贝\">#</a> 拷贝</h3>\n<p>拷贝大佬项目中 siyuan 目录下的所有文件到思源笔记仓库代码目录中</p>\n<div class=\"note info\">\n<p>国内的网络环境真的是太恶劣了，为了解决环境问题，深夜踩坑了一晚上，在更改了下 <code>Dockerfile.z4</code>  文件后，终于解决了，欣慰啊<br />\n文件中需要更改的地方我都已经高亮标出了～</p>\n</div>\n<figure class=\"highlight dockerfile\"><figcaption data-lang=\"Docker\"><span>Dockerfile.z4</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token instruction\"><span class=\"token keyword\">FROM</span> node:16 <span class=\"token keyword\">as</span> NODE_BUILD</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token instruction\"><span class=\"token keyword\">WORKDIR</span> /go/src/github.com/siyuan-note/siyuan/</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token instruction\"><span class=\"token keyword\">ADD</span> . /go/src/github.com/siyuan-note/siyuan/</span></pre></td></tr><tr class=\"marked\"><td data-num=\"4\"></td><td><pre><span class=\"token instruction\"><span class=\"token keyword\">RUN</span> cd app &amp;&amp; npm install -g pnpm &amp;&amp; ELECTRON_MIRROR=https://cnpmjs.org/mirrors/electron/ pnpm install electron@21.4.2 -D &amp;&amp; pnpm install &amp;&amp; pnpm run build</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token instruction\"><span class=\"token keyword\">FROM</span> golang:1.19-alpine <span class=\"token keyword\">as</span> GO_BUILD</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token instruction\"><span class=\"token keyword\">WORKDIR</span> /go/src/github.com/siyuan-note/siyuan/</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token instruction\"><span class=\"token keyword\">COPY</span> <span class=\"token options\"><span class=\"token property\">--from</span><span class=\"token punctuation\">=</span><span class=\"token string\">NODE_BUILD</span></span> /go/src/github.com/siyuan-note/siyuan/ /go/src/github.com/siyuan-note/siyuan/</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token instruction\"><span class=\"token keyword\">ENV</span> GO111MODULE=on</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token instruction\"><span class=\"token keyword\">ENV</span> CGO_ENABLED=1</span></pre></td></tr><tr class=\"marked\"><td data-num=\"11\"></td><td><pre><span class=\"token instruction\"><span class=\"token keyword\">ENV</span> GOPROXY=https://goproxy.cn,direct</span></pre></td></tr><tr class=\"marked\"><td data-num=\"12\"></td><td><pre><span class=\"token instruction\"><span class=\"token keyword\">RUN</span> apk add --no-cache gcc musl-dev git &amp;&amp; <span class=\"token operator\">\\</span></pre></td></tr><tr class=\"marked\"><td data-num=\"13\"></td><td><pre>    git config --global http.https://github.com.proxy socks5://192.168.1.101:10808 &amp;&amp; git config --global https.https://github.com.proxy socks5://192.168.1.101:10808 &amp;&amp; <span class=\"token operator\">\\</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    cd kernel &amp;&amp; go build --tags fts5 -v -ldflags <span class=\"token string\">\"-s -w -X github.com/siyuan-note/siyuan/kernel/util.Mode=prod\"</span> &amp;&amp; <span class=\"token operator\">\\</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    mkdir /opt/siyuan/ &amp;&amp; <span class=\"token operator\">\\</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    mv /go/src/github.com/siyuan-note/siyuan/app/appearance/ /opt/siyuan/ &amp;&amp; <span class=\"token operator\">\\</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    mv /go/src/github.com/siyuan-note/siyuan/app/stage/ /opt/siyuan/ &amp;&amp; <span class=\"token operator\">\\</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    mv /go/src/github.com/siyuan-note/siyuan/app/guide/ /opt/siyuan/ &amp;&amp; <span class=\"token operator\">\\</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    mv /go/src/github.com/siyuan-note/siyuan/kernel/kernel /opt/siyuan/ &amp;&amp; <span class=\"token operator\">\\</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    find /opt/siyuan/ -name .git | xargs rm -rf</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token instruction\"><span class=\"token keyword\">FROM</span> ghcr.io/linuxserver/baseimage-alpine:3.16</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token instruction\"><span class=\"token keyword\">LABEL</span> maintainer=<span class=\"token string\">\"wangyu&lt;wangyu0814@foxmail.com>\"</span></span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token instruction\"><span class=\"token keyword\">WORKDIR</span> /opt/siyuan/</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token instruction\"><span class=\"token keyword\">COPY</span> <span class=\"token options\"><span class=\"token property\">--from</span><span class=\"token punctuation\">=</span><span class=\"token string\">GO_BUILD</span></span> /opt/siyuan/ /opt/siyuan/</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token instruction\"><span class=\"token keyword\">RUN</span> <span class=\"token operator\">\\</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>  apk add --no-cache <span class=\"token operator\">\\</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    ca-certificates <span class=\"token operator\">\\</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>    tzdata &amp;&amp; <span class=\"token operator\">\\</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>  echo <span class=\"token string\">\"**** cleanup ****\"</span> &amp;&amp; <span class=\"token operator\">\\</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>  rm -rf <span class=\"token operator\">\\</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>      /root/.cache <span class=\"token operator\">\\</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>      /tmp/* </span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre></pre></td></tr><tr><td data-num=\"37\"></td><td><pre><span class=\"token comment\"># copy local files</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre><span class=\"token instruction\"><span class=\"token keyword\">COPY</span> root/ /</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre></pre></td></tr><tr><td data-num=\"40\"></td><td><pre><span class=\"token instruction\"><span class=\"token keyword\">ENV</span> TZ=Asia/Shanghai</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre><span class=\"token instruction\"><span class=\"token keyword\">ENV</span> WORKSPACE=/siyuan/workspace/</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre><span class=\"token instruction\"><span class=\"token keyword\">ENV</span> ACCESSAUTHCODE=</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre><span class=\"token instruction\"><span class=\"token keyword\">ENV</span> PUID=0</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre><span class=\"token instruction\"><span class=\"token keyword\">ENV</span> PGID=0</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre><span class=\"token instruction\"><span class=\"token keyword\">VOLUME</span> /siyuan/workspace/</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre><span class=\"token instruction\"><span class=\"token keyword\">EXPOSE</span> 6806</span></pre></td></tr></table></figure><h3 id=\"编译\"><a class=\"anchor\" href=\"#编译\">#</a> 编译</h3>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">sh</span> ./build_z4.sh</pre></td></tr></table></figure><p>成功之后，就可以参考我之前的文章【<a href=\"https://blog.aayu.today/nas/zspace/20220902/\">极空间上常用 Docker 应用推荐 - 可玩性 +++</a>】进行部署啦，bingo~</p>\n<p>在此放一张编译成功，以及成功部署后的图吧，镇帖 (๑・̀ㅂ・́)و✧</p>\n<p class=\"gallery\" data-height=\"240\"><img data-src=\"https://image.aayu.today/uploads/2023/02/24/202302240658460.png\" alt=\"\" /><br />\n<img data-src=\"https://image.aayu.today/uploads/2023/02/24/202302240659155.png\" alt=\"\" /></p>\n",
            "tags": [
                "我的NAS捣鼓笔记",
                "极空间",
                "NAS",
                "极空间"
            ]
        },
        {
            "id": "https://blog.aayu.today/android/20230207/",
            "url": "https://blog.aayu.today/android/20230207/",
            "title": "Android Studio和Unity3D联合开发环境配置",
            "date_published": "2023-02-06T17:27:40.000Z",
            "content_html": "<h2 id=\"android-studio安装\"><a class=\"anchor\" href=\"#android-studio安装\">#</a> Android Studio 安装</h2>\n<p>这里我使用的版本是 2021.2.1.15。放个百度网盘链接，需要的自取</p>\n<p>链接：<span class=\"exturl\" data-url=\"aHR0cHM6Ly9wYW4uYmFpZHUuY29tL3MvMUxGcEhXUXRRM1JCWXNZeHpMZ1FFd3c=\">https://pan.baidu.com/s/1LFpHWQtQ3RBYsYxzLgQEww</span><br />\n 提取码：wfjq</p>\n<h2 id=\"android-sdk配置\"><a class=\"anchor\" href=\"#android-sdk配置\">#</a> Android SDK 配置</h2>\n<div class=\"note info\">\n<p>如果发现自己 Android SDK 无法刷新出新的东西，表明自己的网络可能不太行。推荐大家去「 <span class=\"exturl\" data-url=\"aHR0cHM6Ly94bi0tNGdxNjJmNTJnZHNzLmNvbS8jL3JlZ2lzdGVyP2NvZGU9RHlkSkJ1dlc=\">一元机场</span> 」平台订阅，每月 500G 流量月均 0.9 元，性价比拉满～</p>\n</div>\n<p>代理配置的过程，可以根据平台教程配置好「 Clash for Windows 」，配置好主程序默认端口，如下图，然后在 Android Studio 上配置好代理，如下图，即可～</p>\n<p class=\"gallery\" data-height=\"240\"><img data-src=\"https://image.aayu.today/uploads/2023/02/07/202302070143758.png\" alt=\"\" /><br />\n<img data-src=\"https://image.aayu.today/uploads/2023/02/07/202302070146621.png\" alt=\"\" /></p>\n<p>可以点击 Check connection 测试下 <code>https://dl.google.com/android/repository/repository2-3.xml</code>  能否访问成功，可以的话就表示代理没问题～</p>\n<p>确认自己手机的 Android 版本，例如，手机的 Android 版本是 10，就勾选这几项<br />\n<img data-src=\"https://image.aayu.today/uploads/2023/02/07/202302070130739.png\" alt=\"\" width=\"800px\" /></p>\n<div class=\"note warning\">\n<p>注意，默认安装的 Android SDK（例如 Android SDK Platform 33）不能删除，否则可能会有未知 Bug</p>\n</div>\n<p>然后在 SDK Tools，安装如下几项，可保后面与 Unity3D 联调不出奇奇怪怪的 Bug~</p>\n<p class=\"gallery\" data-height=\"240\"><img data-src=\"https://image.aayu.today/uploads/2023/02/07/202302070137372.png\" alt=\"\" /><br />\n<img data-src=\"https://image.aayu.today/uploads/2023/02/07/202302070139356.png\" alt=\"\" /><br />\n<img data-src=\"https://image.aayu.today/uploads/2023/02/07/202302070413902.png\" alt=\"\" /><br />\n<img data-src=\"https://image.aayu.today/uploads/2023/02/07/202302070140863.png\" alt=\"\" /></p>\n<p>创建一个空项目，当下方进度条的 Gradle 显示 Successful，表明 Android Studio 的配置可以初告一个段落了～</p>\n<p>哦补充一个，在下图这里记得设置 JDK 为 8</p>\n<p><img data-src=\"https://image.aayu.today/uploads/2023/02/07/202302070336910.png\" alt=\"\" width=\"800px\" /></p>\n<h2 id=\"unity3d配置\"><a class=\"anchor\" href=\"#unity3d配置\">#</a> Unity3D 配置</h2>\n<p>以安装 2021 最新稳定版为例，在 Unity Hub 上安装如下</p>\n<p><img data-src=\"https://image.aayu.today/uploads/2023/02/07/202302070203190.png\" alt=\"\" width=\"800px\" /></p>\n<p>创建一个新项目，首先在「 File -&gt; Build Settings -&gt; Player Settings 」里设置下公司名和项目名，如下，unity 会自动组合成包名</p>\n<p class=\"gallery\" data-height=\"300\"><img data-src=\"https://image.aayu.today/uploads/2023/02/07/202302070217872.png\" alt=\"\" /><br />\n<img data-src=\"https://image.aayu.today/uploads/2023/02/07/202302070218601.png\" alt=\"\" /></p>\n<p>然后在「 Editor -&gt; Preference 」里正确设置 JDK，Android SDK 和 NDK，然后打开下 Gradle 的路径，记住 Unity 的 Gradle 的版本是多少，后面 Android Studio 联调时，需要和 Unity 保持一致</p>\n<p><img data-src=\"https://image.aayu.today/uploads/2023/02/07/202302070221586.png\" alt=\"\" width=\"800px\" /></p>\n<h2 id=\"创建android密钥文件\"><a class=\"anchor\" href=\"#创建android密钥文件\">#</a> 创建 Android 密钥文件</h2>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>keytool -genkey -alias 密钥库名称 -keyalg RSA -validity 有效时间 -keystore 密钥库文件名</pre></td></tr></table></figure><p><img data-src=\"https://image.aayu.today/uploads/2023/02/07/202302070238825.png\" alt=\"\" /></p>\n<p>密钥文件将生成在运行命令的所在目录下～</p>\n",
            "tags": [
                "Android",
                "Unity3D",
                "Android Studio"
            ]
        },
        {
            "id": "https://blog.aayu.today/front-end/basic/vue3+vite+ts%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/",
            "url": "https://blog.aayu.today/front-end/basic/vue3+vite+ts%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/",
            "title": "vue3+vite+ts学习笔记",
            "date_published": "2023-01-17T09:21:44.000Z",
            "content_html": "<h2 id=\"初始化一个前端项目\"><a class=\"anchor\" href=\"#初始化一个前端项目\">#</a> 初始化一个前端项目</h2>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">npm</span> init vite@latest</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\"># npm init vue@latest</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token function\">npm</span> i</pre></td></tr></table></figure><h2 id=\"初始化一个nodejs服务端项目\"><a class=\"anchor\" href=\"#初始化一个nodejs服务端项目\">#</a> 初始化一个 NodeJS 服务端项目</h2>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">npm</span> <span class=\"token function\">install</span> ts-node -g</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">npm</span> init -y</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token function\">npm</span> <span class=\"token function\">install</span> @types/node -D</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token function\">npm</span> <span class=\"token function\">install</span> express -S</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token function\">npm</span> <span class=\"token function\">install</span> @types/express -D</pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token function\">npm</span> <span class=\"token function\">install</span> axios -S</pre></td></tr></table></figure><p>正在学习中...</p>\n<h2 id=\"学习链接\"><a class=\"anchor\" href=\"#学习链接\">#</a> 学习链接</h2>\n<ul class=\"task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_0\" disabled=\"true\" /><label for=\"cbx_0\"> <span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMWRTNHkxeTd2ZA==\">Vue3 + vite + Ts + pinia + 实战 + 源码 +electron（82/111）</span></label></li>\n</ul>\n",
            "tags": [
                "前端系列",
                "Vue",
                "vue3",
                "vite",
                "typescript"
            ]
        },
        {
            "id": "https://blog.aayu.today/artificial-intelligence/machine-learning/basic/20230103/",
            "url": "https://blog.aayu.today/artificial-intelligence/machine-learning/basic/20230103/",
            "title": "召回率（recall）和精度（precision）",
            "date_published": "2023-01-03T08:09:33.000Z",
            "content_html": "<h2 id=\"前言\"><a class=\"anchor\" href=\"#前言\">#</a> 前言</h2>\n<p>识别精度主要是由 <code>召回率（recall）和精度（precision）</code> 表示的，通过绘制 precision-recall 曲线，该曲线下方的面积越大，识别精度也就越高，反之越低。</p>\n<h2 id=\"数据定义\"><a class=\"anchor\" href=\"#数据定义\">#</a> 数据定义</h2>\n<p>在一个数据集检测中，会产生四类检测结果：TP、TN、FP、FN</p>\n<ul>\n<li>T：true 表示正确</li>\n<li>F：false 表示错误</li>\n<li>P：positive 表示积极的，看成正例</li>\n<li>N：negative 表示消极的，看成负例</li>\n</ul>\n<p>排列组合，即可得到以下结果：</p>\n<ul>\n<li>TP：预测为 P（正例），预测对了，本来是正样本，检测为正样本（真阳性）</li>\n<li>TN：预测为 N（负例），预测对了，本来是本样本，检测为负样本（真阴性）</li>\n<li>FP：预测为 P（正例），预测错了，本来是负样本，检测为正样本（假阳性）</li>\n<li>FN：预测为 N（负例），预测错了，本来是正样本，检测为负样本（假阴性）</li>\n</ul>\n<p>合计：</p>\n<ul>\n<li>TP+FP+TN+FN：样本总数</li>\n<li>TP+FN：实际正样本数</li>\n<li>TP+FP：预测结果为正样本的总数，包括预测正确的和错误的</li>\n<li>FP+TN：实际负样本数</li>\n<li>TN+FN：预测结果为负样本的总数，包括预测正确的和错误的</li>\n</ul>\n<h2 id=\"召回率recall\"><a class=\"anchor\" href=\"#召回率recall\">#</a> 召回率（Recall）：</h2>\n<div class=\"note info\">\n<p>表示的是样本中的正例有多少被预测正确了（找的全），即所有正例中被正确预测出来比例</p>\n</div>\n<p>用途：用于评估检测器对所有待检测目标的检测覆盖率</p>\n<p>针对数据集中所有正例（TP+FN）而言， <code>模型正确判断出正例（TP）占数据集中所有正例的比例</code> 。FN 表示被模型误认为是负例但实际是正例的数据， <code>召回率也叫做查全率</code> 。以物体检测为例，我们往往把图片中的物体作为正例，此时 <code>召回率高代表着模型可以找出图片中更多的物体</code></p>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>R</mi><mi>e</mi><mi>c</mi><mi>a</mi><mi>l</mi><mi>l</mi><mo>=</mo><mfrac><mrow><mi>T</mi><mi>P</mi></mrow><mrow><mi>T</mi><mi>P</mi><mo>−</mo><mi>F</mi><mi>N</mi></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">Recall=\\frac{TP}{TP-FN}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\">c</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.1296600000000003em;vertical-align:-0.7693300000000001em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.36033em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">F</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">N</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7693300000000001em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span></p>\n<h2 id=\"精确率precision\"><a class=\"anchor\" href=\"#精确率precision\">#</a> 精确率（Precision）</h2>\n<div class=\"note info\">\n<p>表示的是预测为正的样本中有多少是真正的正样本（找的对），即预测结果中真正的正例的比例</p>\n</div>\n<p>用途：用于评估检测器在检测成功基础上的正确率</p>\n<p>针对模型判断出的所有正例（TP+FP）而言，其中真正例（TP）占的比例。精确率也叫查准率，还是以物体检测为例，精确率高表示模型检测出的物体中大部分是正确的，只有少数不是物体的对象被当作物体</p>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>P</mi><mi>r</mi><mi>e</mi><mi>c</mi><mi>i</mi><mi>s</mi><mi>i</mi><mi>o</mi><mi>n</mi><mo>=</mo><mfrac><mrow><mi>T</mi><mi>P</mi></mrow><mrow><mi>T</mi><mi>P</mi><mo>+</mo><mi>F</mi><mi>P</mi></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">Precision=\\frac{TP}{TP+FP}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\">c</span><span class=\"mord mathnormal\">i</span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">i</span><span class=\"mord mathnormal\">o</span><span class=\"mord mathnormal\">n</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.1296600000000003em;vertical-align:-0.7693300000000001em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.36033em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">F</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7693300000000001em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span></p>\n<p>也就是说， <code>recall表示在整个检测结果中有用部分占整个数据集有用部分的比重，precision表示在整个检测结果中有用部分占整个检测结果为有用的比重</code> 。虽然希望两个指标都能越高越好，但是这两个指标在某些情况下是存在矛盾的，所以在实际检测场景中需要根据自己的判断选择取舍或绘制 precision-recall 曲线（简称 PR 曲线）帮助分析</p>\n<h2 id=\"准确率accuracy\"><a class=\"anchor\" href=\"#准确率accuracy\">#</a> 准确率（Accuracy）</h2>\n<div class=\"note info\">\n<p>表示模型判断正确的数据（TP+TN）占总数据的比例</p>\n</div>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>A</mi><mi>c</mi><mi>c</mi><mo>=</mo><mfrac><mrow><mi>T</mi><mi>P</mi><mo>+</mo><mi>T</mi><mi>N</mi></mrow><mrow><mi>T</mi><mi>P</mi><mo>+</mo><mi>T</mi><mi>N</mi><mo>+</mo><mi>F</mi><mi>P</mi><mo>+</mo><mi>F</mi><mi>N</mi></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">Acc=\\frac{TP+TN}{TP+TN+FP+FN}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">A</span><span class=\"mord mathnormal\">c</span><span class=\"mord mathnormal\">c</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.1296600000000003em;vertical-align:-0.7693300000000001em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.36033em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">N</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">F</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">F</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">N</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">N</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7693300000000001em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span></p>\n<div class=\"note warning\">\n<p>准确率是分类问题中最简单也是最直观的评价指标，但存在明显的缺陷。比如，当负样本占 99% 时，分类器把所有样本都预测为负样本也可以获得 99% 的准确率，但这对我们的研究工作几乎没有帮助。所以，当不同类别的样本比例非常不均衡时，占比大的类别往往成为影响准确率的最主要因素。</p>\n</div>\n<h2 id=\"参考链接\"><a class=\"anchor\" href=\"#参考链接\">#</a> 参考链接</h2>\n<ul>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1cxOTk1Uy9hcnRpY2xlL2RldGFpbHMvMTE0OTg4NjM3\">召回率（recall）和精度（precision）</span></li>\n</ul>\n",
            "tags": [
                "人工智能",
                "机器学习",
                "基础知识",
                "召回率",
                "精度"
            ]
        },
        {
            "id": "https://blog.aayu.today/artificial-intelligence/machine-learning/bn/20230101/",
            "url": "https://blog.aayu.today/artificial-intelligence/machine-learning/bn/20230101/",
            "title": "贝叶斯网络",
            "date_published": "2023-01-01T14:11:22.000Z",
            "content_html": "<h2 id=\"定义\"><a class=\"anchor\" href=\"#定义\">#</a> 定义</h2>\n<ul>\n<li>贝叶斯网络是一个 <code>有向无圈图</code> （Directed Acyclic Graph, DAG），由代表变量节点及连接这些节点有向边构成。 <code>节点代表随机变量</code> ，节点间的 <code>有向边代表了节点间的相互关系</code> （由父节点指向其子节点），用条件概率表达变量间依赖关系，没有父节点的用先验概率进行信息表达。</li>\n<li>令<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>G</mi></mrow><annotation encoding=\"application/x-tex\">G</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">G</span></span></span></span> 为定义在<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">{</mo><msub><mi>X</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><msub><mi>X</mi><mn>2</mn></msub><mo separator=\"true\">,</mo><mi mathvariant=\"normal\">.</mi><mi mathvariant=\"normal\">.</mi><mi mathvariant=\"normal\">.</mi><mo separator=\"true\">,</mo><msub><mi>X</mi><mi>N</mi></msub><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">\\{X_1, X_2, ..., X_N\\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">.</span><span class=\"mord\">.</span><span class=\"mord\">.</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.32833099999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.10903em;\">N</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span></span></span></span> 上的一个贝叶斯网络，其联合概率分布可以表示为各个节点的条件概率分布的乘积：</li>\n</ul>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>p</mi><mo stretchy=\"false\">(</mo><mi>X</mi><mo stretchy=\"false\">)</mo><mo>=</mo><munder><mo>∏</mo><mi>i</mi></munder><msub><mi>p</mi><mi>i</mi></msub><mo stretchy=\"false\">(</mo><msub><mi>X</mi><mi>i</mi></msub><mi mathvariant=\"normal\">∣</mi><mi>P</mi><mi>a</mi><msub><mi>r</mi><mi>G</mi></msub><mo stretchy=\"false\">(</mo><msub><mi>X</mi><mi>i</mi></msub><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">p(X)=\\prod_i p_i(X_i | Par_G(X_i))\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">p</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.327674em;vertical-align:-1.277669em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.0500050000000003em;\"><span style=\"top:-1.872331em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span><span style=\"top:-3.050005em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∏</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.277669em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\">∣</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"mord mathnormal\">a</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.32833099999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">G</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mclose\">)</span></span></span></span></span></p>\n<ul>\n<li>其中<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>P</mi><mi>a</mi><msub><mi>r</mi><mi>G</mi></msub><mo stretchy=\"false\">(</mo><msub><mi>X</mi><mi>i</mi></msub><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">Par_G(X_i)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"mord mathnormal\">a</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.32833099999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">G</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span> 为节点<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>X</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">X_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 的父节点，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>p</mi><mi>i</mi></msub><mo stretchy=\"false\">(</mo><msub><mi>X</mi><mi>i</mi></msub><mi mathvariant=\"normal\">∣</mi><mi>P</mi><mi>a</mi><msub><mi>r</mi><mi>G</mi></msub><mo stretchy=\"false\">(</mo><msub><mi>X</mi><mi>i</mi></msub><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">p_i(X_i | Par_G(X_i))</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\">∣</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"mord mathnormal\">a</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.32833099999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">G</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mclose\">)</span></span></span></span> 为节点条件概率表。</li>\n</ul>\n<h2 id=\"构建贝叶斯网络前的准备\"><a class=\"anchor\" href=\"#构建贝叶斯网络前的准备\">#</a> 构建贝叶斯网络前的准备</h2>\n<ol>\n<li>我想要解决的问题是什么？</li>\n</ol>\n<div class=\"note info\">\n<p>是要进行一般的预测，还是对数据进行解释，还是要对独立条件进行探索。</p>\n</div>\n<ol start=\"2\">\n<li>针对我们的问题，尽可能采集到足够多的观测数据，或者是专业知识</li>\n<li>决定哪些观测数据是值得被建模的</li>\n<li>把观测数据变成很多取值互斥，却又完全穷尽的变量</li>\n</ol>\n<div class=\"note info\">\n<p>这种定义变量取值的方法又叫做 MECE（Mutually Exclusive, Collectively Exhaustive）分析法</p>\n</div>\n<h2 id=\"条件独立性\"><a class=\"anchor\" href=\"#条件独立性\">#</a> 条件独立性</h2>\n<p><img data-src=\"https://image.aayu.today/uploads/2023/01/02/202301021459296.png\" alt=\"\" /></p>\n<div class=\"note primary\">\n<p>关键之处在于，若已知 C 发生的情况下，B 是否发生与 A 是无关的。因为 A 是影响 C 发生的概率来影响 B，既然 C 已经发生了，B 就和 A 无关。</p>\n</div>\n<p>所以 $$P (B|A,C)=P (B|C)$$</p>\n<h2 id=\"参考链接\"><a class=\"anchor\" href=\"#参考链接\">#</a> 参考链接</h2>\n<ul>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMXBTNHkxYTdkci8=\">贝叶斯网络基础</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMWlnNHkxdjc2NC8=\">贝叶斯网络</span></li>\n</ul>\n",
            "tags": [
                "人工智能",
                "机器学习",
                "贝叶斯网络",
                "贝叶斯网络"
            ]
        },
        {
            "id": "https://blog.aayu.today/artificial-intelligence/basic/20221217/",
            "url": "https://blog.aayu.today/artificial-intelligence/basic/20221217/",
            "title": "Win11安装WSL2和Nvidia驱动",
            "date_published": "2022-12-17T13:09:51.000Z",
            "content_html": "<h2 id=\"前言\"><a class=\"anchor\" href=\"#前言\">#</a> 前言</h2>\n<p>以前捣鼓过 wsl，即 Windows 下的 Linux 子系统，但兼容性依然比不过原生的 Linux 系统，使用 cmake 等命令会出现奇怪的问题。</p>\n<p>最近听说 wsl2 出来了，而且也可以在 wsl 上安装 nvidia 显卡驱动了，有网友实测跑深度学习模型速度能比 Windows 的快一倍左右，哈哈这就必须得捣鼓捣鼓了，如果兼容性真的没问题的话，那可比虚拟机或双系统要爽多了～</p>\n<p>目前还发现，微软官网对 wsl 的使用教程也写的非常友好，推荐大家多看看官方教程，毕竟时效性可以保证～～</p>\n<p>微软 wsl 官方教程：<span class=\"exturl\" data-url=\"aHR0cHM6Ly9sZWFybi5taWNyb3NvZnQuY29tL3poLWNuL3dpbmRvd3Mvd3NsL2luc3RhbGw=\">https://learn.microsoft.com/zh-cn/windows/wsl/install</span></p>\n<div class=\"note info\">\n<p>wsl 安装过程中可能需要科学上网，推荐大家去「 <span class=\"exturl\" data-url=\"aHR0cHM6Ly94bi0tNGdxNjJmNTJnZHNzLmNvbS8jL3JlZ2lzdGVyP2NvZGU9RHlkSkJ1dlc=\">一元机场</span> 」平台订阅，每月 500G 流量月均 0.9 元，性价比拉满～</p>\n</div>\n<h2 id=\"系统环境\"><a class=\"anchor\" href=\"#系统环境\">#</a> 系统环境</h2>\n<ul>\n<li>CPU：i5-12450</li>\n<li>内存：32G</li>\n<li>显卡：3060</li>\n<li>Windows 版本：Windows11 22H2 22621.963</li>\n</ul>\n<div class=\"note warning\">\n<p>本篇教程后面涉及到 WSL2 上的 GPU 加速，经网上帖子的建议，用最新的 win11 系统可以保证最大的成功率。如果是 win10 系统，需将 win10 升级为预览体验版本，建议谨慎折腾！</p>\n<p>没特殊需求的，都建议将系统升级为 win11 再进行尝试。</p>\n</div>\n<h2 id=\"wsl-1和wsl-2功能对比\"><a class=\"anchor\" href=\"#wsl-1和wsl-2功能对比\">#</a> WSL 1 和 WSL 2 功能对比</h2>\n<p><img data-src=\"https://image.aayu.today/uploads/2022/12/17/202212172118749.png\" alt=\"\" width=\"800px\" /></p>\n<p>从对比图中可以看到，除非对跨 OS 的文件系统性能有要求，WSL 2 是全面优于 WSL 1 的。官方文档也建议使用 VSCode 对 WSL 中的文件进行访问和操作，所以 WSL 2 搭配 VSCode 应该是非常棒的组合～</p>\n<p><img data-src=\"https://image.aayu.today/uploads/2022/12/17/202212172122761.png\" alt=\"\" width=\"800px\" /></p>\n<h2 id=\"安装wsl2\"><a class=\"anchor\" href=\"#安装wsl2\">#</a> 安装 WSL2</h2>\n<div class=\"note info\">\n<p>管理员模式下打开 PowerShell 或 Windows 命令提示符</p>\n</div>\n<p>查看可用发行版本列表</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>wsl --list --online</pre></td></tr></table></figure><p>可以看到有 <code>Ubuntu-20.04</code>  这个发行版本，正是我们需要的～</p>\n<p>安装 <code>Ubuntu-20.04</code>  发行版</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>wsl --install -d Ubuntu-20.04</pre></td></tr></table></figure><p>这里默认安装的就是 wsl2，如果对 wsl1 有需求，可以查阅官方文档哦，有很详尽的介绍～</p>\n<p>安装大概花费 5~10 分钟左右，视电脑配置和网络状况，耐心等待即可～</p>\n<p>提示安装成功后，重启电脑即可完成安装。重启后会默认弹出 Linux powershell，设置完用户名和密码，安装正式完成，如下图～</p>\n<p><img data-src=\"https://image.aayu.today/uploads/2022/12/17/202212172134452.png\" alt=\"\" width=\"800px\" /></p>\n<h2 id=\"更新和升级包\"><a class=\"anchor\" href=\"#更新和升级包\">#</a> 更新和升级包</h2>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> update <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> upgrade</pre></td></tr></table></figure><h2 id=\"配置vscode\"><a class=\"anchor\" href=\"#配置vscode\">#</a> 配置 VSCode</h2>\n<p>在 VSCode 中安装「 Remote Development 」扩展。除了远程 - SSH 和开发容器扩展，此扩展包还包括 WSL 扩展，使你能够在容器、远程计算机上或 WSL 中打开任何文件夹。</p>\n<p>可以通过在 WSL2 命令行中输入 <code>code .</code>  就可以直接用 VSCode 打开 Linux 中的文件夹进行开发了～</p>\n<h2 id=\"配置miniconda\"><a class=\"anchor\" href=\"#配置miniconda\">#</a> 配置 MiniConda</h2>\n<h3 id=\"安装miniconda\"><a class=\"anchor\" href=\"#安装miniconda\">#</a> 安装 MiniConda</h3>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">wget</span> https://repo.anaconda.com/miniconda/Miniconda3-py39_4.12.0-Linux-x86_64.sh</pre></td></tr></table></figure><p>运行安装脚本</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">bash</span> Miniconda3-py39_4.12.0-Linux-x86_64.sh</pre></td></tr></table></figure><p>一直按回车，直到浏览完用户协议后输入 <code>yes</code> 。再次按回车使用默认安装位置，然后再次输入 <code>yes</code>  选择初始化 miniconda，初始化完成即安装成功</p>\n<p>可以使用如下命令取消默认激活 base 环境</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>conda config --set auto_activate_base <span class=\"token boolean\">false</span></pre></td></tr></table></figure><p>安装完成后记得关闭 Linux 终端，打开 powershell 输入 <code>wsl</code>  可以重新进入 Linux 终端，使 conda 环境刷新</p>\n<h3 id=\"配置miniconda-2\"><a class=\"anchor\" href=\"#配置miniconda-2\">#</a> 配置 MiniConda</h3>\n<p>创建用户配置文件</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>conda config --set show_channel_urls <span class=\"token function\">yes</span></pre></td></tr></table></figure><p>进入<span class=\"exturl\" data-url=\"aHR0cHM6Ly9taXJyb3JzLnR1bmEudHNpbmdodWEuZWR1LmNuL2hlbHAvYW5hY29uZGEv\">清华大学开源软件镜像站</span>，复制配置内容到用户目录下刚创建的 .condarc 文件，要复制的配置内容如下</p>\n<figure class=\"highlight yaml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">channels</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token punctuation\">-</span> defaults</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token key atrule\">show_channel_urls</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token key atrule\">default_channels</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token punctuation\">-</span> https<span class=\"token punctuation\">:</span>//mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token punctuation\">-</span> https<span class=\"token punctuation\">:</span>//mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/r</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token punctuation\">-</span> https<span class=\"token punctuation\">:</span>//mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/msys2</pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token key atrule\">custom_channels</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token key atrule\">conda-forge</span><span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span>//mirrors.tuna.tsinghua.edu.cn/anaconda/cloud</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token key atrule\">msys2</span><span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span>//mirrors.tuna.tsinghua.edu.cn/anaconda/cloud</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  <span class=\"token key atrule\">bioconda</span><span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span>//mirrors.tuna.tsinghua.edu.cn/anaconda/cloud</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  <span class=\"token key atrule\">menpo</span><span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span>//mirrors.tuna.tsinghua.edu.cn/anaconda/cloud</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>  <span class=\"token key atrule\">pytorch</span><span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span>//mirrors.tuna.tsinghua.edu.cn/anaconda/cloud</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>  <span class=\"token key atrule\">pytorch-lts</span><span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span>//mirrors.tuna.tsinghua.edu.cn/anaconda/cloud</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  <span class=\"token key atrule\">simpleitk</span><span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span>//mirrors.tuna.tsinghua.edu.cn/anaconda/cloud</pre></td></tr></table></figure><div class=\"note info\">\n<p>注意，把 <code>.condarc</code>  文件默认的内容删掉</p>\n</div>\n<p>输入 <code>conda clean -i</code>  清除默认缓存，用 <code>conda config --show-sources</code>  查看配置是否更换成功</p>\n<h2 id=\"pip换国内源linux环境\"><a class=\"anchor\" href=\"#pip换国内源linux环境\">#</a> pip 换国内源（Linux 环境）</h2>\n<h3 id=\"临时换源不推荐\"><a class=\"anchor\" href=\"#临时换源不推荐\">#</a> 临时换源（不推荐）</h3>\n<p>可能要安装包里的依赖包下载依然缓慢</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>pip <span class=\"token function\">install</span> -i https://pypi.tuna.tsinghua.edu.cn/simple 包名</pre></td></tr></table></figure><h3 id=\"永久换源推荐\"><a class=\"anchor\" href=\"#永久换源推荐\">#</a> 永久换源（推荐）</h3>\n<ol>\n<li>在用户目录下创建.pip 文件夹</li>\n<li>在刚创建的 pip 文件夹下创建 <code>pip.conf</code>  文件</li>\n<li>把以下配置内容放到刚创建的 pip.conf 文件里</li>\n</ol>\n<figure class=\"highlight ini\"><figcaption data-lang=\"ini\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token header\"><span class=\"token punctuation\">[</span><span class=\"token section-name selector\">global</span><span class=\"token punctuation\">]</span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token key attr-name\">index-url</span> <span class=\"token punctuation\">=</span> <span class=\"token value attr-value\">https://pypi.tuna.tsinghua.edu.cn/simple/</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token header\"><span class=\"token punctuation\">[</span><span class=\"token section-name selector\">install</span><span class=\"token punctuation\">]</span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token key attr-name\">trusted-host</span> <span class=\"token punctuation\">=</span> <span class=\"token value attr-value\">pypi.tuna.tsinghua.edu.cn</span></pre></td></tr></table></figure><h2 id=\"配置gpu加速\"><a class=\"anchor\" href=\"#配置gpu加速\">#</a> 配置 GPU 加速</h2>\n<h3 id=\"安装nvidia驱动\"><a class=\"anchor\" href=\"#安装nvidia驱动\">#</a> 安装 Nvidia 驱动</h3>\n<p>下载并安装 NVIDIA GPU 的最新驱动程序：<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubnZpZGlhLmNvbS9Eb3dubG9hZC9pbmRleC5hc3B4\">https://www.nvidia.com/Download/index.aspx</span></p>\n<p>我的笔记本是 3060，所以可以按如下配置搜索</p>\n<p>搜索出来后点击下载即可，可以看到驱动版本目前最新是 527.56</p>\n<p class=\"gallery\" data-height=\"240\"><img data-src=\"https://image.aayu.today/uploads/2022/12/18/202212180051600.png\" alt=\"\" /><br />\n<img data-src=\"https://image.aayu.today/uploads/2022/12/18/202212180059301.png\" alt=\"\" /></p>\n<div class=\"note warning\">\n<p>这是您需要安装的唯一驱动程序。不要在 WSL 中安装任何 Linux 显卡驱动程序。<br />\n详情参阅 Nvidia 官方说明：<span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLm52aWRpYS5jbi9jdWRhL3dzbC11c2VyLWd1aWRlL2luZGV4Lmh0bWwjZ2V0dGluZy1zdGFydGVkLXdpdGgtY3VkYS1vbi13c2wtMg==\">WSL 2 上的 CUDA 入门</span></p>\n<p>再次强调，不要在 WSL 中安装任何 Linux 版的 Nvidia 驱动！</p>\n</div>\n<p>下载完驱动后就可以安装了，我直接选择默认的 <code>NVIDIA 显卡驱动和 GeForce Experience</code>  选项，安装选项为 <code>精简</code> ，安装完成后重启下电脑即可～</p>\n<p>打开 powershell，输入 <code>nvidia-smi</code> ，可以看到 Windows 下已经正常输出显卡驱动信息了</p>\n<p>输入 <code>wsl</code> ，可以进入 Linux 命令行，再次输入 <code>nvidia-smi</code> ，可以看到 Linux 环境下，也输出了显卡驱动信息，大功告成～</p>\n<p class=\"gallery\" data-height=\"280\"><img data-src=\"https://image.aayu.today/uploads/2022/12/18/202212181857151.png\" alt=\"\" /><br />\n<img data-src=\"https://image.aayu.today/uploads/2022/12/18/202212181857604.png\" alt=\"\" /></p>\n<div class=\"note info\">\n<p>如果在 wsl2 命令行中输入 <code>nvidia-smi</code>  发现没有正常输出，而是报错，首先要检查的就是你的 Windows 版本是不是太低了，还是建议升级到最新的 win11 系统再进行折腾</p>\n<p>因为有<span class=\"exturl\" data-url=\"aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2l3YW52YW4vYXJ0aWNsZS9kZXRhaWxzLzEyMjExOTU5NQ==\">网友已经实践</span>，升级到 win11 后啥都不用做，直接就把 wsl2 链接到 GPU 了</p>\n<p>所以看到报错先检查 Windows 版本，千万不要在 WSL 中安装任何 Linux 版的 Nvidia 驱动！不需要的！</p>\n</div>\n<h3 id=\"安装cuda-toolkit\"><a class=\"anchor\" href=\"#安装cuda-toolkit\">#</a> 安装 Cuda Toolkit</h3>\n<p>接下来就有两种方式了：</p>\n<p>一个是按 Nvidia 官方说明：<span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLm52aWRpYS5jbi9jdWRhL3dzbC11c2VyLWd1aWRlL2luZGV4Lmh0bWwjZ2V0dGluZy1zdGFydGVkLXdpdGgtY3VkYS1vbi13c2wtMg==\">WSL 2 上的 CUDA 入门</span>上的，在<span class=\"exturl\" data-url=\"aHR0cHM6Ly9kZXZlbG9wZXIubnZpZGlhLmNvbS9jdWRhLWRvd25sb2Fkcz90YXJnZXRfb3M9TGludXgmYW1wO3RhcmdldF9hcmNoPXg4Nl82NCZhbXA7RGlzdHJpYnV0aW9uPVdTTC1VYnVudHUmYW1wO3RhcmdldF92ZXJzaW9uPTIuMCZhbXA7dGFyZ2V0X3R5cGU9ZGViX25ldHdvcms=\"> CUDA Toolkit</span> 下载界面选择适合 WSL 的 CUDA Toolkit 进行安装，如下图所示</p>\n<p><img data-src=\"https://image.aayu.today/uploads/2022/12/18/202212182152370.png\" alt=\"\" width=\"800px\" /></p>\n<p>另一种是根据网友的评论，可以依赖于 conda 和 pytorch 直接安装 gpu 版本的 pytorch，安装成功后 cuda 也是可以直接用了。pytorch 官方给出的安装命令如下图，可以看到其中也包含了 cuda 11.7</p>\n<p class=\"gallery\" data-height=\"280\"><img data-src=\"https://image.aayu.today/uploads/2022/12/19/202212191544772.png\" alt=\"\" /><br />\n<img data-src=\"https://image.aayu.today/uploads/2022/12/18/202212182203319.png\" alt=\"\" /></p>\n<div class=\"note warning\">\n<p>这两种的区别，据有网友说第二种方式安装的 CUDA Toolkit 貌似只适用于 Pytorch，所以如果想将 CUDA Toolkit 和 C++ 搭配使用的话，还是得要用第一种方式安装一次 CUDA Toolkit</p>\n<p>但经博主亲自实践，用 conda 安装的 cuda，也是可以直接和 C++ 搭配使用的！</p>\n</div>\n<p>所以接下来的内容就是，用第二种方式安装 pytorch 的 gpu 版本，即可将 cuda 安装好。然后编写一个 c++ 脚本测试一下，都没问题的话，即 WSL2 的 GPU 加速配置大功告成～</p>\n<div class=\"note info\">\n<p>本节教程和<span class=\"exturl\" data-url=\"aHR0cHM6Ly9sZWFybi5taWNyb3NvZnQuY29tL3poLWNuL3dpbmRvd3Mvd3NsL2luc3RhbGw=\">微软 wsl 官方教程</span>中的 GPU 加速配置有区别，好像是官方教程里好像设置了 Docker 什么的，我目前好像还用不到这么深，所以就没参考微软 wsl 的官方教程</p>\n</div>\n<h4 id=\"通过pytorch安装cuda-toolkit\"><a class=\"anchor\" href=\"#通过pytorch安装cuda-toolkit\">#</a> 通过 PyTorch 安装 CUDA Toolkit</h4>\n<p>首先我们先创建一个 python3.8 的虚拟环境，后续安装相关库都在这个环境下安装。保持环境一直可以减少很多 Bug 的产生</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>conda create --name py38 <span class=\"token assign-left variable\">python</span><span class=\"token operator\">=</span><span class=\"token number\">3.8</span></pre></td></tr></table></figure><p>激活新创建好的环境</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>conda activate py38</pre></td></tr></table></figure><p>PyTorch 官网直接给出了安装命令，如下</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>conda <span class=\"token function\">install</span> pytorch torchvision torchaudio pytorch-cuda<span class=\"token operator\">=</span><span class=\"token number\">11.7</span> -c pytorch -c nvidia</pre></td></tr></table></figure><p>因此，我们直接在 Linux 的命令行中，切换到我们自己创建的 python 虚拟环境，运行以上命令进行安装，以下是 conda 给出安装前的输出信息，可以看到里面就包含了 CUDA Toolkit</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">## Package Plan ##</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  environment location: /home/aayu/miniconda3/envs/py38</pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  added / updated specs:</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    - pytorch</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    - pytorch-cuda<span class=\"token operator\">=</span><span class=\"token number\">11.7</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    - torchaudio</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    - torchvision</pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>The following packages will be downloaded:</pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    package                    <span class=\"token operator\">|</span>            build</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    ---------------------------<span class=\"token operator\">|</span>-----------------</pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    cuda-11.7.1                <span class=\"token operator\">|</span>                <span class=\"token number\">0</span>           <span class=\"token number\">1</span> KB  nvidia</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    cuda-cccl-11.7.91          <span class=\"token operator\">|</span>                <span class=\"token number\">0</span>         <span class=\"token number\">1.2</span> MB  nvidia</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    cuda-command-line-tools-11.7.1<span class=\"token operator\">|</span>                <span class=\"token number\">0</span>           <span class=\"token number\">1</span> KB  nvidia</pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    cuda-compiler-11.7.1       <span class=\"token operator\">|</span>                <span class=\"token number\">0</span>           <span class=\"token number\">1</span> KB  nvidia</pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    cuda-cudart-11.7.99        <span class=\"token operator\">|</span>                <span class=\"token number\">0</span>         <span class=\"token number\">194</span> KB  nvidia</pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    cuda-cudart-dev-11.7.99    <span class=\"token operator\">|</span>                <span class=\"token number\">0</span>         <span class=\"token number\">1.1</span> MB  nvidia</pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    cuda-cuobjdump-11.7.91     <span class=\"token operator\">|</span>                <span class=\"token number\">0</span>         <span class=\"token number\">158</span> KB  nvidia</pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    cuda-cupti-11.7.101        <span class=\"token operator\">|</span>                <span class=\"token number\">0</span>        <span class=\"token number\">22.9</span> MB  nvidia</pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    cuda-cuxxfilt-11.7.91      <span class=\"token operator\">|</span>                <span class=\"token number\">0</span>         <span class=\"token number\">293</span> KB  nvidia</pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    cuda-demo-suite-12.0.76    <span class=\"token operator\">|</span>                <span class=\"token number\">0</span>         <span class=\"token number\">5.0</span> MB  nvidia</pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    cuda-documentation-12.0.76 <span class=\"token operator\">|</span>                <span class=\"token number\">0</span>          <span class=\"token number\">89</span> KB  nvidia</pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    cuda-driver-dev-11.7.99    <span class=\"token operator\">|</span>                <span class=\"token number\">0</span>          <span class=\"token number\">16</span> KB  nvidia</pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    cuda-gdb-12.0.90           <span class=\"token operator\">|</span>                <span class=\"token number\">0</span>         <span class=\"token number\">5.3</span> MB  nvidia</pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    cuda-libraries-11.7.1      <span class=\"token operator\">|</span>                <span class=\"token number\">0</span>           <span class=\"token number\">1</span> KB  nvidia</pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    cuda-libraries-dev-11.7.1  <span class=\"token operator\">|</span>                <span class=\"token number\">0</span>           <span class=\"token number\">2</span> KB  nvidia</pre></td></tr><tr><td data-num=\"31\"></td><td><pre>    cuda-memcheck-11.8.86      <span class=\"token operator\">|</span>                <span class=\"token number\">0</span>         <span class=\"token number\">168</span> KB  nvidia</pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    cuda-nsight-12.0.78        <span class=\"token operator\">|</span>                <span class=\"token number\">0</span>       <span class=\"token number\">113.6</span> MB  nvidia</pre></td></tr><tr><td data-num=\"33\"></td><td><pre>    cuda-nsight-compute-12.0.0 <span class=\"token operator\">|</span>                <span class=\"token number\">0</span>           <span class=\"token number\">1</span> KB  nvidia</pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    cuda-nvcc-11.7.99          <span class=\"token operator\">|</span>                <span class=\"token number\">0</span>        <span class=\"token number\">42.7</span> MB  nvidia</pre></td></tr><tr><td data-num=\"35\"></td><td><pre>    cuda-nvdisasm-12.0.76      <span class=\"token operator\">|</span>                <span class=\"token number\">0</span>        <span class=\"token number\">47.9</span> MB  nvidia</pre></td></tr><tr><td data-num=\"36\"></td><td><pre>    cuda-nvml-dev-11.7.91      <span class=\"token operator\">|</span>                <span class=\"token number\">0</span>          <span class=\"token number\">80</span> KB  nvidia</pre></td></tr><tr><td data-num=\"37\"></td><td><pre>    cuda-nvprof-12.0.90        <span class=\"token operator\">|</span>                <span class=\"token number\">0</span>         <span class=\"token number\">4.3</span> MB  nvidia</pre></td></tr><tr><td data-num=\"38\"></td><td><pre>    cuda-nvprune-11.7.91       <span class=\"token operator\">|</span>                <span class=\"token number\">0</span>          <span class=\"token number\">64</span> KB  nvidia</pre></td></tr><tr><td data-num=\"39\"></td><td><pre>    cuda-nvrtc-11.7.99         <span class=\"token operator\">|</span>                <span class=\"token number\">0</span>        <span class=\"token number\">17.3</span> MB  nvidia</pre></td></tr><tr><td data-num=\"40\"></td><td><pre>    cuda-nvrtc-dev-11.7.99     <span class=\"token operator\">|</span>                <span class=\"token number\">0</span>        <span class=\"token number\">16.9</span> MB  nvidia</pre></td></tr><tr><td data-num=\"41\"></td><td><pre>    cuda-nvtx-11.7.91          <span class=\"token operator\">|</span>                <span class=\"token number\">0</span>          <span class=\"token number\">57</span> KB  nvidia</pre></td></tr><tr><td data-num=\"42\"></td><td><pre>    cuda-nvvp-12.0.90          <span class=\"token operator\">|</span>                <span class=\"token number\">0</span>       <span class=\"token number\">114.3</span> MB  nvidia</pre></td></tr><tr><td data-num=\"43\"></td><td><pre>    cuda-runtime-11.7.1        <span class=\"token operator\">|</span>                <span class=\"token number\">0</span>           <span class=\"token number\">1</span> KB  nvidia</pre></td></tr><tr><td data-num=\"44\"></td><td><pre>    cuda-sanitizer-api-12.0.90 <span class=\"token operator\">|</span>                <span class=\"token number\">0</span>        <span class=\"token number\">16.6</span> MB  nvidia</pre></td></tr><tr><td data-num=\"45\"></td><td><pre>    cuda-toolkit-11.7.1        <span class=\"token operator\">|</span>                <span class=\"token number\">0</span>           <span class=\"token number\">1</span> KB  nvidia</pre></td></tr><tr><td data-num=\"46\"></td><td><pre>    cuda-tools-11.7.1          <span class=\"token operator\">|</span>                <span class=\"token number\">0</span>           <span class=\"token number\">1</span> KB  nvidia</pre></td></tr><tr><td data-num=\"47\"></td><td><pre>    cuda-visual-tools-11.7.1   <span class=\"token operator\">|</span>                <span class=\"token number\">0</span>           <span class=\"token number\">1</span> KB  nvidia</pre></td></tr><tr><td data-num=\"48\"></td><td><pre>    cudatoolkit-10.1.243       <span class=\"token operator\">|</span>       h036e899_8       <span class=\"token number\">427.4</span> MB  nvidia</pre></td></tr><tr><td data-num=\"49\"></td><td><pre>    gds-tools-1.5.0.59         <span class=\"token operator\">|</span>                <span class=\"token number\">0</span>        <span class=\"token number\">40.9</span> MB  nvidia</pre></td></tr><tr><td data-num=\"50\"></td><td><pre>    intel-openmp-2022.1.0      <span class=\"token operator\">|</span>    h9e868ea_3769         <span class=\"token number\">4.5</span> MB</pre></td></tr><tr><td data-num=\"51\"></td><td><pre>    lcms2-2.12                 <span class=\"token operator\">|</span>       h3be6417_0         <span class=\"token number\">312</span> KB</pre></td></tr><tr><td data-num=\"52\"></td><td><pre>    libcublas-11.10.3.66       <span class=\"token operator\">|</span>                <span class=\"token number\">0</span>       <span class=\"token number\">286.1</span> MB  nvidia</pre></td></tr><tr><td data-num=\"53\"></td><td><pre>    libcublas-dev-11.10.3.66   <span class=\"token operator\">|</span>                <span class=\"token number\">0</span>       <span class=\"token number\">296.4</span> MB  nvidia</pre></td></tr><tr><td data-num=\"54\"></td><td><pre>    libcufft-10.7.2.124        <span class=\"token operator\">|</span>       h4fbf590_0        <span class=\"token number\">93.6</span> MB  nvidia</pre></td></tr><tr><td data-num=\"55\"></td><td><pre>    libcufft-dev-10.7.2.124    <span class=\"token operator\">|</span>       h98a8f43_0       <span class=\"token number\">197.3</span> MB  nvidia</pre></td></tr><tr><td data-num=\"56\"></td><td><pre>    libcufile-1.5.0.59         <span class=\"token operator\">|</span>                <span class=\"token number\">0</span>         <span class=\"token number\">754</span> KB  nvidia</pre></td></tr><tr><td data-num=\"57\"></td><td><pre>    libcufile-dev-1.5.0.59     <span class=\"token operator\">|</span>                <span class=\"token number\">0</span>          <span class=\"token number\">13</span> KB  nvidia</pre></td></tr><tr><td data-num=\"58\"></td><td><pre>    libcurand-10.3.1.50        <span class=\"token operator\">|</span>                <span class=\"token number\">0</span>        <span class=\"token number\">51.7</span> MB  nvidia</pre></td></tr><tr><td data-num=\"59\"></td><td><pre>    libcurand-dev-10.3.1.50    <span class=\"token operator\">|</span>                <span class=\"token number\">0</span>         <span class=\"token number\">449</span> KB  nvidia</pre></td></tr><tr><td data-num=\"60\"></td><td><pre>    libcusolver-11.4.0.1       <span class=\"token operator\">|</span>                <span class=\"token number\">0</span>        <span class=\"token number\">78.7</span> MB  nvidia</pre></td></tr><tr><td data-num=\"61\"></td><td><pre>    libcusolver-dev-11.4.0.1   <span class=\"token operator\">|</span>                <span class=\"token number\">0</span>        <span class=\"token number\">55.9</span> MB  nvidia</pre></td></tr><tr><td data-num=\"62\"></td><td><pre>    libcusparse-11.7.4.91      <span class=\"token operator\">|</span>                <span class=\"token number\">0</span>       <span class=\"token number\">151.1</span> MB  nvidia</pre></td></tr><tr><td data-num=\"63\"></td><td><pre>    libcusparse-dev-11.7.4.91  <span class=\"token operator\">|</span>                <span class=\"token number\">0</span>       <span class=\"token number\">309.5</span> MB  nvidia</pre></td></tr><tr><td data-num=\"64\"></td><td><pre>    libnpp-11.7.4.75           <span class=\"token operator\">|</span>                <span class=\"token number\">0</span>       <span class=\"token number\">129.3</span> MB  nvidia</pre></td></tr><tr><td data-num=\"65\"></td><td><pre>    libnpp-dev-11.7.4.75       <span class=\"token operator\">|</span>                <span class=\"token number\">0</span>       <span class=\"token number\">126.6</span> MB  nvidia</pre></td></tr><tr><td data-num=\"66\"></td><td><pre>    libnvjpeg-11.8.0.2         <span class=\"token operator\">|</span>                <span class=\"token number\">0</span>         <span class=\"token number\">2.2</span> MB  nvidia</pre></td></tr><tr><td data-num=\"67\"></td><td><pre>    libnvjpeg-dev-11.8.0.2     <span class=\"token operator\">|</span>                <span class=\"token number\">0</span>         <span class=\"token number\">1.9</span> MB  nvidia</pre></td></tr><tr><td data-num=\"68\"></td><td><pre>    mkl-2022.1.0               <span class=\"token operator\">|</span>     hc2b9512_224       <span class=\"token number\">129.7</span> MB</pre></td></tr><tr><td data-num=\"69\"></td><td><pre>    ninja-1.10.2               <span class=\"token operator\">|</span>       h06a4308_5           <span class=\"token number\">8</span> KB</pre></td></tr><tr><td data-num=\"70\"></td><td><pre>    ninja-base-1.10.2          <span class=\"token operator\">|</span>       hd09550d_5         <span class=\"token number\">109</span> KB</pre></td></tr><tr><td data-num=\"71\"></td><td><pre>    nsight-compute-2022.4.0.15 <span class=\"token operator\">|</span>                <span class=\"token number\">0</span>       <span class=\"token number\">764.0</span> MB  nvidia</pre></td></tr><tr><td data-num=\"72\"></td><td><pre>    pillow-9.2.0               <span class=\"token operator\">|</span>   py38hace64e9_1         <span class=\"token number\">666</span> KB</pre></td></tr><tr><td data-num=\"73\"></td><td><pre>    pytorch-1.4.0              <span class=\"token operator\">|</span>py3.8_cuda10.1.243_cudnn7.6.3_0       <span class=\"token number\">433.1</span> MB  pytorch</pre></td></tr><tr><td data-num=\"74\"></td><td><pre>    pytorch-cuda-11.7          <span class=\"token operator\">|</span>       h67b0de4_1           <span class=\"token number\">3</span> KB  pytorch</pre></td></tr><tr><td data-num=\"75\"></td><td><pre>    torchaudio-0.4.0           <span class=\"token operator\">|</span>             py38         <span class=\"token number\">6.1</span> MB  pytorch</pre></td></tr><tr><td data-num=\"76\"></td><td><pre>    torchvision-0.5.0          <span class=\"token operator\">|</span>       py38_cu101         <span class=\"token number\">9.1</span> MB  pytorch</pre></td></tr><tr><td data-num=\"77\"></td><td><pre>    ------------------------------------------------------------</pre></td></tr><tr><td data-num=\"78\"></td><td><pre>                                           Total:        <span class=\"token number\">3.91</span> GB</pre></td></tr><tr><td data-num=\"79\"></td><td><pre></pre></td></tr><tr><td data-num=\"80\"></td><td><pre>The following NEW packages will be INSTALLED:</pre></td></tr><tr><td data-num=\"81\"></td><td><pre></pre></td></tr><tr><td data-num=\"82\"></td><td><pre>  cuda               nvidia/linux-64::cuda-11.7.1-0</pre></td></tr><tr><td data-num=\"83\"></td><td><pre>  cuda-cccl          nvidia/linux-64::cuda-cccl-11.7.91-0</pre></td></tr><tr><td data-num=\"84\"></td><td><pre>  cuda-command-line~ nvidia/linux-64::cuda-command-line-tools-11.7.1-0</pre></td></tr><tr><td data-num=\"85\"></td><td><pre>  cuda-compiler      nvidia/linux-64::cuda-compiler-11.7.1-0</pre></td></tr><tr><td data-num=\"86\"></td><td><pre>  cuda-cudart        nvidia/linux-64::cuda-cudart-11.7.99-0</pre></td></tr><tr><td data-num=\"87\"></td><td><pre>  cuda-cudart-dev    nvidia/linux-64::cuda-cudart-dev-11.7.99-0</pre></td></tr><tr><td data-num=\"88\"></td><td><pre>  cuda-cuobjdump     nvidia/linux-64::cuda-cuobjdump-11.7.91-0</pre></td></tr><tr><td data-num=\"89\"></td><td><pre>  cuda-cupti         nvidia/linux-64::cuda-cupti-11.7.101-0</pre></td></tr><tr><td data-num=\"90\"></td><td><pre>  cuda-cuxxfilt      nvidia/linux-64::cuda-cuxxfilt-11.7.91-0</pre></td></tr><tr><td data-num=\"91\"></td><td><pre>  cuda-demo-suite    nvidia/linux-64::cuda-demo-suite-12.0.76-0</pre></td></tr><tr><td data-num=\"92\"></td><td><pre>  cuda-documentation nvidia/linux-64::cuda-documentation-12.0.76-0</pre></td></tr><tr><td data-num=\"93\"></td><td><pre>  cuda-driver-dev    nvidia/linux-64::cuda-driver-dev-11.7.99-0</pre></td></tr><tr><td data-num=\"94\"></td><td><pre>  cuda-gdb           nvidia/linux-64::cuda-gdb-12.0.90-0</pre></td></tr><tr><td data-num=\"95\"></td><td><pre>  cuda-libraries     nvidia/linux-64::cuda-libraries-11.7.1-0</pre></td></tr><tr><td data-num=\"96\"></td><td><pre>  cuda-libraries-dev nvidia/linux-64::cuda-libraries-dev-11.7.1-0</pre></td></tr><tr><td data-num=\"97\"></td><td><pre>  cuda-memcheck      nvidia/linux-64::cuda-memcheck-11.8.86-0</pre></td></tr><tr><td data-num=\"98\"></td><td><pre>  cuda-nsight        nvidia/linux-64::cuda-nsight-12.0.78-0</pre></td></tr><tr><td data-num=\"99\"></td><td><pre>  cuda-nsight-compu~ nvidia/linux-64::cuda-nsight-compute-12.0.0-0</pre></td></tr><tr><td data-num=\"100\"></td><td><pre>  cuda-nvcc          nvidia/linux-64::cuda-nvcc-11.7.99-0</pre></td></tr><tr><td data-num=\"101\"></td><td><pre>  cuda-nvdisasm      nvidia/linux-64::cuda-nvdisasm-12.0.76-0</pre></td></tr><tr><td data-num=\"102\"></td><td><pre>  cuda-nvml-dev      nvidia/linux-64::cuda-nvml-dev-11.7.91-0</pre></td></tr><tr><td data-num=\"103\"></td><td><pre>  cuda-nvprof        nvidia/linux-64::cuda-nvprof-12.0.90-0</pre></td></tr><tr><td data-num=\"104\"></td><td><pre>  cuda-nvprune       nvidia/linux-64::cuda-nvprune-11.7.91-0</pre></td></tr><tr><td data-num=\"105\"></td><td><pre>  cuda-nvrtc         nvidia/linux-64::cuda-nvrtc-11.7.99-0</pre></td></tr><tr><td data-num=\"106\"></td><td><pre>  cuda-nvrtc-dev     nvidia/linux-64::cuda-nvrtc-dev-11.7.99-0</pre></td></tr><tr><td data-num=\"107\"></td><td><pre>  cuda-nvtx          nvidia/linux-64::cuda-nvtx-11.7.91-0</pre></td></tr><tr><td data-num=\"108\"></td><td><pre>  cuda-nvvp          nvidia/linux-64::cuda-nvvp-12.0.90-0</pre></td></tr><tr><td data-num=\"109\"></td><td><pre>  cuda-runtime       nvidia/linux-64::cuda-runtime-11.7.1-0</pre></td></tr><tr><td data-num=\"110\"></td><td><pre>  cuda-sanitizer-api nvidia/linux-64::cuda-sanitizer-api-12.0.90-0</pre></td></tr><tr><td data-num=\"111\"></td><td><pre>  cuda-toolkit       nvidia/linux-64::cuda-toolkit-11.7.1-0</pre></td></tr><tr><td data-num=\"112\"></td><td><pre>  cuda-tools         nvidia/linux-64::cuda-tools-11.7.1-0</pre></td></tr><tr><td data-num=\"113\"></td><td><pre>  cuda-visual-tools  nvidia/linux-64::cuda-visual-tools-11.7.1-0</pre></td></tr><tr><td data-num=\"114\"></td><td><pre>  cudatoolkit        nvidia/linux-64::cudatoolkit-10.1.243-h036e899_8</pre></td></tr><tr><td data-num=\"115\"></td><td><pre>  gds-tools          nvidia/linux-64::gds-tools-1.5.0.59-0</pre></td></tr><tr><td data-num=\"116\"></td><td><pre>  intel-openmp       pkgs/main/linux-64::intel-openmp-2022.1.0-h9e868ea_3769</pre></td></tr><tr><td data-num=\"117\"></td><td><pre>  lcms2              pkgs/main/linux-64::lcms2-2.12-h3be6417_0</pre></td></tr><tr><td data-num=\"118\"></td><td><pre>  libcublas          nvidia/linux-64::libcublas-11.10.3.66-0</pre></td></tr><tr><td data-num=\"119\"></td><td><pre>  libcublas-dev      nvidia/linux-64::libcublas-dev-11.10.3.66-0</pre></td></tr><tr><td data-num=\"120\"></td><td><pre>  libcufft           nvidia/linux-64::libcufft-10.7.2.124-h4fbf590_0</pre></td></tr><tr><td data-num=\"121\"></td><td><pre>  libcufft-dev       nvidia/linux-64::libcufft-dev-10.7.2.124-h98a8f43_0</pre></td></tr><tr><td data-num=\"122\"></td><td><pre>  libcufile          nvidia/linux-64::libcufile-1.5.0.59-0</pre></td></tr><tr><td data-num=\"123\"></td><td><pre>  libcufile-dev      nvidia/linux-64::libcufile-dev-1.5.0.59-0</pre></td></tr><tr><td data-num=\"124\"></td><td><pre>  libcurand          nvidia/linux-64::libcurand-10.3.1.50-0</pre></td></tr><tr><td data-num=\"125\"></td><td><pre>  libcurand-dev      nvidia/linux-64::libcurand-dev-10.3.1.50-0</pre></td></tr><tr><td data-num=\"126\"></td><td><pre>  libcusolver        nvidia/linux-64::libcusolver-11.4.0.1-0</pre></td></tr><tr><td data-num=\"127\"></td><td><pre>  libcusolver-dev    nvidia/linux-64::libcusolver-dev-11.4.0.1-0</pre></td></tr><tr><td data-num=\"128\"></td><td><pre>  libcusparse        nvidia/linux-64::libcusparse-11.7.4.91-0</pre></td></tr><tr><td data-num=\"129\"></td><td><pre>  libcusparse-dev    nvidia/linux-64::libcusparse-dev-11.7.4.91-0</pre></td></tr><tr><td data-num=\"130\"></td><td><pre>  libnpp             nvidia/linux-64::libnpp-11.7.4.75-0</pre></td></tr><tr><td data-num=\"131\"></td><td><pre>  libnpp-dev         nvidia/linux-64::libnpp-dev-11.7.4.75-0</pre></td></tr><tr><td data-num=\"132\"></td><td><pre>  libnvjpeg          nvidia/linux-64::libnvjpeg-11.8.0.2-0</pre></td></tr><tr><td data-num=\"133\"></td><td><pre>  libnvjpeg-dev      nvidia/linux-64::libnvjpeg-dev-11.8.0.2-0</pre></td></tr><tr><td data-num=\"134\"></td><td><pre>  mkl                pkgs/main/linux-64::mkl-2022.1.0-hc2b9512_224</pre></td></tr><tr><td data-num=\"135\"></td><td><pre>  ninja              pkgs/main/linux-64::ninja-1.10.2-h06a4308_5</pre></td></tr><tr><td data-num=\"136\"></td><td><pre>  ninja-base         pkgs/main/linux-64::ninja-base-1.10.2-hd09550d_5</pre></td></tr><tr><td data-num=\"137\"></td><td><pre>  nsight-compute     nvidia/linux-64::nsight-compute-2022.4.0.15-0</pre></td></tr><tr><td data-num=\"138\"></td><td><pre>  pillow             pkgs/main/linux-64::pillow-9.2.0-py38hace64e9_1</pre></td></tr><tr><td data-num=\"139\"></td><td><pre>  pytorch            pytorch/linux-64::pytorch-1.4.0-py3.8_cuda10.1.243_cudnn7.6.3_0</pre></td></tr><tr><td data-num=\"140\"></td><td><pre>  pytorch-cuda       pytorch/noarch::pytorch-cuda-11.7-h67b0de4_1</pre></td></tr><tr><td data-num=\"141\"></td><td><pre>  six                pkgs/main/noarch::six-1.16.0-pyhd3eb1b0_1</pre></td></tr><tr><td data-num=\"142\"></td><td><pre>  torchaudio         pytorch/linux-64::torchaudio-0.4.0-py38</pre></td></tr><tr><td data-num=\"143\"></td><td><pre>  torchvision        pytorch/linux-64::torchvision-0.5.0-py38_cu101</pre></td></tr></table></figure><p>贴一张安装过程中的截图哈哈</p>\n<p>安装成功！用 <code>nvcc -V</code>  命令测试一下是否能正常输出，成功输出，如下图</p>\n<p class=\"gallery\" data-height=\"280\"><img data-src=\"https://image.aayu.today/uploads/2022/12/18/202212182247894.png\" alt=\"\" /><br />\n<img data-src=\"https://image.aayu.today/uploads/2022/12/18/202212182327537.png\" alt=\"\" /></p>\n<p>导入 Pytorch 测试一下，正确链接到 GPU，并识别出显卡</p>\n<p><img data-src=\"https://image.aayu.today/uploads/2022/12/19/202212190031485.png\" alt=\"\" width=\"800px\" /></p>\n<h3 id=\"测试nvcc\"><a class=\"anchor\" href=\"#测试nvcc\">#</a> 测试 Nvcc</h3>\n<p>编写一个 cuda 脚本</p>\n<figure class=\"highlight cpp\"><figcaption data-lang=\"C++\"><span>cuda_test_1.cu</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">\"cuda_runtime.h\"</span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;stdlib.h></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;assert.h></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;iostream></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\">// Device code</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>__global__ <span class=\"token keyword\">void</span> <span class=\"token function\">VecAdd</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">float</span><span class=\"token operator\">*</span> A<span class=\"token punctuation\">,</span> <span class=\"token keyword\">float</span><span class=\"token operator\">*</span> B<span class=\"token punctuation\">,</span> <span class=\"token keyword\">float</span><span class=\"token operator\">*</span> C<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> threadIdx<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    C<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> A<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> B<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token comment\">// Host code</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token keyword\">int</span> N <span class=\"token operator\">=</span> <span class=\"token number\">1024</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    size_t size <span class=\"token operator\">=</span> N <span class=\"token operator\">*</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">float</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token comment\">// Allocate input vectors h_A and h_B in host memory</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token keyword\">float</span><span class=\"token operator\">*</span> h_A <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">float</span><span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token function\">malloc</span><span class=\"token punctuation\">(</span>size<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token keyword\">float</span><span class=\"token operator\">*</span> h_B <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">float</span><span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token function\">malloc</span><span class=\"token punctuation\">(</span>size<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token keyword\">float</span><span class=\"token operator\">*</span> h_C <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">float</span><span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token function\">malloc</span><span class=\"token punctuation\">(</span>size<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token comment\">// Initialize input vectors</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>size_t i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> N<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>        h_A<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">1.</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>        h_B<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">2.</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>    <span class=\"token comment\">// Allocate vectors in device memory</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    <span class=\"token keyword\">float</span><span class=\"token operator\">*</span> d_A<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>    <span class=\"token function\">cudaMalloc</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>d_A<span class=\"token punctuation\">,</span> size<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    <span class=\"token keyword\">float</span><span class=\"token operator\">*</span> d_B<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>    <span class=\"token function\">cudaMalloc</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>d_B<span class=\"token punctuation\">,</span> size<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>    <span class=\"token keyword\">float</span><span class=\"token operator\">*</span> d_C<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>    <span class=\"token function\">cudaMalloc</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>d_C<span class=\"token punctuation\">,</span> size<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>    <span class=\"token comment\">// Copy vectors from host memory to device memory</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>    <span class=\"token function\">cudaMemcpy</span><span class=\"token punctuation\">(</span>d_A<span class=\"token punctuation\">,</span> h_A<span class=\"token punctuation\">,</span> size<span class=\"token punctuation\">,</span> cudaMemcpyHostToDevice<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>    <span class=\"token function\">cudaMemcpy</span><span class=\"token punctuation\">(</span>d_B<span class=\"token punctuation\">,</span> h_B<span class=\"token punctuation\">,</span> size<span class=\"token punctuation\">,</span> cudaMemcpyHostToDevice<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>    <span class=\"token comment\">// Kernel invocation with N threads</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>    VecAdd<span class=\"token operator\">&lt;&lt;</span><span class=\"token operator\">&lt;</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> N<span class=\"token operator\">>></span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>d_A<span class=\"token punctuation\">,</span> d_B<span class=\"token punctuation\">,</span> d_C<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>    <span class=\"token comment\">// Copy result from device memory to host memory</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>    <span class=\"token comment\">// h_C contains the result in host memory</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>    <span class=\"token function\">cudaMemcpy</span><span class=\"token punctuation\">(</span>h_C<span class=\"token punctuation\">,</span> d_C<span class=\"token punctuation\">,</span> size<span class=\"token punctuation\">,</span> cudaMemcpyDeviceToHost<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>size_t i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> N<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>        <span class=\"token function\">assert</span><span class=\"token punctuation\">(</span>h_C<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> <span class=\"token number\">3.</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>    std<span class=\"token double-colon punctuation\">::</span>cout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"\\t\\t\\t\\tDONE!\"</span> <span class=\"token operator\">&lt;&lt;</span> std<span class=\"token double-colon punctuation\">::</span>endl<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>    <span class=\"token comment\">// Free device memory</span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre>    <span class=\"token function\">cudaFree</span><span class=\"token punctuation\">(</span>d_A<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>    <span class=\"token function\">cudaFree</span><span class=\"token punctuation\">(</span>d_B<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre>    <span class=\"token function\">cudaFree</span><span class=\"token punctuation\">(</span>d_C<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre></pre></td></tr><tr><td data-num=\"59\"></td><td><pre>    <span class=\"token comment\">// Free host memory</span></pre></td></tr><tr><td data-num=\"60\"></td><td><pre>    <span class=\"token function\">free</span><span class=\"token punctuation\">(</span>h_A<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre>    <span class=\"token function\">free</span><span class=\"token punctuation\">(</span>h_B<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre>    <span class=\"token function\">free</span><span class=\"token punctuation\">(</span>h_C<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"63\"></td><td><pre></pre></td></tr><tr><td data-num=\"64\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"65\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>然后在刚刚安装了 cuda 的 python 环境下用以下命令编译</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>nvcc cuda_test_1.cu -o cuda_test_1</pre></td></tr></table></figure><div class=\"note info\">\n<p>如果报 <code>gcc: No such file or directory</code> ，则需要用如下命令安装 gcc 及调试工具</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> build-essential gdb</pre></td></tr></table></figure><p>安装完成后用 <code>gcc --version</code>  测试一下，由正常输出即安装成功</p>\n</div>\n<p>编译成功后用 <code>./cuda_test_1</code>  运行，成功运行如下图</p>\n<p><img data-src=\"https://image.aayu.today/uploads/2022/12/19/202212191538223.png\" alt=\"\" width=\"800px\" /></p>\n<p>大功告成！</p>\n<h2 id=\"参考链接\"><a class=\"anchor\" href=\"#参考链接\">#</a> 参考链接</h2>\n<ul>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3JlYWQvY3YxNDYwODU0Nw==\">Windows10/11 WSL2 安装 nvidia-cuda 驱动</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2l3YW52YW4vYXJ0aWNsZS9kZXRhaWxzLzEyMjExOTU5NQ==\">Windows 11/10 WSL2 Ubuntu 20.04 下配置 Cuda 及 Pytorch</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMTVRNHkxaTdCcC8/cD0y\">【PyTorch】B 站首个，终于有人把 GPU/ CUDA/cuDNN 讲清楚了</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2d0ZjIxNTk5ODMxNS9hcnRpY2xlL2RldGFpbHMvMTA1MzU5NzQz\">【资源记录】各个历史版本 cuda toolkit 下载链接</span></li>\n</ul>\n",
            "tags": [
                "人工智能",
                "基础知识",
                "win11",
                "wsl",
                "nvidia"
            ]
        },
        {
            "id": "https://blog.aayu.today/artificial-intelligence/basic/20221207/",
            "url": "https://blog.aayu.today/artificial-intelligence/basic/20221207/",
            "title": "VSCode配置C++和Python编译和调试环境",
            "date_published": "2022-12-09T15:16:27.000Z",
            "content_html": "<h2 id=\"vscode配置\"><a class=\"anchor\" href=\"#vscode配置\">#</a> VSCode 配置</h2>\n<ul>\n<li>Visual Studio Code 下载地址：<span class=\"exturl\" data-url=\"aHR0cHM6Ly9jb2RlLnZpc3VhbHN0dWRpby5jb20vZG93bmxvYWQ=\">https://code.visualstudio.com/download</span></li>\n<li>VS Code 建议安装插件列表：\n<ul>\n<li>中文菜单：\n<ul>\n<li>MS-CEINTL.vscode-language-pack-zh-hans</li>\n</ul>\n</li>\n<li>SSH 远程开发：\n<ul>\n<li>ms-vscode-remote.remote-ssh</li>\n<li>ms-vscode-remote.remote-ssh-edit</li>\n<li>ms-vscode.remote-explorer</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>C++ 开发\n<ul>\n<li>ms-vscode.cpptools</li>\n</ul>\n</li>\n<li>python 开发\n<ul>\n<li>ms-python.python</li>\n</ul>\n</li>\n<li>代码补全\n<ul>\n<li>GitHub.copilot</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"ssh连接远端linux主机\"><a class=\"anchor\" href=\"#ssh连接远端linux主机\">#</a> SSH 连接远端 Linux 主机</h2>\n<p>点击 VSCode 左下角的 &gt;&lt; 符号，创建一个新的 SSH 连接，输入连接命令即可打开新的窗口，然后正确输入密码即可连接到远端的 Linux 主机</p>\n<h2 id=\"linux配置\"><a class=\"anchor\" href=\"#linux配置\">#</a> Linux 配置</h2>\n<h3 id=\"安装miniconda\"><a class=\"anchor\" href=\"#安装miniconda\">#</a> 安装 miniconda</h3>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">wget</span> https://repo.anaconda.com/miniconda/Miniconda3-py39_4.12.0-Linux-x86_64.sh</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">bash</span> Miniconda3-py39_4.12.0-Linux-x86_64.sh</pre></td></tr></table></figure><p>默认会安装在用户目录下，保持默认即可</p>\n<p>安装完成后用 <code>source .bashrc</code>  刷新配置文件，即可看见命令行前面有个 <code>(base)</code>  前缀，即安装成功</p>\n<h3 id=\"安装opencv\"><a class=\"anchor\" href=\"#安装opencv\">#</a> 安装 opencv</h3>\n<p>如果用 <code>conda install opencv</code>  命令安装成功后，import cv2 可能还会报错，缺少一个依赖，运行下列命令安装依赖</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> update</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> libgl1-mesa-glx</pre></td></tr></table></figure><p>如果用 pip 安装 mediapipe 速度慢，可以在用户目录下创建 <code>.pip/pip.conf</code>  文件，然后配置如下内容</p>\n<figure class=\"highlight ini\"><figcaption data-lang=\"ini\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token header\"><span class=\"token punctuation\">[</span><span class=\"token section-name selector\">global</span><span class=\"token punctuation\">]</span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token key attr-name\">index-url</span> <span class=\"token punctuation\">=</span> <span class=\"token value attr-value\">https://pypi.tuna.tsinghua.edu.cn/simple/</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token header\"><span class=\"token punctuation\">[</span><span class=\"token section-name selector\">install</span><span class=\"token punctuation\">]</span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token key attr-name\">trusted-host</span> <span class=\"token punctuation\">=</span> <span class=\"token value attr-value\">pypi.tuna.tsinghua.edu.cn</span></pre></td></tr></table></figure><p>然后重启命令行，再次用 <code>pip install mediapipe</code>  即可满速</p>\n<h3 id=\"安装g\"><a class=\"anchor\" href=\"#安装g\">#</a> 安装 g++</h3>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> update</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> build-essential</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token function\">which</span> g++</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>gcc --version</pre></td></tr></table></figure><p>这个命令将会安装一系列软件包，包括 gcc,g++, 和 make</p>\n<h3 id=\"安装gdb\"><a class=\"anchor\" href=\"#安装gdb\">#</a> 安装 gdb</h3>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> update</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> gdb</pre></td></tr></table></figure><h2 id=\"测试python\"><a class=\"anchor\" href=\"#测试python\">#</a> 测试 Python</h2>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># python 代码测试</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># 计算 1+2+3+4+5 的和</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token builtin\">sum</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token builtin\">sum</span> <span class=\"token operator\">+=</span> i</pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\"># 打印结果</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">sum</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>debuger 配置.vscode 下 launch.json 添加</p>\n<figure class=\"highlight json\"><figcaption data-lang=\"JSON\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token comment\">// Use IntelliSense to learn about possible attributes.</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token comment\">// Hover to view descriptions of existing attributes.</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token comment\">// For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token property\">\"version\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"0.2.0\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token property\">\"configurations\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>            <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Python: Current File\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>            <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"python\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>            <span class=\"token property\">\"request\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"launch\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>            <span class=\"token property\">\"program\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"$&#123;file&#125;\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>            <span class=\"token property\">\"console\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"integratedTerminal\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>            <span class=\"token property\">\"justMyCode\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>  <span class=\"token comment\">//false 表示可以进入第三方库（如 Pytorch）里进行调试</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h2 id=\"测试c\"><a class=\"anchor\" href=\"#测试c\">#</a> 测试 C++</h2>\n<figure class=\"highlight cpp\"><figcaption data-lang=\"C++\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;iostream></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">using</span> <span class=\"token keyword\">namespace</span> std<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token comment\">// 计算 1+2+3+4+5</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">int</span> sum <span class=\"token punctuation\">&#123;</span><span class=\"token number\">0</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token punctuation\">&#123;</span><span class=\"token number\">0</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">5</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        sum <span class=\"token operator\">+=</span> i<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token comment\">// 输出结果</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    cout <span class=\"token operator\">&lt;&lt;</span> sum <span class=\"token operator\">&lt;&lt;</span> endl<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><ul>\n<li>方法一：用 g++  main.cpp -o main 生成可执行文件</li>\n<li>方法二：在.vscode 先添加 tasks.json</li>\n</ul>\n<figure class=\"highlight json\"><figcaption data-lang=\"JSON\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>\t<span class=\"token property\">\"version\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2.0.0\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>\t<span class=\"token property\">\"tasks\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>\t  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>\t\t<span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"cppbuild\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>\t\t<span class=\"token property\">\"label\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"C/C++: g++ 生成活动文件\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>\t\t<span class=\"token property\">\"command\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/usr/bin/g++\"</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">//g++ 的路径</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>\t\t<span class=\"token property\">\"args\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>\t\t  <span class=\"token string\">\"-fdiagnostics-color=always\"</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 颜色</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>\t\t  <span class=\"token string\">\"-g\"</span><span class=\"token punctuation\">,</span>  <span class=\"token comment\">// 调试信息</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>\t\t  <span class=\"token string\">\"-Wall\"</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 开启所有警告</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>\t\t  <span class=\"token string\">\"-std=c++14\"</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">//c++14 标准</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>\t\t  <span class=\"token string\">\"$&#123;file&#125;\"</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 文件本身，仅适用于 C++ 基础知识教学，无法同时编译所有文件</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>\t\t  <span class=\"token comment\">// \"$&#123;fileDirname&#125;/*.cpp\", // 文件所在的文件夹路径下所有 cpp 文件</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>\t\t  <span class=\"token string\">\"-o\"</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 输出</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>\t\t  <span class=\"token string\">\"$&#123;workspaceFolder&#125;/release/$&#123;fileBasenameNoExtension&#125;\"</span> <span class=\"token comment\">// 文件所在的文件夹路径 /release/ 当前文件的文件名，不带后缀</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>\t\t<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>\t\t<span class=\"token property\">\"options\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>\t\t  <span class=\"token property\">\"cwd\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"$&#123;fileDirname&#125;\"</span> <span class=\"token comment\">// 文件所在的文件夹路径</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>\t\t<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>\t\t<span class=\"token property\">\"problemMatcher\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>\t\t  <span class=\"token string\">\"$gcc\"</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>\t\t<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>\t\t<span class=\"token property\">\"group\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>\t\t  <span class=\"token property\">\"kind\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"build\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>\t\t  <span class=\"token property\">\"isDefault\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>\t\t<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>\t\t<span class=\"token property\">\"detail\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"编译器: /usr/bin/g++\"</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>\t  <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>\t<span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>需要 debuger，launch.json 修改为：</p>\n<figure class=\"highlight json\"><figcaption data-lang=\"JSON\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token comment\">// Use IntelliSense to learn about possible attributes.</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token comment\">// Hover to view descriptions of existing attributes.</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token comment\">// For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token property\">\"version\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"0.2.0\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token property\">\"configurations\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>            <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"C++ 调试 (gdb) Launch\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>            <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"cppdbg\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>            <span class=\"token property\">\"request\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"launch\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>            <span class=\"token property\">\"program\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"$&#123;workspaceFolder&#125;/release/$&#123;fileBasenameNoExtension&#125;\"</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 文件所在的文件夹路径 /release/ 当前文件的文件名，不带后缀</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>            <span class=\"token property\">\"args\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>            <span class=\"token property\">\"stopAtEntry\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>            <span class=\"token property\">\"cwd\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"$&#123;fileDirname&#125;\"</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 文件所在的文件夹路径</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>            <span class=\"token property\">\"environment\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>            <span class=\"token property\">\"externalConsole\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>            <span class=\"token property\">\"MIMode\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"gdb\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>            <span class=\"token property\">\"setupCommands\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>                <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>                    <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Enable pretty-printing for gdb\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>                    <span class=\"token property\">\"text\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"-enable-pretty-printing\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>                    <span class=\"token property\">\"ignoreFailures\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>                <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>                    <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Set Disassembly Flavor to Intel\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>                    <span class=\"token property\">\"text\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"-gdb-set disassembly-flavor intel\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>                    <span class=\"token property\">\"ignoreFailures\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>                <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>            <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>            <span class=\"token property\">\"preLaunchTask\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"C/C++: g++ 生成活动文件\"</span>  <span class=\"token comment\">//tasks.json 的 label</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>            <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Python: Current File\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>            <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"python\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>            <span class=\"token property\">\"request\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"launch\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>            <span class=\"token property\">\"program\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"$&#123;file&#125;\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>            <span class=\"token property\">\"console\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"integratedTerminal\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>            <span class=\"token property\">\"justMyCode\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>    <span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h2 id=\"vscode中变量解释\"><a class=\"anchor\" href=\"#vscode中变量解释\">#</a> VSCode 中变量解释</h2>\n<ul>\n<li><code>$&#123;workspaceFolder&#125;</code>  : 表示当前 workspace 文件夹路径，也即 /home/Coding/Test</li>\n<li><code>$&#123;workspaceRootFolderName&#125;</code> : 表示 workspace 的文件夹名，也即 Test</li>\n<li><code>$&#123;file&#125;</code> : 文件自身的绝对路径，也即 /home/Coding/Test/.vscode/tasks.json</li>\n<li><code>$&#123;relativeFile&#125;</code> : 文件在 workspace 中的路径，也即.vscode/tasks.json</li>\n<li><code>$&#123;fileBasenameNoExtension&#125;</code> : 当前文件的文件名，不带后缀，也即 tasks</li>\n<li><code>$&#123;fileBasename&#125;</code> : 当前文件的文件名，tasks.json</li>\n<li><code>$&#123;fileDirname&#125;</code> : 文件所在的文件夹路径，也即 /home/Coding/Test/.vscode</li>\n<li><code>$&#123;fileExtname&#125;</code> : 当前文件的后缀，也即.json</li>\n<li><code>$&#123;lineNumber&#125;</code> : 当前文件光标所在的行号</li>\n<li><code>$&#123;env:PATH&#125;</code> : 系统中的环境变量</li>\n</ul>\n<h2 id=\"参考链接\"><a class=\"anchor\" href=\"#参考链接\">#</a> 参考链接</h2>\n<ul>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2hoZDE5ODgvYXJ0aWNsZS9kZXRhaWxzLzEyMzY1MTQ3Ng==\">Ubuntu ：20.04 上安装 gcc/g++7.5</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vZGJubi9wLzE2MzE1MzE2Lmh0bWw=\">vscode error: Please specify the &quot;MIDebuggerPath&quot; option</span></li>\n</ul>\n",
            "tags": [
                "人工智能",
                "基础知识",
                "python",
                "c++"
            ]
        },
        {
            "id": "https://blog.aayu.today/artificial-intelligence/machine-learning/hmm/20221207/",
            "url": "https://blog.aayu.today/artificial-intelligence/machine-learning/hmm/20221207/",
            "title": "隐马尔科夫模型",
            "date_published": "2022-12-07T06:59:32.000Z",
            "content_html": "<h2 id=\"基本概念\"><a class=\"anchor\" href=\"#基本概念\">#</a> 基本概念</h2>\n<h3 id=\"一个模型\"><a class=\"anchor\" href=\"#一个模型\">#</a> 一个模型</h3>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>λ</mi><mo>=</mo><mo stretchy=\"false\">(</mo><mi>π</mi><mo separator=\"true\">,</mo><mi>A</mi><mo separator=\"true\">,</mo><mi>B</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\lambda=(\\pi, A, B)\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">λ</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">π</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\">A</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">B</span><span class=\"mclose\">)</span></span></span></span></span></p>\n<p>其中：</p>\n<ul>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>π</mi></mrow><annotation encoding=\"application/x-tex\">\\pi</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">π</span></span></span></span>：初始概率分布</li>\n<li>A：<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><msub><mi>a</mi><mrow><mi>i</mi><mo separator=\"true\">,</mo><mi>j</mi></mrow></msub><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">[a_{i,j}]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.036108em;vertical-align:-0.286108em;\"></span><span class=\"mopen\">[</span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mpunct mtight\">,</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mclose\">]</span></span></span></span> —&gt; 转移矩阵，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>a</mi><mrow><mi>i</mi><mo separator=\"true\">,</mo><mi>j</mi></mrow></msub><mo>=</mo><mi>P</mi><mo stretchy=\"false\">(</mo><msub><mi>i</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>=</mo><msub><mi>q</mi><mi>j</mi></msub><mi mathvariant=\"normal\">∣</mi><msub><mi>i</mi><mi>t</mi></msub><mo>=</mo><msub><mi>q</mi><mi>i</mi></msub><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">a_{i,j}=P(i_{t+1}=q_j|i_t=q_i)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.716668em;vertical-align:-0.286108em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mpunct mtight\">,</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">i</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.301108em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">t</span><span class=\"mbin mtight\">+</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.208331em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.036108em;vertical-align:-0.286108em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">q</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mord\">∣</span><span class=\"mord\"><span class=\"mord mathnormal\">i</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2805559999999999em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">q</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span></li>\n<li>B：<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><msub><mi>b</mi><mi>j</mi></msub><mo stretchy=\"false\">(</mo><mi>k</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">[b_j(k)]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.036108em;vertical-align:-0.286108em;\"></span><span class=\"mopen\">[</span><span class=\"mord\"><span class=\"mord mathnormal\">b</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span><span class=\"mclose\">)</span><span class=\"mclose\">]</span></span></span></span> —&gt; 发射矩阵，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>b</mi><mi>j</mi></msub><mo stretchy=\"false\">(</mo><mi>k</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>P</mi><mo stretchy=\"false\">(</mo><msub><mi>O</mi><mi>t</mi></msub><mo>=</mo><msub><mi>v</mi><mi>k</mi></msub><mi mathvariant=\"normal\">∣</mi><msub><mi>i</mi><mi>t</mi></msub><mo>=</mo><msub><mi>q</mi><mi>j</mi></msub><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">b_j(k)=P(O_t=v_k|i_t=q_j)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.036108em;vertical-align:-0.286108em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">b</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2805559999999999em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\">∣</span><span class=\"mord\"><span class=\"mord mathnormal\">i</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2805559999999999em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.036108em;vertical-align:-0.286108em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">q</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span></li>\n</ul>\n<h3 id=\"两个假设\"><a class=\"anchor\" href=\"#两个假设\">#</a> 两个假设</h3>\n<ol>\n<li>齐次 Markov</li>\n</ol>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>P</mi><mo stretchy=\"false\">(</mo><msub><mi>i</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mi mathvariant=\"normal\">∣</mi><msub><mi>i</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>⋯</mo><mtext> </mtext><mo separator=\"true\">,</mo><msub><mi>i</mi><mi>t</mi></msub><mo separator=\"true\">,</mo><msub><mi>o</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>⋯</mo><mtext> </mtext><mo separator=\"true\">,</mo><msub><mi>o</mi><mi>t</mi></msub><mo stretchy=\"false\">)</mo><mo>=</mo><mi>P</mi><mo stretchy=\"false\">(</mo><msub><mi>i</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mi mathvariant=\"normal\">∣</mi><msub><mi>i</mi><mi>t</mi></msub><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">P(i_{t+1}|i_1,\\cdots,i_t,o_1,\\cdots,o_t)=P(i_{t+1}|i_t)\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">i</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.301108em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">t</span><span class=\"mbin mtight\">+</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.208331em;\"><span></span></span></span></span></span></span><span class=\"mord\">∣</span><span class=\"mord\"><span class=\"mord mathnormal\">i</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">⋯</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">i</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2805559999999999em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">o</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">⋯</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">o</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2805559999999999em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">i</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.301108em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">t</span><span class=\"mbin mtight\">+</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.208331em;\"><span></span></span></span></span></span></span><span class=\"mord\">∣</span><span class=\"mord\"><span class=\"mord mathnormal\">i</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2805559999999999em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span></span></p>\n<ol start=\"2\">\n<li>观测独立</li>\n</ol>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>P</mi><mo stretchy=\"false\">(</mo><msub><mi>o</mi><mi>t</mi></msub><mi mathvariant=\"normal\">∣</mi><msub><mi>i</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>⋯</mo><mtext> </mtext><mo separator=\"true\">,</mo><msub><mi>i</mi><mi>t</mi></msub><mo separator=\"true\">,</mo><msub><mi>o</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>⋯</mo><mtext> </mtext><mo separator=\"true\">,</mo><msub><mi>o</mi><mi>t</mi></msub><mo stretchy=\"false\">)</mo><mo>=</mo><mi>P</mi><mo stretchy=\"false\">(</mo><msub><mi>o</mi><mi>t</mi></msub><mi mathvariant=\"normal\">∣</mi><msub><mi>i</mi><mi>t</mi></msub><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">P(o_t|i_1,\\cdots,i_t,o_1,\\cdots,o_t)=P(o_t|i_t)\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">o</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2805559999999999em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\">∣</span><span class=\"mord\"><span class=\"mord mathnormal\">i</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">⋯</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">i</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2805559999999999em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">o</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"minner\">⋯</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">o</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2805559999999999em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">o</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2805559999999999em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\">∣</span><span class=\"mord\"><span class=\"mord mathnormal\">i</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2805559999999999em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span></span></p>\n<h3 id=\"三个问题\"><a class=\"anchor\" href=\"#三个问题\">#</a> 三个问题</h3>\n<ol>\n<li>\n<p>Evaluation</p>\n</li>\n<li>\n<p>Learning</p>\n</li>\n<li>\n<p>Decoding</p>\n</li>\n</ol>\n",
            "tags": [
                "人工智能",
                "机器学习",
                "隐马尔可夫模型",
                "隐马尔可夫模型"
            ]
        },
        {
            "id": "https://blog.aayu.today/fpv/20221127/",
            "url": "https://blog.aayu.today/fpv/20221127/",
            "title": "开源遥控器设置自定义语音包教程",
            "date_published": "2022-11-27T08:09:59.000Z",
            "content_html": "<h2 id=\"图片\"><a class=\"anchor\" href=\"#图片\">#</a> 图片</h2>\n<p><img data-src=\"https://image.aayu.today/uploads/2022/11/27/202211271556183.png\" alt=\"\" /></p>\n<h2 id=\"下载语音包\"><a class=\"anchor\" href=\"#下载语音包\">#</a> 下载语音包</h2>\n<p>在「 FPV 帮 」里可以找到许多语音包，链接如下：<br />\n<span class=\"exturl\" data-url=\"aHR0cDovL2ZwdmJhbmcuY29tL2ZvcnVtLTU1LTEuaHRtbA==\">http://fpvbang.com/forum-55-1.html</span></p>\n<h2 id=\"参考链接\"><a class=\"anchor\" href=\"#参考链接\">#</a> 参考链接</h2>\n<ul>\n<li><span class=\"exturl\" data-url=\"aHR0cDovL2ZwdmJhbmcuY29tL3RocmVhZC0xOTQyLTEtMS5odG1s\">OPENTX 遥控器语音设置教程</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMXFQNHkxczdkMT9wPTI=\">OpenTX，EdgeTX 语音包设置视频教程</span></li>\n</ul>\n",
            "tags": [
                "FPV"
            ]
        },
        {
            "id": "https://blog.aayu.today/hardware/zigbee/20221101/",
            "url": "https://blog.aayu.today/hardware/zigbee/20221101/",
            "title": "基于ZigBee协议栈的DS18B20温度传感器驱动",
            "date_published": "2022-11-01T09:04:48.000Z",
            "content_html": "<h2 id=\"前言\"><a class=\"anchor\" href=\"#前言\">#</a> 前言</h2>\n<p>最近再搞农业物联网的项目，用到了 ZigBee 协议栈，需求之一是要监测土壤温度的数据，便采购了「 善学坊 」家的「 YTWD-A1 」传感器，其本质是 DS18B20 芯片，但网上关于这个芯片的数据读取方式多是 51 单片机或 STM32 相关的代码，经过自己的一番踩坑和实验，终于在 ZigBee 协议栈下写好了这个芯片的驱动，便在此记录下来，希望能帮助到有需要的小伙伴～</p>\n<p><img data-src=\"https://image.aayu.today/uploads/2022/11/01/202211011901441.png\" alt=\"\" width=\"400px\" /></p>\n<h2 id=\"相关代码\"><a class=\"anchor\" href=\"#相关代码\">#</a> 相关代码</h2>\n<figure class=\"highlight c\"><figcaption data-lang=\"c\"><span>ds18b20.h</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">ifndef</span> <span class=\"token expression\">HAL_DS18B20_H</span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">HAL_DS18B20_H</span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">ifdef</span> <span class=\"token expression\">__cplusplus</span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">extern</span> <span class=\"token string\">\"C\"</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">endif</span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\">/** @brief   YTWD GPIO. */</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">HAL_DS18B20_PORT</span>  <span class=\"token expression\"><span class=\"token number\">1</span> </span><span class=\"token comment\">//!&lt; Port1.</span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">HAL_DS18B20_PIN</span>   <span class=\"token expression\"><span class=\"token number\">2</span> </span><span class=\"token comment\">//!&lt; Pin2.</span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>   </pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token comment\">/** @brief   DHT11 Data. */</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">typedef</span> <span class=\"token keyword\">struct</span>  <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token keyword\">unsigned</span> <span class=\"token keyword\">char</span> ok<span class=\"token punctuation\">;</span>   <span class=\"token comment\">//!&lt; Is ok?</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token keyword\">unsigned</span> <span class=\"token keyword\">char</span> fg<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token keyword\">unsigned</span> <span class=\"token keyword\">char</span> xs<span class=\"token punctuation\">;</span> <span class=\"token comment\">//!&lt; xiaoshu.</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token keyword\">unsigned</span> <span class=\"token keyword\">char</span> zs<span class=\"token punctuation\">;</span> <span class=\"token comment\">//!&lt; zhengshu.</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token punctuation\">&#125;</span> <span class=\"token class-name\">halDS18B20Data_t</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"21\"></td><td><pre> * @fn      halDS18B20Init</pre></td></tr><tr><td data-num=\"22\"></td><td><pre> * </pre></td></tr><tr><td data-num=\"23\"></td><td><pre> * @brief\tInit. DS18B20.</pre></td></tr><tr><td data-num=\"24\"></td><td><pre> */</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token keyword\">unsigned</span> <span class=\"token keyword\">char</span> <span class=\"token function\">halDS18B20Init</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">void</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>   </pre></td></tr><tr><td data-num=\"26\"></td><td><pre>   </pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"28\"></td><td><pre> * @fn      halDHT11GetData</pre></td></tr><tr><td data-num=\"29\"></td><td><pre> * </pre></td></tr><tr><td data-num=\"30\"></td><td><pre> * @brief\tGet data from DS18B20.</pre></td></tr><tr><td data-num=\"31\"></td><td><pre> *</pre></td></tr><tr><td data-num=\"32\"></td><td><pre> * @return  xs&amp;zs value if ok is 1.</pre></td></tr><tr><td data-num=\"33\"></td><td><pre> */</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre><span class=\"token class-name\">halDS18B20Data_t</span>  <span class=\"token function\">halDS18B20GetData</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">void</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre></pre></td></tr><tr><td data-num=\"36\"></td><td><pre><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">ifdef</span> <span class=\"token expression\">__cplusplus</span></span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">endif</span></span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre></pre></td></tr><tr><td data-num=\"40\"></td><td><pre><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">endif</span> <span class=\"token comment\">/* #ifndef HAL_DS18B20_H */</span></span></pre></td></tr></table></figure><figure class=\"highlight c\"><figcaption data-lang=\"c\"><span>ds18b20.c</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">\"hal_ds18b20.h\"</span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">\"hal_delay.h\"</span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">\"cc2530_ioctl.h\"</span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">\"hal_lcd.h\"</span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;stdio.h></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\">/* Boolean value. */</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">HAL_DS18B20_FALSE</span>         <span class=\"token expression\"><span class=\"token number\">0</span></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">HAL_DS18B20_TRUE</span>          <span class=\"token expression\"><span class=\"token number\">1</span></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token comment\">/* Delay Functions. */</span>   </pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name function\">HAL_DS18B20_DELAY_US</span><span class=\"token expression\"><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span>   <span class=\"token function\">delayUsIn32Mhz</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name function\">HAL_DS18B20_DELAY_MS</span><span class=\"token expression\"><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span>   <span class=\"token function\">delayMs</span><span class=\"token punctuation\">(</span>SYSCLK_32MHZ <span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token comment\">/* Set DS18B20 GPIO mode. */</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name function\">HAL_DS18B20_IO_OUTPUT</span><span class=\"token expression\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>         <span class=\"token function\">CC2530_IOCTL</span><span class=\"token punctuation\">(</span>HAL_DS18B20_PORT<span class=\"token punctuation\">,</span> HAL_DS18B20_PIN<span class=\"token punctuation\">,</span> CC2530_OUTPUT<span class=\"token punctuation\">)</span></span></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name function\">HAL_DS18B20_IO_PULLDOWN</span><span class=\"token expression\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>       <span class=\"token function\">CC2530_IOCTL</span><span class=\"token punctuation\">(</span>HAL_DS18B20_PORT<span class=\"token punctuation\">,</span> HAL_DS18B20_PIN<span class=\"token punctuation\">,</span> CC2530_INPUT_PULLDOWN<span class=\"token punctuation\">)</span></span></span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name function\">HAL_DS18B20_IO_PULLUP</span><span class=\"token expression\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>         <span class=\"token function\">CC2530_IOCTL</span><span class=\"token punctuation\">(</span>HAL_DS18B20_PORT<span class=\"token punctuation\">,</span> HAL_DS18B20_PIN<span class=\"token punctuation\">,</span> CC2530_INPUT_PULLUP<span class=\"token punctuation\">)</span></span></span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token comment\">/* Set DS18B20 GPIO Level. */</span> </pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name function\">HAL_DS18B20_IO_SET</span><span class=\"token expression\"><span class=\"token punctuation\">(</span>port<span class=\"token punctuation\">,</span> pin<span class=\"token punctuation\">,</span> level<span class=\"token punctuation\">)</span> <span class=\"token keyword\">do</span> <span class=\"token punctuation\">&#123;</span> </span><span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>  <span class=\"token expression\"><span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>level<span class=\"token punctuation\">)</span> <span class=\"token function\">CC2530_GPIO_SET</span><span class=\"token punctuation\">(</span>port<span class=\"token punctuation\">,</span> pin<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>         </span><span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>  <span class=\"token expression\"><span class=\"token keyword\">else</span> <span class=\"token function\">CC2530_GPIO_CLEAR</span><span class=\"token punctuation\">(</span>port<span class=\"token punctuation\">,</span> pin<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>            </span><span class=\"token punctuation\">\\</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token expression\"><span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span></span></span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name function\">HAL_DS18B20_IO_SET_LO</span><span class=\"token expression\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>  <span class=\"token function\">HAL_DS18B20_IO_SET</span><span class=\"token punctuation\">(</span>HAL_DS18B20_PORT<span class=\"token punctuation\">,</span> HAL_DS18B20_PIN<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span></span></span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name function\">HAL_DS18B20_IO_SET_HI</span><span class=\"token expression\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>  <span class=\"token function\">HAL_DS18B20_IO_SET</span><span class=\"token punctuation\">(</span>HAL_DS18B20_PORT<span class=\"token punctuation\">,</span> HAL_DS18B20_PIN<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span></span></span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre></pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token comment\">/*  Get DS18B20 GPIO Status. */</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name function\">HAL_DS18B20_IO_GET</span><span class=\"token expression\"><span class=\"token punctuation\">(</span>port<span class=\"token punctuation\">,</span> pin<span class=\"token punctuation\">)</span> <span class=\"token function\">CC2530_GPIO_GET</span><span class=\"token punctuation\">(</span>port<span class=\"token punctuation\">,</span> pin<span class=\"token punctuation\">)</span></span></span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name function\">HAL_DS18B20_IO</span><span class=\"token expression\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>              <span class=\"token function\">HAL_DS18B20_IO_GET</span><span class=\"token punctuation\">(</span>HAL_DS18B20_PORT<span class=\"token punctuation\">,</span> HAL_DS18B20_PIN<span class=\"token punctuation\">)</span></span></span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre></pre></td></tr><tr><td data-num=\"33\"></td><td><pre><span class=\"token keyword\">static</span> <span class=\"token class-name\">uint8_t</span> <span class=\"token function\">ReadOneChar</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">void</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre><span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">WriteOneChar</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">uint8_t</span> dat<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre></pre></td></tr><tr><td data-num=\"36\"></td><td><pre><span class=\"token keyword\">unsigned</span> <span class=\"token keyword\">char</span> <span class=\"token function\">halDS18B20Init</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">void</span><span class=\"token punctuation\">)</span> </pre></td></tr><tr><td data-num=\"37\"></td><td><pre><span class=\"token punctuation\">&#123;</span> </pre></td></tr><tr><td data-num=\"38\"></td><td><pre>    <span class=\"token keyword\">unsigned</span> <span class=\"token keyword\">char</span> x <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>    <span class=\"token function\">HAL_DS18B20_IO_OUTPUT</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"41\"></td><td><pre>    <span class=\"token comment\">//DQ 先置高</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>    <span class=\"token function\">HAL_DS18B20_IO_SET_HI</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>    <span class=\"token function\">HAL_DS18B20_DELAY_US</span><span class=\"token punctuation\">(</span><span class=\"token number\">74</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>           <span class=\"token comment\">// 稍延时</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>    <span class=\"token comment\">// 发送复位脉冲 </span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>    <span class=\"token function\">HAL_DS18B20_IO_SET_LO</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>    <span class=\"token function\">HAL_DS18B20_DELAY_US</span><span class=\"token punctuation\">(</span><span class=\"token number\">750</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>          <span class=\"token comment\">// 延时（>480us)</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre> </pre></td></tr><tr><td data-num=\"49\"></td><td><pre>    <span class=\"token comment\">// 拉高数据线</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>    <span class=\"token function\">HAL_DS18B20_IO_SET_HI</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>    <span class=\"token function\">HAL_DS18B20_DELAY_US</span><span class=\"token punctuation\">(</span><span class=\"token number\">50</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>           <span class=\"token comment\">// 等待（15~60us)</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>    <span class=\"token function\">HAL_DS18B20_IO_PULLUP</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"55\"></td><td><pre>    x <span class=\"token operator\">=</span> <span class=\"token function\">HAL_DS18B20_IO</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 用 X 的值来判断初始化有没有成功，18B20 存在的话 X=0，否则 X=1</span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre><span class=\"token comment\">//    if (x == 0) HalLcdWriteString(\"finddddd\", 3);</span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre><span class=\"token comment\">//    else HalLcdWriteString(\"nooooo\", 3);</span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre>    <span class=\"token function\">HAL_DS18B20_DELAY_US</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"60\"></td><td><pre>    <span class=\"token keyword\">return</span> x<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre></pre></td></tr><tr><td data-num=\"63\"></td><td><pre></pre></td></tr><tr><td data-num=\"64\"></td><td><pre><span class=\"token class-name\">halDS18B20Data_t</span> <span class=\"token function\">halDS18B20GetData</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">void</span><span class=\"token punctuation\">)</span> </pre></td></tr><tr><td data-num=\"65\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"66\"></td><td><pre>    <span class=\"token class-name\">uint8_t</span> tempL<span class=\"token punctuation\">,</span> tempH<span class=\"token punctuation\">,</span> xiaoshu1<span class=\"token punctuation\">,</span> xiaoshu2<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"67\"></td><td><pre>    <span class=\"token class-name\">halDS18B20Data_t</span> ds18b20Dat <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token punctuation\">.</span>ok <span class=\"token operator\">=</span> HAL_DS18B20_FALSE<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">.</span>fg <span class=\"token operator\">=</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"68\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"69\"></td><td><pre>    <span class=\"token function\">halDS18B20Init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"70\"></td><td><pre>    <span class=\"token function\">HAL_DS18B20_DELAY_US</span><span class=\"token punctuation\">(</span><span class=\"token number\">15</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"71\"></td><td><pre>    <span class=\"token function\">WriteOneChar</span><span class=\"token punctuation\">(</span><span class=\"token number\">0xcc</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>                 <span class=\"token comment\">// 跳过读序列号的操作 </span></pre></td></tr><tr><td data-num=\"72\"></td><td><pre>    <span class=\"token function\">WriteOneChar</span><span class=\"token punctuation\">(</span><span class=\"token number\">0x44</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>                 <span class=\"token comment\">// 启动温度转换 </span></pre></td></tr><tr><td data-num=\"73\"></td><td><pre>    <span class=\"token function\">HAL_DS18B20_DELAY_US</span><span class=\"token punctuation\">(</span><span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>         <span class=\"token comment\">// 转换需要一点时间，延时 </span></pre></td></tr><tr><td data-num=\"74\"></td><td><pre></pre></td></tr><tr><td data-num=\"75\"></td><td><pre>    <span class=\"token function\">halDS18B20Init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>                   <span class=\"token comment\">// 初始化</span></pre></td></tr><tr><td data-num=\"76\"></td><td><pre>    <span class=\"token function\">HAL_DS18B20_DELAY_US</span><span class=\"token punctuation\">(</span><span class=\"token number\">15</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"77\"></td><td><pre>    <span class=\"token function\">WriteOneChar</span><span class=\"token punctuation\">(</span><span class=\"token number\">0xcc</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>                 <span class=\"token comment\">// 跳过读序列号的操作 </span></pre></td></tr><tr><td data-num=\"78\"></td><td><pre>    <span class=\"token function\">WriteOneChar</span><span class=\"token punctuation\">(</span><span class=\"token number\">0xbe</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>                 <span class=\"token comment\">// 读温度寄存器（头两个值分别为温度的低位和高位）</span></pre></td></tr><tr><td data-num=\"79\"></td><td><pre> </pre></td></tr><tr><td data-num=\"80\"></td><td><pre>    tempL <span class=\"token operator\">=</span> <span class=\"token function\">ReadOneChar</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>              <span class=\"token comment\">// 读出温度的低位 LSB </span></pre></td></tr><tr><td data-num=\"81\"></td><td><pre>    tempH <span class=\"token operator\">=</span> <span class=\"token function\">ReadOneChar</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>              <span class=\"token comment\">// 读出温度的高位 MSB</span></pre></td></tr><tr><td data-num=\"82\"></td><td><pre></pre></td></tr><tr><td data-num=\"83\"></td><td><pre>    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>tempH <span class=\"token operator\">&amp;</span> <span class=\"token number\">0xf8</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 最高 5 位为 1 时温度是负 </span></pre></td></tr><tr><td data-num=\"84\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span> </pre></td></tr><tr><td data-num=\"85\"></td><td><pre>        tempL <span class=\"token operator\">=</span> <span class=\"token operator\">~</span>tempL<span class=\"token punctuation\">;</span> <span class=\"token comment\">// 补码转换，取反加一 </span></pre></td></tr><tr><td data-num=\"86\"></td><td><pre>        tempH <span class=\"token operator\">=</span> <span class=\"token operator\">~</span>tempH<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span> </pre></td></tr><tr><td data-num=\"87\"></td><td><pre>        ds18b20Dat<span class=\"token punctuation\">.</span>fg <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 读取温度为负时 fg=0</span></pre></td></tr><tr><td data-num=\"88\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"89\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"90\"></td><td><pre>    <span class=\"token comment\">// 温度为负时貌似有问题，后面再改</span></pre></td></tr><tr><td data-num=\"91\"></td><td><pre>    ds18b20Dat<span class=\"token punctuation\">.</span>zs <span class=\"token operator\">=</span> tempL<span class=\"token operator\">/</span><span class=\"token number\">16</span><span class=\"token operator\">+</span>tempH<span class=\"token operator\">*</span><span class=\"token number\">16</span><span class=\"token punctuation\">;</span>          <span class=\"token comment\">// 整数部分 </span></pre></td></tr><tr><td data-num=\"92\"></td><td><pre>    xiaoshu1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>tempL<span class=\"token operator\">&amp;</span><span class=\"token number\">0x0f</span><span class=\"token punctuation\">)</span><span class=\"token operator\">*</span><span class=\"token number\">10</span><span class=\"token operator\">/</span><span class=\"token number\">16</span><span class=\"token punctuation\">;</span>              <span class=\"token comment\">// 小数第一位 </span></pre></td></tr><tr><td data-num=\"93\"></td><td><pre>    xiaoshu2 <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>tempL<span class=\"token operator\">&amp;</span><span class=\"token number\">0x0f</span><span class=\"token punctuation\">)</span><span class=\"token operator\">*</span><span class=\"token number\">100</span><span class=\"token operator\">/</span><span class=\"token number\">16</span><span class=\"token operator\">%</span><span class=\"token number\">10</span><span class=\"token punctuation\">;</span>          <span class=\"token comment\">// 小数第二位 </span></pre></td></tr><tr><td data-num=\"94\"></td><td><pre>    ds18b20Dat<span class=\"token punctuation\">.</span>xs <span class=\"token operator\">=</span> xiaoshu1<span class=\"token operator\">*</span><span class=\"token number\">10</span><span class=\"token operator\">+</span>xiaoshu2<span class=\"token punctuation\">;</span>       <span class=\"token comment\">// 小数两位</span></pre></td></tr><tr><td data-num=\"95\"></td><td><pre></pre></td></tr><tr><td data-num=\"96\"></td><td><pre>    <span class=\"token comment\">// 进行数据校验</span></pre></td></tr><tr><td data-num=\"97\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>ds18b20Dat<span class=\"token punctuation\">.</span>fg <span class=\"token operator\">&amp;&amp;</span> ds18b20Dat<span class=\"token punctuation\">.</span>zs <span class=\"token operator\">&lt;=</span> <span class=\"token number\">55</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">(</span>ds18b20Dat<span class=\"token punctuation\">.</span>fg <span class=\"token operator\">&amp;&amp;</span> ds18b20Dat<span class=\"token punctuation\">.</span>zs <span class=\"token operator\">&lt;=</span> <span class=\"token number\">125</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"98\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"99\"></td><td><pre>        ds18b20Dat<span class=\"token punctuation\">.</span>ok <span class=\"token operator\">=</span> HAL_DS18B20_TRUE<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"100\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"101\"></td><td><pre></pre></td></tr><tr><td data-num=\"102\"></td><td><pre>    <span class=\"token function\">halDS18B20Init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"103\"></td><td><pre>    <span class=\"token keyword\">return</span> ds18b20Dat<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"104\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"105\"></td><td><pre></pre></td></tr><tr><td data-num=\"106\"></td><td><pre><span class=\"token comment\">// 主机数据线先从高拉至低电平 1us 以上，再使数据线升为高电平，从而产生读信号 </span></pre></td></tr><tr><td data-num=\"107\"></td><td><pre><span class=\"token keyword\">static</span> <span class=\"token class-name\">uint8_t</span> <span class=\"token function\">ReadOneChar</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">void</span><span class=\"token punctuation\">)</span> </pre></td></tr><tr><td data-num=\"108\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"109\"></td><td><pre>    <span class=\"token class-name\">uint8_t</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 每个读周期最短的持续时间为 60us，各个读周期之间必须有 1us 以上的高电平恢复期 </span></pre></td></tr><tr><td data-num=\"110\"></td><td><pre>    <span class=\"token class-name\">uint8_t</span> dat <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"111\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"112\"></td><td><pre>    <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span>i <span class=\"token operator\">=</span> <span class=\"token number\">8</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">></span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">--</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 一个字节有 8 位 </span></pre></td></tr><tr><td data-num=\"113\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span> </pre></td></tr><tr><td data-num=\"114\"></td><td><pre>        <span class=\"token function\">HAL_DS18B20_IO_OUTPUT</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"115\"></td><td><pre>      </pre></td></tr><tr><td data-num=\"116\"></td><td><pre>        dat<span class=\"token operator\">>>=</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"117\"></td><td><pre>        <span class=\"token function\">HAL_DS18B20_IO_SET_LO</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"118\"></td><td><pre>        <span class=\"token function\">HAL_DS18B20_DELAY_US</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"119\"></td><td><pre>        <span class=\"token function\">HAL_DS18B20_IO_SET_HI</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"120\"></td><td><pre>        </pre></td></tr><tr><td data-num=\"121\"></td><td><pre>        <span class=\"token function\">HAL_DS18B20_IO_PULLUP</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"122\"></td><td><pre>        <span class=\"token function\">HAL_DS18B20_DELAY_US</span><span class=\"token punctuation\">(</span><span class=\"token number\">12</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"123\"></td><td><pre>        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token function\">HAL_DS18B20_IO</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"124\"></td><td><pre>            dat <span class=\"token operator\">|=</span> <span class=\"token number\">0x80</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"125\"></td><td><pre>        </pre></td></tr><tr><td data-num=\"126\"></td><td><pre>        <span class=\"token function\">HAL_DS18B20_DELAY_US</span><span class=\"token punctuation\">(</span><span class=\"token number\">50</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"127\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"128\"></td><td><pre>    <span class=\"token keyword\">return</span> dat<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"129\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"130\"></td><td><pre></pre></td></tr><tr><td data-num=\"131\"></td><td><pre><span class=\"token comment\">// 数据线从高电平拉至低电平，产生写起始信号。15us 之内将所需写的位送到数据线上</span></pre></td></tr><tr><td data-num=\"132\"></td><td><pre><span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">WriteOneChar</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">uint8_t</span> dat<span class=\"token punctuation\">)</span> </pre></td></tr><tr><td data-num=\"133\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"134\"></td><td><pre>    <span class=\"token function\">HAL_DS18B20_IO_OUTPUT</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"135\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"136\"></td><td><pre>    <span class=\"token class-name\">uint8_t</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> </pre></td></tr><tr><td data-num=\"137\"></td><td><pre>    <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span>i <span class=\"token operator\">=</span> <span class=\"token number\">8</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">--</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 在 15~60us 之间对数据线进行采样，如果是高电平就写 1，低写 0 发生。 </span></pre></td></tr><tr><td data-num=\"138\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span> </pre></td></tr><tr><td data-num=\"139\"></td><td><pre>        <span class=\"token function\">HAL_DS18B20_IO_SET_LO</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 在开始另一个写周期前必须有 1us 以上的高电平恢复期</span></pre></td></tr><tr><td data-num=\"140\"></td><td><pre>        <span class=\"token function\">HAL_DS18B20_DELAY_US</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"141\"></td><td><pre>        </pre></td></tr><tr><td data-num=\"142\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>dat<span class=\"token operator\">&amp;</span><span class=\"token number\">0x01</span><span class=\"token punctuation\">)</span> <span class=\"token function\">HAL_DS18B20_IO_SET_HI</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"143\"></td><td><pre>        <span class=\"token keyword\">else</span> <span class=\"token function\">HAL_DS18B20_IO_SET_LO</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"144\"></td><td><pre>            </pre></td></tr><tr><td data-num=\"145\"></td><td><pre>        <span class=\"token function\">HAL_DS18B20_DELAY_US</span><span class=\"token punctuation\">(</span><span class=\"token number\">68</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"146\"></td><td><pre>        </pre></td></tr><tr><td data-num=\"147\"></td><td><pre>        <span class=\"token function\">HAL_DS18B20_IO_SET_HI</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"148\"></td><td><pre>        dat <span class=\"token operator\">>>=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"149\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"150\"></td><td><pre>    <span class=\"token function\">HAL_DS18B20_DELAY_US</span><span class=\"token punctuation\">(</span><span class=\"token number\">40</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"151\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h2 id=\"参考链接\"><a class=\"anchor\" href=\"#参考链接\">#</a> 参考链接</h2>\n<ul>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC80ODM2MDY2NTY=\">液体温度传感器 YTWD-A1</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC8zOTYzNTY2NTk=\">DS18B20 数字温度传感器干货</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC8zODYwODQ2MzM=\">温度传感器 DS18B20 原理，附 STM32 例程代码</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3UwMTMxNTEzMjAvYXJ0aWNsZS9kZXRhaWxzLzUwMjUzMTk5\">51 单片机 DS18B20 温度传感器详解</span></li>\n</ul>\n",
            "tags": [
                "硬件修炼手册",
                "ZigBee",
                "IoT",
                "ZigBee"
            ]
        },
        {
            "id": "https://blog.aayu.today/artificial-intelligence/basic/20221028/",
            "url": "https://blog.aayu.today/artificial-intelligence/basic/20221028/",
            "title": "用Python理解图像和视频的本质",
            "date_published": "2022-10-27T16:57:08.000Z",
            "content_html": "<h2 id=\"安装jupyterlab\"><a class=\"anchor\" href=\"#安装jupyterlab\">#</a> 安装 jupyterlab</h2>\n<p>更换国内源之后，在 anaconda powershell prompt 用下面命令安装</p>\n<pre><code>conda install jupyterlab\n</code></pre>\n<p>安装完成后，在命令行输入 <code>jupyter-lab</code>  启动</p>\n<h2 id=\"numpy常用命令\"><a class=\"anchor\" href=\"#numpy常用命令\">#</a> numpy 常用命令</h2>\n<table>\n<thead>\n<tr>\n<th>命令</th>\n<th>备注</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>np.array([1,2,3,4])</td>\n<td>Python 列表转换为 numpy 的数组</td>\n</tr>\n<tr>\n<td>np.arange(0,10)</td>\n<td>创建一个 0~9 的一维数组</td>\n</tr>\n<tr>\n<td>np.ones(shape=(3,3))</td>\n<td>创建一个大小为 3*3 的全 1 数组</td>\n</tr>\n<tr>\n<td>np.zeros(shape=(5,5))</td>\n<td>创建大小为 5*5 的全 0 数组</td>\n</tr>\n<tr>\n<td>np.random.randint(0,100,10)</td>\n<td>随机 10 个整数</td>\n</tr>\n<tr>\n<td>arr.max()</td>\n<td>获取最大值</td>\n</tr>\n<tr>\n<td>arr.argmax()</td>\n<td>获取最大值的索引</td>\n</tr>\n<tr>\n<td>arr.min()</td>\n<td>获取最小值</td>\n</tr>\n<tr>\n<td>arr.argmin()</td>\n<td>获取最小值索引</td>\n</tr>\n<tr>\n<td>arr.mean()</td>\n<td>获取平均值</td>\n</tr>\n<tr>\n<td>arr.shape</td>\n<td>获取 numpy 数组的大小</td>\n</tr>\n<tr>\n<td>arr.reshape((5,2))</td>\n<td>转换数组的形状</td>\n</tr>\n<tr>\n<td>np.arange(0,100).reshape((10,10))</td>\n<td>创建一个 10*10 的矩阵</td>\n</tr>\n</tbody>\n</table>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># 首先导入 numpy 包，重命名一下</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># 首先创建一个 Python 列表</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>list_c <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\"># 检查类型</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token builtin\">type</span><span class=\"token punctuation\">(</span>list_c<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\"># 在使用 np.array () 将 Python 列表转换为 numpy 的数组</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>my_array <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>array<span class=\"token punctuation\">(</span>list_c<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token comment\"># 比如我们使用 np.arange () 可以快速创建连续数字的数组</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token comment\"># 比如我创建一个 0~9 的一维数组</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>np<span class=\"token punctuation\">.</span>arange<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token comment\"># jupyterlab 中使用 shift+tab 可以查看函数的帮助文档（查看一下，此刻输入 np.arange ()，弹出对应函数帮助文档）</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token comment\"># 可以看到这个 arange () 函数有 start、stop 和 step 参数，分别代表了起始值，终止值，以及步长</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token comment\"># 如果我希望创建 0~10 中连续偶数的数组，只需将步长设为 2（此刻输入 np.arange (0,10,2)）</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>np<span class=\"token punctuation\">.</span>arange<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token comment\"># 还可以用 np.ones 创建全是 1 的数组，（此时输入 np.ones ()，弹出帮助说明）</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token comment\"># 比如我要创建一个大小为 3*3 的全 1 数组</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>np<span class=\"token punctuation\">.</span>ones<span class=\"token punctuation\">(</span>shape<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token comment\"># 或者使用 np.zeros () 全 0 数组</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token comment\"># 比如创建大小为 5*5 的全 0 数组</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>np<span class=\"token punctuation\">.</span>zeros<span class=\"token punctuation\">(</span>shape<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token comment\"># 首先使用 np.randint 函数一些随机整数</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>arr <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>random<span class=\"token punctuation\">.</span>randint<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">100</span><span class=\"token punctuation\">,</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre></pre></td></tr><tr><td data-num=\"33\"></td><td><pre><span class=\"token comment\"># 使用 max 获取最大值</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>arr<span class=\"token punctuation\">.</span><span class=\"token builtin\">max</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre><span class=\"token comment\"># 再使用 argmax () 获取最大值的索引</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>arr<span class=\"token punctuation\">.</span>argmax<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre><span class=\"token comment\"># 使用 min 函数获取最小值</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>arr<span class=\"token punctuation\">.</span><span class=\"token builtin\">min</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre><span class=\"token comment\"># 使用 argmin 获取最小值索引</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>arr<span class=\"token punctuation\">.</span>argmin<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre><span class=\"token comment\"># 使用 mean () 方法获取取平均值</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>arr<span class=\"token punctuation\">.</span>mean<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre></pre></td></tr><tr><td data-num=\"44\"></td><td><pre><span class=\"token comment\"># 如果要获取 humpy 数组的大小，使用 numpy.shape，</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>arr<span class=\"token punctuation\">.</span>shape</pre></td></tr><tr><td data-num=\"46\"></td><td><pre><span class=\"token comment\"># 也可以使用 reshape 函数转换数组的形状，比如我将 arr 转换成 5*2 的数组</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>arr<span class=\"token punctuation\">.</span>reshape<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre></pre></td></tr><tr><td data-num=\"49\"></td><td><pre><span class=\"token comment\"># 首先创建一个 10*10 的矩阵</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>matrix <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>arange<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>reshape<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre><span class=\"token comment\"># 查看一下大小</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>matrix<span class=\"token punctuation\">.</span>shape</pre></td></tr><tr><td data-num=\"53\"></td><td><pre><span class=\"token comment\"># 使用中括号中加索引方式，获取矩阵对应元素，比如我获取第 3 行第 5 列元素</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>matrix<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre><span class=\"token comment\"># 再获取矩阵第 9 行第 7 列元素</span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>matrix<span class=\"token punctuation\">[</span><span class=\"token number\">8</span><span class=\"token punctuation\">,</span><span class=\"token number\">6</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre><span class=\"token comment\"># 如果要获取某一行所有元素，我们需要使用 numpy 的切片：</span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre><span class=\"token comment\"># 比如我要获取第 3 行所有元素，只需将第二个位置变成冒号:</span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre>matrix<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"60\"></td><td><pre><span class=\"token comment\"># 类似的，比如我要获取第 6 列所有元素，只需将第一个位置变成冒号:</span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre>matrix<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre><span class=\"token comment\"># 查看 shape</span></pre></td></tr><tr><td data-num=\"63\"></td><td><pre>matrix<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>shape</pre></td></tr><tr><td data-num=\"64\"></td><td><pre><span class=\"token comment\"># 用 reshape 恢复成原来的样子</span></pre></td></tr><tr><td data-num=\"65\"></td><td><pre>matrix<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>reshape<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"66\"></td><td><pre><span class=\"token comment\"># 比如我要获取第 1~3 行，第 2~4 列矩阵，我们可以用数字配合冒号的方式来获取</span></pre></td></tr><tr><td data-num=\"67\"></td><td><pre>matrix<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">:</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">:</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"68\"></td><td><pre><span class=\"token comment\"># 当然我们可以使用等号赋值语句，比如我将这些位置赋值 0</span></pre></td></tr><tr><td data-num=\"69\"></td><td><pre>matrix<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">:</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">:</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span></pre></td></tr></table></figure><h2 id=\"pil和matplotlib对图像的基本操作\"><a class=\"anchor\" href=\"#pil和matplotlib对图像的基本操作\">#</a> PIL 和 matplotlib 对图像的基本操作</h2>\n<table>\n<thead>\n<tr>\n<th>命令</th>\n<th>备注</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Image.open('./img/cat.jpg')</td>\n<td>读取图片</td>\n</tr>\n<tr>\n<td>np.asarray(img)</td>\n<td>转化为 numpy 数组</td>\n</tr>\n<tr>\n<td>plt.imshow(img_arr)</td>\n<td>显示 Numpy 数组形式的图片</td>\n</tr>\n<tr>\n<td>img_arr.copy()</td>\n<td>复制一份原图</td>\n</tr>\n<tr>\n<td>plt.imshow(img_arr_copy[:,:,0],cmap='gray')</td>\n<td>将 cmap 颜色设置为 gray 灰度</td>\n</tr>\n<tr>\n<td>img_arr_copy[:,:,0].shape</td>\n<td>单独看一个通道</td>\n</tr>\n</tbody>\n</table>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># 首先导入 numpy</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># 为了在 notebook 中显示图片，导入 matplotlib 库</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> matplotlib<span class=\"token punctuation\">.</span>pyplot <span class=\"token keyword\">as</span> plt</pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\"># 加这行在 Notebook 显示图像</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token operator\">%</span>matplotlib inline</pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\"># 再使用一个 PIL 库，用于读取图像</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">from</span> PIL <span class=\"token keyword\">import</span> Image</pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token comment\"># 我在 img 文件夹下放了一张图片（演示一下）</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token comment\"># 我们用 PIL 库读取图片，注意路径要正确</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>img <span class=\"token operator\">=</span> Image<span class=\"token punctuation\">.</span><span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./img/cat.jpg'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token comment\"># 查看一下变量的类型</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token builtin\">type</span><span class=\"token punctuation\">(</span>img<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token comment\"># 首先我们需要将它转化为 numpy 数组，使用 numpy.asarray () 函数</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>img_arr <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>asarray<span class=\"token punctuation\">(</span>img<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token comment\"># 再使用 matplot 的 imshow () 方法显示 Numpy 数组形式的图片</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>plt<span class=\"token punctuation\">.</span>imshow<span class=\"token punctuation\">(</span>img_arr<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token comment\"># 我们继续对这个图片操作，先使用 numpy 的 copy 方法复制一份原图</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>img_arr_copy <span class=\"token operator\">=</span> img_arr<span class=\"token punctuation\">.</span>copy<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token comment\"># 首先使用 numpy 切片，将 R,G,B 三个颜色通道中的 R 红色通道显示出来</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token comment\"># 大家会发现这个颜色很奇怪，都是翠绿色，为什么会显示成这样呢？</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token comment\"># 我们打开 matplot 的官网关于颜色表 colormap 的说明：</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token comment\"># https://matplotlib.org/stable/gallery/color/colormap_reference.html</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre><span class=\"token comment\"># 可以看到默认的颜色：是翠绿色（viridis ）。那这个颜色方便色盲观看的</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>plt<span class=\"token punctuation\">.</span>imshow<span class=\"token punctuation\">(</span>img_arr_copy<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre></pre></td></tr><tr><td data-num=\"35\"></td><td><pre><span class=\"token comment\"># 我们也可以将 cmap 颜色设置成火山岩浆样式：magma</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>plt<span class=\"token punctuation\">.</span>imshow<span class=\"token punctuation\">(</span>img_arr_copy<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>cmap<span class=\"token operator\">=</span><span class=\"token string\">'magma'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre></pre></td></tr><tr><td data-num=\"38\"></td><td><pre><span class=\"token comment\"># 好，我们知道，计算机是分不清到底哪一个通道是红色的，每一个颜色通道其实都是一个灰度图，我们首先将 cmap 颜色设置为 gray 灰度看一下</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>plt<span class=\"token punctuation\">.</span>imshow<span class=\"token punctuation\">(</span>img_arr_copy<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>cmap<span class=\"token operator\">=</span><span class=\"token string\">'gray'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre></pre></td></tr><tr><td data-num=\"41\"></td><td><pre><span class=\"token comment\"># 可以查看大小 shape，会发现大小仍然不变</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>img_arr_copy<span class=\"token punctuation\">.</span>shape</pre></td></tr><tr><td data-num=\"43\"></td><td><pre></pre></td></tr><tr><td data-num=\"44\"></td><td><pre><span class=\"token comment\"># 而单独看一个通道的时候，大小会变化</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>img_arr_copy<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>shape</pre></td></tr></table></figure><h2 id=\"opencv对图像和视频的基本操作\"><a class=\"anchor\" href=\"#opencv对图像和视频的基本操作\">#</a> OpenCV 对图像和视频的基本操作</h2>\n<table>\n<thead>\n<tr>\n<th>命令</th>\n<th>备注</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>cv2.imread('./img/cat.jpg')</td>\n<td>使用 opencv 的 imread 方法，打开图片</td>\n</tr>\n<tr>\n<td>cv2.cvtColor(img,cv2.COLOR_BGR2RGB)</td>\n<td>将 OpenCV BGR 转换成 RGB</td>\n</tr>\n<tr>\n<td>cv2.imread('./img/cat.jpg',cv2.IMREAD_GRAYSCALE)</td>\n<td>再读取图片时也可以以灰度模式读取</td>\n</tr>\n<tr>\n<td>cv2.resize(img_fixed,(1000,300))</td>\n<td>使用 resize 缩放</td>\n</tr>\n<tr>\n<td>cv2.flip(img_fixed,-1)</td>\n<td>翻转图片：0 表示垂直翻转、1 表示水平翻转，-1 表示水平垂直都翻转</td>\n</tr>\n<tr>\n<td>cv2.imwrite('./img_flip.jpg',img_save)</td>\n<td>写入 numpy 格式的图片</td>\n</tr>\n<tr>\n<td>cv2.waitKey(1) &amp; 0xFF == 27</td>\n<td>等待至少 1ms ，而且按了 ESC 键，也可以用 ord ('q')</td>\n</tr>\n<tr>\n<td>cv2.imshow('display image',img)</td>\n<td>显示图片窗口</td>\n</tr>\n<tr>\n<td>np.zeros(shape=(800,800,3),dtype=np.int16)</td>\n<td>创建一个纯黑色图，纯黑色就是图片的元素全部为 0，这里给一个数据类型为 Int16</td>\n</tr>\n<tr>\n<td>cv2.rectangle(img=black_img,pt1=(100,100),pt2=(400,300),color=(0,255,0),thickness=10)</td>\n<td>画一个矩形</td>\n</tr>\n<tr>\n<td>cv2.rectangle(img=black_img,pt1=(20,550),pt2=(220,750),color=(255,0,0),thickness=10)</td>\n<td>画一个正方形</td>\n</tr>\n<tr>\n<td>cv2.circle(img=black_img,center=(400,400),radius=100,color=(0,0,255),thickness=10)</td>\n<td>画一个圆</td>\n</tr>\n<tr>\n<td>cv2.circle(img=black_img,center=(500,600),radius=50,color=(0,0,255),thickness=-1)</td>\n<td>一个实心圆</td>\n</tr>\n<tr>\n<td>cv2.line(img=black_img,pt1=(0,0),pt2=(800,800),color=(255,0,255),thickness=10)</td>\n<td>画一条线</td>\n</tr>\n<tr>\n<td>cv2.putText(img=black_img,text=&quot;Python&quot;,org=(500,150),fontFace=font,fontScale=4,color=(255,0,255),thickness=5,lineType=cv2.LINE_AA)</td>\n<td>添加英文文字</td>\n</tr>\n<tr>\n<td>cv2.polylines(img=black_img,pts=[pts],isClosed=True,color=(255,0,255),thickness=10)</td>\n<td>画一个多边形</td>\n</tr>\n<tr>\n<td>cv2.VideoCapture(0)</td>\n<td>读取默认摄像头，后面的数字表示摄像头的编号，如果有多个摄像头可以换成其他数字</td>\n</tr>\n<tr>\n<td>cv2.destroyAllWindows()</td>\n<td>释放窗口资源</td>\n</tr>\n<tr>\n<td>cv2.VideoWriter('./myDemoVideo.mp4',cv2.VideoWriter_fourcc(*'X264'),fps,(width,height))</td>\n<td>存储摄像头视频流</td>\n</tr>\n<tr>\n<td>cv2.VideoCapture('./myDemoVideo.mp4')</td>\n<td>参数可以换成文件名，我们读取前面保存的 MP4 视频</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"opencv读取-缩放-翻转-写入图像\"><a class=\"anchor\" href=\"#opencv读取-缩放-翻转-写入图像\">#</a> OpenCV 读取、缩放、翻转、写入图像</h3>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># 导入必要的包</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> matplotlib<span class=\"token punctuation\">.</span>pyplot <span class=\"token keyword\">as</span> plt</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token operator\">%</span>matplotlib inline</pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\"># 导入 opencv</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">import</span> cv2</pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\"># 使用 opencv 的 imread 方法，打开图片</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>img <span class=\"token operator\">=</span> cv2<span class=\"token punctuation\">.</span>imread<span class=\"token punctuation\">(</span><span class=\"token string\">'./img/cat.jpg'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token comment\"># 检查类型，会发现自动转成了 Numpy 数组的形式</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token builtin\">type</span><span class=\"token punctuation\">(</span>img<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token comment\"># 如果打开一张不存在的图片，不会报错，但是会返回空类型</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>img_wrong <span class=\"token operator\">=</span> cv2<span class=\"token punctuation\">.</span>imread<span class=\"token punctuation\">(</span><span class=\"token string\">'./img/wrong.jpg'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token comment\"># 为什么会显示的这么奇怪？（OpenCV 和 matplotlib 默认的 RBG 顺序不一样）</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>plt<span class=\"token punctuation\">.</span>imshow<span class=\"token punctuation\">(</span>img<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token comment\"># matplotlib: R G B</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token comment\"># opencv: B G R</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token comment\"># 需要调整顺序</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token comment\"># 将 OpenCV BGR 转换成 RGB，cv2.COLOR_可以看到更多转换形式</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>img_fixed <span class=\"token operator\">=</span> cv2<span class=\"token punctuation\">.</span>cvtColor<span class=\"token punctuation\">(</span>img<span class=\"token punctuation\">,</span>cv2<span class=\"token punctuation\">.</span>COLOR_BGR2RGB<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token comment\"># 显示正常了</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>plt<span class=\"token punctuation\">.</span>imshow<span class=\"token punctuation\">(</span>img_fixed<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token comment\"># 另外，我们再读取图片时也可以以灰度模式读取</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>img_gray <span class=\"token operator\">=</span> cv2<span class=\"token punctuation\">.</span>imread<span class=\"token punctuation\">(</span><span class=\"token string\">'./img/cat.jpg'</span><span class=\"token punctuation\">,</span>cv2<span class=\"token punctuation\">.</span>IMREAD_GRAYSCALE<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre></pre></td></tr><tr><td data-num=\"34\"></td><td><pre><span class=\"token comment\"># 只剩 2 个维度，没有了颜色通道</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>img_gray<span class=\"token punctuation\">.</span>shape</pre></td></tr><tr><td data-num=\"36\"></td><td><pre></pre></td></tr><tr><td data-num=\"37\"></td><td><pre><span class=\"token comment\"># 显示这个灰度图</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>plt<span class=\"token punctuation\">.</span>imshow<span class=\"token punctuation\">(</span>img_gray<span class=\"token punctuation\">,</span>cmap<span class=\"token operator\">=</span><span class=\"token string\">\"gray\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre></pre></td></tr><tr><td data-num=\"40\"></td><td><pre><span class=\"token comment\"># 使用 resize 缩放（打开函数帮助）</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>img_resize <span class=\"token operator\">=</span> cv2<span class=\"token punctuation\">.</span>resize<span class=\"token punctuation\">(</span>img_fixed<span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token number\">1000</span><span class=\"token punctuation\">,</span><span class=\"token number\">300</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre></pre></td></tr><tr><td data-num=\"43\"></td><td><pre><span class=\"token comment\"># 显示缩放后的图片</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>plt<span class=\"token punctuation\">.</span>imshow<span class=\"token punctuation\">(</span>img_resize<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre></pre></td></tr><tr><td data-num=\"46\"></td><td><pre><span class=\"token comment\"># 翻转图片：0 表示垂直翻转、1 表示水平翻转，-1 表示水平垂直都翻转</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>img_flip <span class=\"token operator\">=</span> cv2<span class=\"token punctuation\">.</span>flip<span class=\"token punctuation\">(</span>img_fixed<span class=\"token punctuation\">,</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>plt<span class=\"token punctuation\">.</span>imshow<span class=\"token punctuation\">(</span>img_flip<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre></pre></td></tr><tr><td data-num=\"50\"></td><td><pre><span class=\"token comment\"># 先将颜色通道顺序调回 OpenCV 的形式</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>img_save <span class=\"token operator\">=</span> cv2<span class=\"token punctuation\">.</span>cvtColor<span class=\"token punctuation\">(</span>img_flip<span class=\"token punctuation\">,</span>cv2<span class=\"token punctuation\">.</span>COLOR_RGB2BGR<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre></pre></td></tr><tr><td data-num=\"53\"></td><td><pre><span class=\"token comment\"># 写入 numpy 格式的图片</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>cv2<span class=\"token punctuation\">.</span>imwrite<span class=\"token punctuation\">(</span><span class=\"token string\">'./img_flip.jpg'</span><span class=\"token punctuation\">,</span> img_save<span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h3 id=\"opencv绘制文字和几何图形\"><a class=\"anchor\" href=\"#opencv绘制文字和几何图形\">#</a> OpenCV 绘制文字和几何图形</h3>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># OpenCV 绘制文字和几何图形</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\"># 导入必要的包</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> cv2</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> matplotlib<span class=\"token punctuation\">.</span>pyplot <span class=\"token keyword\">as</span> plt</pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token operator\">%</span>matplotlib inline</pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\"># 创建一个纯黑色图，纯黑色就是图片的元素全部为 0，这里给一个数据类型为 Int16</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>black_img <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>zeros<span class=\"token punctuation\">(</span>shape<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">800</span><span class=\"token punctuation\">,</span><span class=\"token number\">800</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>dtype<span class=\"token operator\">=</span>np<span class=\"token punctuation\">.</span>int16<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token comment\"># 显示一下</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>plt<span class=\"token punctuation\">.</span>imshow<span class=\"token punctuation\">(</span>black_img<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token comment\"># 首先使用 OpenCV 画一个矩形</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token comment\"># 使用 cv2.rectangle 函数来创建，首先看一下这个函数的帮助文档 </span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token comment\"># 可以看到分别是：thickness（线粗）</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token comment\"># 那我们在刚才的黑色图片上创建一个矩形</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>cv2<span class=\"token punctuation\">.</span>rectangle<span class=\"token punctuation\">(</span>img<span class=\"token operator\">=</span>black_img<span class=\"token punctuation\">,</span>pt1<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">,</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>pt2<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">400</span><span class=\"token punctuation\">,</span><span class=\"token number\">300</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>color<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">255</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>thickness<span class=\"token operator\">=</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token comment\"># 再画一个正方形在左下角</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>cv2<span class=\"token punctuation\">.</span>rectangle<span class=\"token punctuation\">(</span>img<span class=\"token operator\">=</span>black_img<span class=\"token punctuation\">,</span>pt1<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">,</span><span class=\"token number\">550</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>pt2<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">220</span><span class=\"token punctuation\">,</span><span class=\"token number\">750</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>color<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">255</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>thickness<span class=\"token operator\">=</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token comment\"># 在使用 opencv.circle 方法画一个圆</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token comment\"># 看一下帮助文档分别是圆心、半径</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>cv2<span class=\"token punctuation\">.</span>circle<span class=\"token punctuation\">(</span>img<span class=\"token operator\">=</span>black_img<span class=\"token punctuation\">,</span>center<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">400</span><span class=\"token punctuation\">,</span><span class=\"token number\">400</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>radius<span class=\"token operator\">=</span><span class=\"token number\">100</span><span class=\"token punctuation\">,</span>color<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">255</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>thickness<span class=\"token operator\">=</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token comment\"># 换一个实心圆</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>cv2<span class=\"token punctuation\">.</span>circle<span class=\"token punctuation\">(</span>img<span class=\"token operator\">=</span>black_img<span class=\"token punctuation\">,</span>center<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">500</span><span class=\"token punctuation\">,</span><span class=\"token number\">600</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>radius<span class=\"token operator\">=</span><span class=\"token number\">50</span><span class=\"token punctuation\">,</span>color<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">255</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>thickness<span class=\"token operator\">=</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token comment\"># 再使用 opencv 的 line 函数画一条线，用法和矩形一样</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token comment\"># 我们沿着画面对角线画一条紫色线条</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>cv2<span class=\"token punctuation\">.</span>line<span class=\"token punctuation\">(</span>img<span class=\"token operator\">=</span>black_img<span class=\"token punctuation\">,</span>pt1<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>pt2<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">800</span><span class=\"token punctuation\">,</span><span class=\"token number\">800</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>color<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">255</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">255</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>thickness<span class=\"token operator\">=</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre></pre></td></tr><tr><td data-num=\"34\"></td><td><pre><span class=\"token comment\"># 我们再使用 OpenCV 添加文字</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre><span class=\"token comment\"># 首先是英文</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre><span class=\"token comment\"># 定义字体</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>font <span class=\"token operator\">=</span> cv2<span class=\"token punctuation\">.</span>FONT_HERSHEY_PLAIN</pre></td></tr><tr><td data-num=\"38\"></td><td><pre><span class=\"token comment\"># 然后使用 puttext 方法</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>cv2<span class=\"token punctuation\">.</span>putText<span class=\"token punctuation\">(</span>img<span class=\"token operator\">=</span>black_img<span class=\"token punctuation\">,</span>text<span class=\"token operator\">=</span><span class=\"token string\">\"Python\"</span><span class=\"token punctuation\">,</span>org<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">500</span><span class=\"token punctuation\">,</span><span class=\"token number\">150</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>fontFace<span class=\"token operator\">=</span>font<span class=\"token punctuation\">,</span>fontScale<span class=\"token operator\">=</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span>color<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">255</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">255</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>thickness<span class=\"token operator\">=</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span>lineType<span class=\"token operator\">=</span>cv2<span class=\"token punctuation\">.</span>LINE_AA<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre></pre></td></tr><tr><td data-num=\"41\"></td><td><pre><span class=\"token comment\"># 我们再用画一个多边形</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre><span class=\"token comment\"># 重新创建一个黑色图</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>black_img <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>zeros<span class=\"token punctuation\">(</span>shape<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">800</span><span class=\"token punctuation\">,</span><span class=\"token number\">800</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>plt<span class=\"token punctuation\">.</span>imshow<span class=\"token punctuation\">(</span>black_img<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre></pre></td></tr><tr><td data-num=\"46\"></td><td><pre><span class=\"token comment\"># 定义多边形顶点，这些顶点得以二维数据形式存储</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>points <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>array<span class=\"token punctuation\">(</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token number\">400</span><span class=\"token punctuation\">,</span><span class=\"token number\">100</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">[</span><span class=\"token number\">200</span><span class=\"token punctuation\">,</span><span class=\"token number\">300</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">[</span><span class=\"token number\">400</span><span class=\"token punctuation\">,</span><span class=\"token number\">700</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">[</span><span class=\"token number\">600</span><span class=\"token punctuation\">,</span><span class=\"token number\">300</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">]</span> <span class=\"token punctuation\">,</span>dtype<span class=\"token operator\">=</span>np<span class=\"token punctuation\">.</span>int32<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre><span class=\"token comment\"># 然后呢，opencv 比较麻烦，还需转换成三维数组格式</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>pts <span class=\"token operator\">=</span> points<span class=\"token punctuation\">.</span>reshape<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre><span class=\"token comment\"># 然后使用 OpenCV 的 polyline 方法创建，注意这里还需要用列表形式把点传过去</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>cv2<span class=\"token punctuation\">.</span>polylines<span class=\"token punctuation\">(</span>img<span class=\"token operator\">=</span>black_img<span class=\"token punctuation\">,</span>pts<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span>pts<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>isClosed<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span>color<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">255</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">255</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>thickness<span class=\"token operator\">=</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre></pre></td></tr><tr><td data-num=\"53\"></td><td><pre><span class=\"token comment\"># 再说一下添加中文字体，这个比较麻烦，这里我已经写好了一个函数大家可以直接调用</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre><span class=\"token comment\"># 要注意两点：</span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre><span class=\"token comment\"># 1、对应的字体要安装好或者放在目录下</span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre><span class=\"token comment\"># 2、不像 cv2.puttext 可以直接生效，因为这里用了各种转换，所以需要用一个变量来保存结果</span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre></pre></td></tr><tr><td data-num=\"58\"></td><td><pre><span class=\"token comment\"># 导入 PIL 对应包</span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre><span class=\"token keyword\">from</span> PIL <span class=\"token keyword\">import</span> Image<span class=\"token punctuation\">,</span> ImageDraw<span class=\"token punctuation\">,</span> ImageFont</pre></td></tr><tr><td data-num=\"60\"></td><td><pre><span class=\"token comment\"># 定义一个函数</span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">cv2AddChineseText</span><span class=\"token punctuation\">(</span>img<span class=\"token punctuation\">,</span> text<span class=\"token punctuation\">,</span> position<span class=\"token punctuation\">,</span> textColor<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">255</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> textSize<span class=\"token operator\">=</span><span class=\"token number\">30</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre>    img <span class=\"token operator\">=</span> Image<span class=\"token punctuation\">.</span>fromarray<span class=\"token punctuation\">(</span>cv2<span class=\"token punctuation\">.</span>cvtColor<span class=\"token punctuation\">(</span>img<span class=\"token punctuation\">,</span> cv2<span class=\"token punctuation\">.</span>COLOR_BGR2RGB<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"63\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">type</span><span class=\"token punctuation\">(</span>img<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"64\"></td><td><pre>    draw <span class=\"token operator\">=</span> ImageDraw<span class=\"token punctuation\">.</span>Draw<span class=\"token punctuation\">(</span>img<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"65\"></td><td><pre>    <span class=\"token comment\"># 字体的格式</span></pre></td></tr><tr><td data-num=\"66\"></td><td><pre>    fontStyle <span class=\"token operator\">=</span> ImageFont<span class=\"token punctuation\">.</span>truetype<span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"67\"></td><td><pre>        <span class=\"token string\">\"./font/simsun.ttc\"</span><span class=\"token punctuation\">,</span> textSize<span class=\"token punctuation\">,</span> encoding<span class=\"token operator\">=</span><span class=\"token string\">\"utf-8\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"68\"></td><td><pre>    <span class=\"token comment\"># 绘制文本</span></pre></td></tr><tr><td data-num=\"69\"></td><td><pre>    draw<span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">(</span>position<span class=\"token punctuation\">,</span> text<span class=\"token punctuation\">,</span> textColor<span class=\"token punctuation\">,</span> font<span class=\"token operator\">=</span>fontStyle<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"70\"></td><td><pre>    <span class=\"token comment\"># 转换回 OpenCV 格式</span></pre></td></tr><tr><td data-num=\"71\"></td><td><pre>    <span class=\"token keyword\">return</span> cv2<span class=\"token punctuation\">.</span>cvtColor<span class=\"token punctuation\">(</span>np<span class=\"token punctuation\">.</span>asarray<span class=\"token punctuation\">(</span>img<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> cv2<span class=\"token punctuation\">.</span>COLOR_RGB2BGR<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"72\"></td><td><pre></pre></td></tr><tr><td data-num=\"73\"></td><td><pre>img_cat <span class=\"token operator\">=</span> cv2AddChineseText<span class=\"token punctuation\">(</span>img_cat<span class=\"token punctuation\">,</span> <span class=\"token string\">'阿宇'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token number\">400</span><span class=\"token punctuation\">,</span><span class=\"token number\">800</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> textColor<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">255</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> textSize<span class=\"token operator\">=</span><span class=\"token number\">200</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"74\"></td><td><pre>img_cat_fixed <span class=\"token operator\">=</span> cv2<span class=\"token punctuation\">.</span>cvtColor<span class=\"token punctuation\">(</span>img_cat<span class=\"token punctuation\">,</span>cv2<span class=\"token punctuation\">.</span>COLOR_BGR2RGB<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"75\"></td><td><pre>plt<span class=\"token punctuation\">.</span>imshow<span class=\"token punctuation\">(</span>img_cat_fixed<span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h2 id=\"opencv读取摄像头视频流并显示\"><a class=\"anchor\" href=\"#opencv读取摄像头视频流并显示\">#</a> OpenCV 读取摄像头视频流，并显示</h2>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token triple-quoted-string string\">\"\"\"</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>OpenCV读取摄像头视频流，并显示</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>类似demo1.py中的显示图片</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>\"\"\"</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\"># 导入 OpenCV</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">import</span> cv2</pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\"># 使用 VideoCapture，读取默认摄像头，后面的数字表示摄像头的编号，如果有多个摄像头可以换成其他数字</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>cap <span class=\"token operator\">=</span> cv2<span class=\"token punctuation\">.</span>VideoCapture<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token comment\"># 再使用 cap.read () 读取视频流，类似照片，他会以一帧帧的图片返回，所以我们需要用一个循环语句来一直获取</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">while</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token comment\"># 返回的是元组</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    ret<span class=\"token punctuation\">,</span>frame <span class=\"token operator\">=</span> cap<span class=\"token punctuation\">.</span>read<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token comment\"># 这里可以把 frame 就当成图片来处理</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token comment\"># 镜像</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    frame <span class=\"token operator\">=</span> cv2<span class=\"token punctuation\">.</span>flip<span class=\"token punctuation\">(</span>frame<span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token comment\"># 颜色变为灰度</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    gray <span class=\"token operator\">=</span> cv2<span class=\"token punctuation\">.</span>cvtColor<span class=\"token punctuation\">(</span>frame<span class=\"token punctuation\">,</span>cv2<span class=\"token punctuation\">.</span>COLOR_BGR2GRAY<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token comment\"># 显示图像</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    cv2<span class=\"token punctuation\">.</span>imshow<span class=\"token punctuation\">(</span><span class=\"token string\">'demo'</span><span class=\"token punctuation\">,</span>gray<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token comment\"># 退出条件: ESC</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token keyword\">if</span> cv2<span class=\"token punctuation\">.</span>waitKey<span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;</span> <span class=\"token number\">0xFF</span> <span class=\"token operator\">==</span> <span class=\"token number\">27</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>        <span class=\"token keyword\">break</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>cap<span class=\"token punctuation\">.</span>release<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>cv2<span class=\"token punctuation\">.</span>destroyAllWindows<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h2 id=\"opencv读取摄像头视频流并存储为mp4文件\"><a class=\"anchor\" href=\"#opencv读取摄像头视频流并存储为mp4文件\">#</a> OpenCV 读取摄像头视频流，并存储为 MP4 文件</h2>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token triple-quoted-string string\">\"\"\"</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>OpenCV读取摄像头视频流，并存储为MP4文件</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>\"\"\"</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\"># 导入 OpenCV</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> cv2</pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\"># 读取默认摄像头</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>cap <span class=\"token operator\">=</span> cv2<span class=\"token punctuation\">.</span>VideoCapture<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre> </pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token comment\"># https://docs.opencv.org/4.x/dd/d43/tutorial_py_video_display.html</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token comment\"># </span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>fps <span class=\"token operator\">=</span> <span class=\"token number\">20</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>width <span class=\"token operator\">=</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span> cap<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>cv2<span class=\"token punctuation\">.</span>CAP_PROP_FRAME_WIDTH<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>height <span class=\"token operator\">=</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span> cap<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>cv2<span class=\"token punctuation\">.</span>CAP_PROP_FRAME_HEIGHT<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> </pre></td></tr><tr><td data-num=\"18\"></td><td><pre></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token comment\"># 这里使用 OpenCV 的 VideoWriter 方法来，我们看一下官网他是如何使用的</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token comment\"># 可以看到第一个参数是文件名，然后是 fourcc 编码，然后是 FPS 帧率，再是画面大小</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token comment\"># 这里需要注意的是 Fourcc 编码，我们再看一下文档，可以看到</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token comment\"># Windows 系统建议用 DIVX 编码</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token comment\"># macOS 系统建议永 MJPG、DIVX、X264</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token comment\"># 推荐用 X264、DIVX，一般 macOS 和 Windows 都试用</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token comment\"># 写法需要注意 *'X264'</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token comment\">#</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token comment\"># FPS 帧率一般根据摄像头的帧率来填写，比如我的是 20</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token comment\"># 高度、宽度可以自定义，不过我们也可以直接和原画面一样，使用 cap.get 方法获取</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>writer <span class=\"token operator\">=</span> cv2<span class=\"token punctuation\">.</span>VideoWriter<span class=\"token punctuation\">(</span><span class=\"token string\">'./myDemoVideo.mp4'</span><span class=\"token punctuation\">,</span>cv2<span class=\"token punctuation\">.</span>VideoWriter_fourcc<span class=\"token punctuation\">(</span><span class=\"token operator\">*</span><span class=\"token string\">'X264'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>fps<span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span>width<span class=\"token punctuation\">,</span>height<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre></pre></td></tr><tr><td data-num=\"33\"></td><td><pre><span class=\"token keyword\">while</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    <span class=\"token comment\"># 读取视频</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>    ret<span class=\"token punctuation\">,</span>frame <span class=\"token operator\">=</span> cap<span class=\"token punctuation\">.</span>read<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"37\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"38\"></td><td><pre>    <span class=\"token comment\"># 这里可以把 frame 就当成图片来处理</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>    <span class=\"token comment\"># 镜像</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>    frame <span class=\"token operator\">=</span> cv2<span class=\"token punctuation\">.</span>flip<span class=\"token punctuation\">(</span>frame<span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>    gray <span class=\"token operator\">=</span> cv2<span class=\"token punctuation\">.</span>cvtColor<span class=\"token punctuation\">(</span>frame<span class=\"token punctuation\">,</span>cv2<span class=\"token punctuation\">.</span>COLOR_BGR2GRAY<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"43\"></td><td><pre>    <span class=\"token comment\"># 写入画面</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>    writer<span class=\"token punctuation\">.</span>write<span class=\"token punctuation\">(</span>frame<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>    <span class=\"token comment\"># 显示图像</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>    cv2<span class=\"token punctuation\">.</span>imshow<span class=\"token punctuation\">(</span><span class=\"token string\">'demo'</span><span class=\"token punctuation\">,</span>gray<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>    <span class=\"token comment\"># 退出条件: ESC</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>    <span class=\"token keyword\">if</span> cv2<span class=\"token punctuation\">.</span>waitKey<span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;</span> <span class=\"token number\">0xFF</span> <span class=\"token operator\">==</span> <span class=\"token number\">27</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>        <span class=\"token keyword\">break</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"53\"></td><td><pre><span class=\"token comment\"># 释放句柄    </span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>writer<span class=\"token punctuation\">.</span>release<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre>cap<span class=\"token punctuation\">.</span>release<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>cv2<span class=\"token punctuation\">.</span>destroyAllWindows<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h2 id=\"opencv读取mp4视频文件\"><a class=\"anchor\" href=\"#opencv读取mp4视频文件\">#</a> OpenCV 读取 mp4 视频文件</h2>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token triple-quoted-string string\">\"\"\"</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>OpenCV读取mp4视频文件</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>\"\"\"</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\"># 导入 OpenCV</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> cv2</pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">import</span> time</pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\"># 还是使用 cv2.VideoCapture，只不过参数可以换成文件名，我们读取前面保存的 MP4 视频</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>cap <span class=\"token operator\">=</span> cv2<span class=\"token punctuation\">.</span>VideoCapture<span class=\"token punctuation\">(</span><span class=\"token string\">'./myDemoVideo.mp4'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token comment\"># 首先加一个判断，如果文件不存在或编码错误提示</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">if</span> <span class=\"token keyword\">not</span> cap<span class=\"token punctuation\">.</span>isOpened<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'文件不存在或编码错误'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token keyword\">while</span> cap<span class=\"token punctuation\">.</span>isOpened<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token comment\"># 读取帧</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    ret<span class=\"token punctuation\">,</span>frame <span class=\"token operator\">=</span> cap<span class=\"token punctuation\">.</span>read<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token keyword\">if</span> ret<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        <span class=\"token comment\"># 显示</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>        cv2<span class=\"token punctuation\">.</span>imshow<span class=\"token punctuation\">(</span><span class=\"token string\">'demo'</span><span class=\"token punctuation\">,</span>frame<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>        <span class=\"token comment\"># 降低显示速度（不加这行会显示得特别快）</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>        time<span class=\"token punctuation\">.</span>sleep<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token operator\">/</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>        <span class=\"token keyword\">if</span> cv2<span class=\"token punctuation\">.</span>waitKey<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;</span> <span class=\"token number\">0xFF</span> <span class=\"token operator\">==</span> <span class=\"token builtin\">ord</span><span class=\"token punctuation\">(</span><span class=\"token string\">'q'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>            <span class=\"token keyword\">break</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>    <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>        <span class=\"token keyword\">break</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>cap<span class=\"token punctuation\">.</span>release<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>cv2<span class=\"token punctuation\">.</span>destroyAllWindows<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h2 id=\"opencv读取摄像头视频视频流并在画面上绘制文字和图形\"><a class=\"anchor\" href=\"#opencv读取摄像头视频视频流并在画面上绘制文字和图形\">#</a> OpenCV 读取摄像头视频视频流，并在画面上绘制文字和图形</h2>\n<div class=\"tab\" data-id=\"id1\" data-title=\"main.py\">\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token triple-quoted-string string\">\"\"\"</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>OpenCV 读取摄像头视频视频流，并在画面上绘制文字和图形</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>\"\"\"</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\"># 导入 OpenCV</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> cv2</pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">import</span> time</pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">import</span> drawUtils</pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>cap <span class=\"token operator\">=</span> cv2<span class=\"token punctuation\">.</span>VideoCapture<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>width <span class=\"token operator\">=</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>cap<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>cv2<span class=\"token punctuation\">.</span>CAP_PROP_FRAME_WIDTH<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>height <span class=\"token operator\">=</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>cap<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>cv2<span class=\"token punctuation\">.</span>CAP_PROP_FRAME_HEIGHT<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>left_x <span class=\"token operator\">=</span> width <span class=\"token operator\">//</span> <span class=\"token number\">2</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>left_y <span class=\"token operator\">=</span> height <span class=\"token operator\">//</span> <span class=\"token number\">2</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>rect_w <span class=\"token operator\">=</span> width <span class=\"token operator\">//</span> <span class=\"token number\">4</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>rect_h <span class=\"token operator\">=</span> height <span class=\"token operator\">//</span> <span class=\"token number\">4</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>start_time <span class=\"token operator\">=</span> time<span class=\"token punctuation\">.</span>time<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token keyword\">while</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token comment\"># 读取每一帧</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    ret<span class=\"token punctuation\">,</span>frame <span class=\"token operator\">=</span> cap<span class=\"token punctuation\">.</span>read<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token comment\"># 绘制矩形</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>    cv2<span class=\"token punctuation\">.</span>rectangle<span class=\"token punctuation\">(</span>frame<span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span>left_x<span class=\"token punctuation\">,</span>left_y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span>left_x<span class=\"token operator\">+</span>rect_w<span class=\"token punctuation\">,</span>left_y<span class=\"token operator\">+</span>rect_h<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">255</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"33\"></td><td><pre>    <span class=\"token comment\"># 计算 FPS</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    now <span class=\"token operator\">=</span> time<span class=\"token punctuation\">.</span>time<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>    fps_text  <span class=\"token operator\">=</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span> <span class=\"token operator\">/</span> <span class=\"token punctuation\">(</span> now <span class=\"token operator\">-</span> start_time<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>    start_time <span class=\"token operator\">=</span> now</pre></td></tr><tr><td data-num=\"37\"></td><td><pre></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>    <span class=\"token comment\"># 添加中文（首先导入模块）</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>    frame <span class=\"token operator\">=</span> drawUtils<span class=\"token punctuation\">.</span>cv2AddChineseText<span class=\"token punctuation\">(</span>frame<span class=\"token punctuation\">,</span> <span class=\"token string\">'帧率：'</span><span class=\"token operator\">+</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>fps_text<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">,</span><span class=\"token number\">50</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> textColor<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">255</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> textSize<span class=\"token operator\">=</span><span class=\"token number\">30</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>    <span class=\"token comment\"># 显示画面</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>    cv2<span class=\"token punctuation\">.</span>imshow<span class=\"token punctuation\">(</span><span class=\"token string\">'demo'</span><span class=\"token punctuation\">,</span>frame<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>    <span class=\"token comment\"># 退出条件</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>    <span class=\"token keyword\">if</span> cv2<span class=\"token punctuation\">.</span>waitKey<span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;</span> <span class=\"token number\">0xFF</span> <span class=\"token operator\">==</span> <span class=\"token number\">27</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>        <span class=\"token keyword\">break</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre></pre></td></tr><tr><td data-num=\"48\"></td><td><pre></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>cap<span class=\"token punctuation\">.</span>release<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>cv2<span class=\"token punctuation\">.</span>destroyAllWindows<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure></div>\n<div class=\"tab\" data-id=\"id1\" data-title=\"drawUtils.py\">\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token triple-quoted-string string\">\"\"\"</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>绘制工具</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>\"\"\"</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\"># 导入 PIL 对应包</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> cv2</pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">from</span> PIL <span class=\"token keyword\">import</span> Image<span class=\"token punctuation\">,</span> ImageDraw<span class=\"token punctuation\">,</span> ImageFont</pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np</pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\"># 绘制中文</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">cv2AddChineseText</span><span class=\"token punctuation\">(</span>img<span class=\"token punctuation\">,</span> text<span class=\"token punctuation\">,</span> position<span class=\"token punctuation\">,</span> textColor<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">255</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> textSize<span class=\"token operator\">=</span><span class=\"token number\">30</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    img <span class=\"token operator\">=</span> Image<span class=\"token punctuation\">.</span>fromarray<span class=\"token punctuation\">(</span>cv2<span class=\"token punctuation\">.</span>cvtColor<span class=\"token punctuation\">(</span>img<span class=\"token punctuation\">,</span> cv2<span class=\"token punctuation\">.</span>COLOR_BGR2RGB<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    draw <span class=\"token operator\">=</span> ImageDraw<span class=\"token punctuation\">.</span>Draw<span class=\"token punctuation\">(</span>img<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token comment\"># 字体的格式</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    fontStyle <span class=\"token operator\">=</span> ImageFont<span class=\"token punctuation\">.</span>truetype<span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token string\">\"./font/simsun.ttc\"</span><span class=\"token punctuation\">,</span> textSize<span class=\"token punctuation\">,</span> encoding<span class=\"token operator\">=</span><span class=\"token string\">\"utf-8\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token comment\"># 绘制文本</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    draw<span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">(</span>position<span class=\"token punctuation\">,</span> text<span class=\"token punctuation\">,</span> textColor<span class=\"token punctuation\">,</span> font<span class=\"token operator\">=</span>fontStyle<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token comment\"># 转换回 OpenCV 格式</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token keyword\">return</span> cv2<span class=\"token punctuation\">.</span>cvtColor<span class=\"token punctuation\">(</span>np<span class=\"token punctuation\">.</span>asarray<span class=\"token punctuation\">(</span>img<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> cv2<span class=\"token punctuation\">.</span>COLOR_RGB2BGR<span class=\"token punctuation\">)</span></pre></td></tr></table></figure></div>\n",
            "tags": [
                "人工智能",
                "基础知识",
                "python",
                "numpy"
            ]
        },
        {
            "id": "https://blog.aayu.today/artificial-intelligence/basic/20221027/",
            "url": "https://blog.aayu.today/artificial-intelligence/basic/20221027/",
            "title": "Python环境配置",
            "date_published": "2022-10-26T16:54:55.000Z",
            "content_html": "<h2 id=\"前言\"><a class=\"anchor\" href=\"#前言\">#</a> 前言</h2>\n<p>没想到我又回来了，后面我的研究课题估计和 Python 逃不脱关系，终于又重新拾起了这门语言，所以便从头开始，把一些值得记录的记录下来，努力努力，向梦想前进！</p>\n<h2 id=\"scoop安装miniconda\"><a class=\"anchor\" href=\"#scoop安装miniconda\">#</a> Scoop 安装 miniconda</h2>\n<p>我的开发环境是 windows，而 scoop 是 windows 上超好用的一个包管理工具，感兴趣的小伙伴可以看这篇博客（<a href=\"https://blog.aayu.today/skill/environment-configuration/20210123/\">重装系统后要干的几件事</a>）了解哟</p>\n<p>用下面一行命令即可安装 miniconda</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>scoop <span class=\"token function\">install</span> miniconda3</pre></td></tr></table></figure><p>安装完后重启一下 everything，即可用 wox 输入 <code>anaconda pow</code>  快速启动 anaconda 的 shell 了</p>\n<h2 id=\"conda常用命令\"><a class=\"anchor\" href=\"#conda常用命令\">#</a> conda 常用命令</h2>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">命令</th>\n<th style=\"text-align:center\">备注</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">conda --version</td>\n<td style=\"text-align:center\">查看 conda 的版本号</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">conda env list</td>\n<td style=\"text-align:center\">列出所有环境</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">conda create --name 环境名称</td>\n<td style=\"text-align:center\">创建环境</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">conda create --name 环境名称 python=2.7</td>\n<td style=\"text-align:center\">创建指定 python 版本的环境</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">conda activate 环境名称</td>\n<td style=\"text-align:center\">进入环境</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">conda deactivate</td>\n<td style=\"text-align:center\">退出环境</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">conda remove --name 环境名称 --all</td>\n<td style=\"text-align:center\">删除环境，加 all 表示环境下的所有包一并被删除</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"conda换国内源\"><a class=\"anchor\" href=\"#conda换国内源\">#</a> conda 换国内源</h2>\n<p>创建用户配置文件</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>conda config --set show_channel_urls <span class=\"token function\">yes</span></pre></td></tr></table></figure><p>进入<span class=\"exturl\" data-url=\"aHR0cHM6Ly9taXJyb3JzLnR1bmEudHNpbmdodWEuZWR1LmNuL2hlbHAvYW5hY29uZGEv\">清华大学开源软件镜像站</span>，复制配置内容到用户目录下刚创建的 <code>.condarc</code>  文件，要复制的配置内容如下</p>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">channels</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token punctuation\">-</span> defaults</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token key atrule\">show_channel_urls</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token key atrule\">default_channels</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token punctuation\">-</span> https<span class=\"token punctuation\">:</span>//mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token punctuation\">-</span> https<span class=\"token punctuation\">:</span>//mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/r</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token punctuation\">-</span> https<span class=\"token punctuation\">:</span>//mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/msys2</pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token key atrule\">custom_channels</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token key atrule\">conda-forge</span><span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span>//mirrors.tuna.tsinghua.edu.cn/anaconda/cloud</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token key atrule\">msys2</span><span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span>//mirrors.tuna.tsinghua.edu.cn/anaconda/cloud</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>  <span class=\"token key atrule\">bioconda</span><span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span>//mirrors.tuna.tsinghua.edu.cn/anaconda/cloud</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>  <span class=\"token key atrule\">menpo</span><span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span>//mirrors.tuna.tsinghua.edu.cn/anaconda/cloud</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>  <span class=\"token key atrule\">pytorch</span><span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span>//mirrors.tuna.tsinghua.edu.cn/anaconda/cloud</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>  <span class=\"token key atrule\">pytorch-lts</span><span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span>//mirrors.tuna.tsinghua.edu.cn/anaconda/cloud</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>  <span class=\"token key atrule\">simpleitk</span><span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span>//mirrors.tuna.tsinghua.edu.cn/anaconda/cloud</pre></td></tr></table></figure><div class=\"note info\">\n<p>注意，把 <code>.condarc</code>  文件默认的内容删掉</p>\n</div>\n<p>输入 <code>conda clean -i</code>  清除默认缓存，用 <code>conda config --show-sources</code>  查看配置是否更换成功</p>\n<h2 id=\"pip换国内源\"><a class=\"anchor\" href=\"#pip换国内源\">#</a> pip 换国内源</h2>\n<h3 id=\"临时换源不推荐\"><a class=\"anchor\" href=\"#临时换源不推荐\">#</a> 临时换源（不推荐）</h3>\n<p>可能要安装包里的依赖包下载依然缓慢</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>pip <span class=\"token function\">install</span> -i https://pypi.tuna.tsinghua.edu.cn/simple 包名</pre></td></tr></table></figure><h3 id=\"永久换源推荐\"><a class=\"anchor\" href=\"#永久换源推荐\">#</a> 永久换源（推荐）</h3>\n<ol>\n<li>在用户目录下创建 pip 文件夹（如：C:\\Users\\Administrator\\pip）</li>\n<li>在刚创建的 pip 文件夹下创建 <code>pip.ini</code>  文件</li>\n<li>把以下配置内容放到刚创建的 pip.ini 文件里</li>\n</ol>\n<figure class=\"highlight ini\"><figcaption data-lang=\"ini\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token header\"><span class=\"token punctuation\">[</span><span class=\"token section-name selector\">global</span><span class=\"token punctuation\">]</span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token key attr-name\">index-url</span> <span class=\"token punctuation\">=</span> <span class=\"token value attr-value\">https://pypi.tuna.tsinghua.edu.cn/simple/</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token header\"><span class=\"token punctuation\">[</span><span class=\"token section-name selector\">install</span><span class=\"token punctuation\">]</span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token key attr-name\">trusted-host</span> <span class=\"token punctuation\">=</span> <span class=\"token value attr-value\">pypi.tuna.tsinghua.edu.cn</span></pre></td></tr></table></figure><h2 id=\"安装opencv\"><a class=\"anchor\" href=\"#安装opencv\">#</a> 安装 opencv</h2>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>conda <span class=\"token function\">install</span> opencv</pre></td></tr></table></figure><h2 id=\"安装mediapipe\"><a class=\"anchor\" href=\"#安装mediapipe\">#</a> 安装 mediapipe</h2>\n<p>mediapipe 在 conda 上没有，所以就用 pip 安装</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>pip <span class=\"token function\">install</span> mediapipe</pre></td></tr></table></figure><h2 id=\"运行手指骨骼检测demo\"><a class=\"anchor\" href=\"#运行手指骨骼检测demo\">#</a> 运行手指骨骼检测 demo</h2>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token triple-quoted-string string\">\"\"\"</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>演示Demo</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>\"\"\"</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\"># 导入 opencv</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> cv2</pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np</pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">import</span> math</pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\"># 导入 mediapipe：https://google.github.io/mediapipe/solutions/hands</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">import</span> mediapipe <span class=\"token keyword\">as</span> mp</pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>mp_drawing <span class=\"token operator\">=</span> mp<span class=\"token punctuation\">.</span>solutions<span class=\"token punctuation\">.</span>drawing_utils</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>mp_drawing_styles <span class=\"token operator\">=</span> mp<span class=\"token punctuation\">.</span>solutions<span class=\"token punctuation\">.</span>drawing_styles</pre></td></tr><tr><td data-num=\"16\"></td><td><pre>mp_hands <span class=\"token operator\">=</span> mp<span class=\"token punctuation\">.</span>solutions<span class=\"token punctuation\">.</span>hands</pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>hands <span class=\"token operator\">=</span> mp_hands<span class=\"token punctuation\">.</span>Hands<span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    model_complexity<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    min_detection_confidence<span class=\"token operator\">=</span><span class=\"token number\">0.5</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    min_tracking_confidence<span class=\"token operator\">=</span><span class=\"token number\">0.5</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token comment\"># 读取视频流</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>cap <span class=\"token operator\">=</span> cv2<span class=\"token punctuation\">.</span>VideoCapture<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token comment\"># 获取画面宽度、高度</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>width <span class=\"token operator\">=</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>cap<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>cv2<span class=\"token punctuation\">.</span>CAP_PROP_FRAME_WIDTH<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>height <span class=\"token operator\">=</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>cap<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>cv2<span class=\"token punctuation\">.</span>CAP_PROP_FRAME_HEIGHT<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre></pre></td></tr><tr><td data-num=\"30\"></td><td><pre></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token keyword\">while</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    ret<span class=\"token punctuation\">,</span>frame <span class=\"token operator\">=</span> cap<span class=\"token punctuation\">.</span>read<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre></pre></td></tr><tr><td data-num=\"34\"></td><td><pre></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>    <span class=\"token comment\"># 镜像</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>    frame <span class=\"token operator\">=</span> cv2<span class=\"token punctuation\">.</span>flip<span class=\"token punctuation\">(</span>frame<span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>    frame<span class=\"token punctuation\">.</span>flags<span class=\"token punctuation\">.</span>writeable <span class=\"token operator\">=</span> <span class=\"token boolean\">False</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>    frame <span class=\"token operator\">=</span> cv2<span class=\"token punctuation\">.</span>cvtColor<span class=\"token punctuation\">(</span>frame<span class=\"token punctuation\">,</span> cv2<span class=\"token punctuation\">.</span>COLOR_BGR2RGB<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>    <span class=\"token comment\"># 识别</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>    results <span class=\"token operator\">=</span> hands<span class=\"token punctuation\">.</span>process<span class=\"token punctuation\">(</span>frame<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>    frame<span class=\"token punctuation\">.</span>flags<span class=\"token punctuation\">.</span>writeable <span class=\"token operator\">=</span> <span class=\"token boolean\">True</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>    frame <span class=\"token operator\">=</span> cv2<span class=\"token punctuation\">.</span>cvtColor<span class=\"token punctuation\">(</span>frame<span class=\"token punctuation\">,</span> cv2<span class=\"token punctuation\">.</span>COLOR_RGB2BGR<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"47\"></td><td><pre></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>    <span class=\"token comment\"># 如果有结果</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>    <span class=\"token keyword\">if</span> results<span class=\"token punctuation\">.</span>multi_hand_landmarks<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>        </pre></td></tr><tr><td data-num=\"51\"></td><td><pre>        <span class=\"token comment\"># 遍历双手</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>        <span class=\"token keyword\">for</span> hand_landmarks <span class=\"token keyword\">in</span> results<span class=\"token punctuation\">.</span>multi_hand_landmarks<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>            mp_drawing<span class=\"token punctuation\">.</span>draw_landmarks<span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>                frame<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre>                hand_landmarks<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>                mp_hands<span class=\"token punctuation\">.</span>HAND_CONNECTIONS<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre>                mp_drawing_styles<span class=\"token punctuation\">.</span>get_default_hand_landmarks_style<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre>                mp_drawing_styles<span class=\"token punctuation\">.</span>get_default_hand_connections_style<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre>            </pre></td></tr><tr><td data-num=\"60\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"61\"></td><td><pre>    <span class=\"token comment\"># 显示画面</span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre>    cv2<span class=\"token punctuation\">.</span>imshow<span class=\"token punctuation\">(</span><span class=\"token string\">'demo'</span><span class=\"token punctuation\">,</span>frame<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"63\"></td><td><pre></pre></td></tr><tr><td data-num=\"64\"></td><td><pre>    <span class=\"token keyword\">if</span> cv2<span class=\"token punctuation\">.</span>waitKey<span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;</span> <span class=\"token number\">0xFF</span> <span class=\"token operator\">==</span> <span class=\"token builtin\">ord</span><span class=\"token punctuation\">(</span><span class=\"token string\">'q'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"65\"></td><td><pre>        <span class=\"token keyword\">break</span></pre></td></tr><tr><td data-num=\"66\"></td><td><pre></pre></td></tr><tr><td data-num=\"67\"></td><td><pre>cap<span class=\"token punctuation\">.</span>release<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"68\"></td><td><pre>cv2<span class=\"token punctuation\">.</span>destroyAllWindows<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h2 id=\"运行结果\"><a class=\"anchor\" href=\"#运行结果\">#</a> 运行结果</h2>\n<p>哈哈，一个帅气的 <code>午</code> 印就被检测出来啦</p>\n<p><img data-src=\"https://image.aayu.today/uploads/2022/10/27/202210270141776.png\" alt=\"\" /></p>\n",
            "tags": [
                "人工智能",
                "基础知识",
                "python",
                "conda"
            ]
        },
        {
            "id": "https://blog.aayu.today/leisure/delicious-food/20221022/",
            "url": "https://blog.aayu.today/leisure/delicious-food/20221022/",
            "title": "人间有味是清欢",
            "date_published": "2022-10-21T16:58:49.000Z",
            "content_html": "<h2 id=\"典故\"><a class=\"anchor\" href=\"#典故\">#</a> 典故</h2>\n<p>「 人间有味是清欢 」出自宋代苏轼的《浣溪沙・细雨斜风作晓寒》。清欢的意思是清淡的欢愉。</p>\n<p>全文如下：</p>\n<p>细雨斜风作晓寒，淡烟疏柳媚晴滩。入淮清洛渐漫漫。</p>\n<p>雪沫乳花浮午盏，蓼茸蒿笋试春盘。<span class=\"orange\">人间有味是清欢</span>。</p>\n<p>白话译文：</p>\n<p>冬天早晨细雨斜风天气微寒，淡淡的烟雾和稀疏的杨柳使初晴后的沙滩更妩媚。洛涧入淮后水势一片茫茫。</p>\n<p>乳色鲜白的好茶伴着新鲜如翡翠般的春蔬，这野餐的味道着实不错。而人间真正有滋味的还是清淡的欢愉。</p>\n<p>这是一首纪游词，是以时间为序来铺叙景物的。上片写早春景象，下片写作者与同游者游山时以清茶野餐的风味。作品充满春天的气息，洋溢着生命的活力，反映了作者对现实生活的热爱和健胜进取的精神。「 人间有味是清欢 」，这是一个具有哲理性的命题，用词的结尾，却自然浑成，有照彻全篇之妙趣，为全篇增添了欢乐情调和诗味、理趣。</p>\n<h2 id=\"望尝尽天下美食\"><a class=\"anchor\" href=\"#望尝尽天下美食\">#</a> 望尝尽天下美食</h2>\n<ul class=\"task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_0\" disabled=\"true\" /><label for=\"cbx_0\"> <span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMWhHNHkxSDdrZw==\">虾滑鸡翅</span></label></li>\n</ul>\n<h2 id=\"参考资料\"><a class=\"anchor\" href=\"#参考资料\">#</a> 参考资料</h2>\n<ul>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC8zNTg4NjA2NjE=\">经典美食诗词合集</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly96aGlkYW8uYmFpZHUuY29tL3F1ZXN0aW9uLzM3MzU4NzIzOS5odG1s\">“人间有味是清欢” 出自哪里？“清欢” 怎么解释？</span></li>\n</ul>\n",
            "tags": [
                "清风明月",
                "美食",
                "美食"
            ]
        },
        {
            "id": "https://blog.aayu.today/resources/20221022/",
            "url": "https://blog.aayu.today/resources/20221022/",
            "title": "🕹️电子类资源汇总~",
            "date_published": "2022-10-21T16:33:56.000Z",
            "content_html": "<h2 id=\"前言\"><a class=\"anchor\" href=\"#前言\">#</a> 前言</h2>\n<p>我宣布，B 站是最好的学习平台 😎，但在 B 站上用收藏夹管理学习的知识总是不方便，各种分类啊什么的，收藏夹一多，就更乱了。既然我有博客，我为啥不在博客里列个目录呢，完全可以按照自己的想法分类和整理，所以便有了本篇博客，也方便后期自己进行回顾～～</p>\n<h2 id=\"电子电路基础\"><a class=\"anchor\" href=\"#电子电路基础\">#</a> 电子电路基础</h2>\n<div class=\"tab\" data-id=\"id1\" data-title=\"科普\">\n<ul class=\"task-list\">\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMWFhNDExZzc2VQ==\">电子电路入门没你想的那么简（复）单（杂）</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMWszNDExVzdxeA==\">新手如何入门硬件 一本正经的电子电路入门</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMXFnNDExUzdWRw==\">锂电池充电的同时也能放电吗？</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMVFyNHkxVDdiNQ==\">再复杂的芯片，也离不开这 8 种基础电路</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMW81NHkxcDd4bw==\">OLED 和 LCD 屏幕最本质的区别，一个视频让你彻底搞懂！</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMW02NHkxRDdnYg==\">逆变！逆变！直流电如何变为交流电，一分钟动画让你看懂！</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMUZxNHkxNzd3bQ==\">数码管如何工作？超形象动画让你一看就懂</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMXJWNDExczdlWQ==\">从 1 万纳米到 5 纳米，只用了 50 年！平面晶体管和三维立体场效应管的区别？</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMVRLNHkxZzdHUA==\">6 年了，问世即巅峰的雷电 3 为何还不普及？</span></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_0\" disabled=\"true\" /><label for=\"cbx_0\"> <span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMVRoNDExaDc5eQ==\">火线零线和地线到底有什么区别？接地接到哪了？</span></label></li>\n</ul>\n</div>\n<div class=\"tab\" data-id=\"id1\" data-title=\"基础元器件\">\n<ul class=\"task-list\">\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMUZYNHkxVDdOeg==\">半导体为什么叫半导体？它是如何导电的？原理非常简单，知道的人却不多！</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMWt2NDExNTc0WQ==\">三极管是如何导电？超形象动画让你一看就懂！</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMUpxNHkxRTdRWg==\">三极管的饱和与放大</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMTM0NHkxNjdxbQ==\">Mos 管的工作原理</span></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_1\" disabled=\"true\" /><label for=\"cbx_1\"> <span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMTQ4NHkxYzdMdA==\">为什么芯片都是 CMOS 的呢？CMOS 和 TTL 有什么区别？TTL 与 CMOS 的高低电平的标准是多少（5V 为例）？</span></label></li>\n</ul>\n</div>\n<div class=\"tab\" data-id=\"id1\" data-title=\"电路设计\">\n<ul>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMUh2NHkxZjd3aA==\">芯片虽然复杂，但是内部电路不难、一看就懂</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMTExNHkxczdTWg==\">如何设计一个锂电池充电电路</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMXQ2NHkxYjd3Nw==\">怎么把 12V 电降到 5V？直流线性稳压降压电源原理</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMTY0NHkxcTc0dw==\">直流电 12V 变 5V 开关电源的工作原理 DC DC 降压稳压电路的基本原理</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMWlNNHkxSzdpRw==\">怎么把 5V 电升到 12V？开关电源 BOOST 升压原理</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMVlRNHkxZjdQMQ==\">最简单，只要一个元器件，把 12V 降到 5V</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMXhYNHkxRjdMcA==\">电荷泵升压原理</span></li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMXdONHkxUDc1bg==\">双控灯原理</span></li>\n</ul>\n</div>\n<div class=\"tab\" data-id=\"id1\" data-title=\"面试相关\">\n<ul>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMVFmNHkxNjdoNg==\">10 道题看你能答对 2 道，大多数只能答对 1 道题，硬件工程师面试真题</span></li>\n</ul>\n</div>\n",
            "tags": [
                "电子"
            ]
        }
    ]
}